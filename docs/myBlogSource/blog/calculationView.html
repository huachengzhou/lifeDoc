<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>计算器</title>
    <script src="resources.js" type="text/javascript"></script>

    <style>
        body {background-color:#b0c4de;}
    </style>
</head>
<body>
<div>
    <div id="navBarToolView" style="margin-top: 70px;">
    </div>

    <div class="container">
        <div class="row">

            <div class="col-xs-12  col-sm-12  col-md-12  col-lg-12" style="margin-top:10px;margin-bottom:10px;">
                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <div class="col-xs-12  col-sm-12  col-md-12  col-lg-12">
                            <textarea class="form-control" data-value="" name="result"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="0" data-value="0" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="1" data-value="1" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="2" data-value="2" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="3" data-value="3" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="4" data-value="4" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="5" data-value="5" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="6" data-value="6" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="7" data-value="7" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="8" data-value="8" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="9" data-value="9" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="退格" data-value="-1" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="清屏" data-value="clear" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="(" data-value="(" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value=")" data-value=")" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="[" data-value="[" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="]" data-value="]" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="{" data-value="{" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="}" data-value="}" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="." data-value="." class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="+" data-value="+" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="-" data-value="-" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="÷" data-value="/" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                        <div class="col-xs-1  col-sm-1  col-md-1  col-lg-1">
                            <input type="button" value="x" data-value="*" class="btn btn-info"
                                   onclick="calculationHandleWrite(this)">
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-xs-12  col-sm-12  col-md-12  col-lg-12">
                            <button type="button" class="btn btn-default">
                                <i class="fa fa-check-square  fa-5x pull-left  fa-border" onclick="(function(_this) {
                                    var form = $(_this).closest('form');
                                    var result = form.find('[name=result]');
                                    var value = result.val() ;
                                    if (!value){
                                        return false;
                                    }
                                    try { result.val(eval(value)) ;} catch(e) { }
                                }(this));"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>


        </div>
    </div>

</div>

<script src="../assembly/js/navbar.js"></script>
<script src="../assembly/js/aesTool.js" type="text/javascript"></script>
<script src="../assembly/js/bootstrapModel.js" type="text/javascript"></script>
<script type="text/javascript">
    function calculationHandleWrite(_this) {
        var value = $(_this).attr("data-value");
        var form = $(_this).closest("form");
        var result = form.find("textarea[name='result']");
        var str = result.attr("data-value");
        if (value) {
            //true
        } else if (value == '0') {
            //true
        } else {
            return false;
        }
        if (value == 'clear') {
            result.attr({"data-value": ''});
            result.val('');
            return false;
        }
        var arr = str.split(",");
        var temp = [];
        for (var i = 0; i < arr.length; i++) {
            if (arr[i]) {
                temp.push(arr[i]);
            }
        }
        arr = temp;
        if (value == '-1') {
            arr.pop();
            result.attr({"data-value": arr.join(",")});
            result.val(arr.join(""));
            return false;
        }
        arr.push(value);
        result.attr({"data-value": arr.join(",")});
        result.val(arr.join(""));
    }

    $(document).ready(function () {
        $("#navBarToolView").empty().append(navBarTool.getHtml());
    });
</script>
</body>
</html>