var zbpConfig = {    bloghost: "https://www.feiniaomy.com/",    blogversion: "172955",    ajaxurl: "https://www.feiniaomy.com/zb_system/cmd.php?act=ajax&src=",    cookiepath: "/",    lang: {        error: {            72: "名称不能为空或格式不正确",            29: "邮箱格式不正确，可能过长或为空",            46: "评论内容不能为空或过长"        }    },    comment: {        useDefaultEvents: true,        inputs: {            action: {                getter: function () {                    return $("#inpId").parent("form").attr("action");                }            },            name: {                selector: '#inpName',                saveLocally: true,                required: true,                validateRule: /^[^\s　]+$/ig,                validateFailedErrorCode: 72,            },            email: {                selector: '#inpEmail',                saveLocally: true,                validateRule: /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/ig,                validateFailedErrorCode: 29,            },            homepage: {                selector: '#inpHomePage',                getter: function () {                    var t = $('#inpHomePage').val();                    return (!/^(.+)\:\/\//.test(t) && t !== "") ? 'http://' + t : t;                 },                saveLocally: true            },            postid: {                selector: '#inpId',                required: true            },            verify: {                selector: '#inpVerify'            },            content: {                selector: '#txaArticle',                required: true,                validateRule: /./ig,                validateFailedErrorCode: 46,            },            replyid: {                selector: '#inpRevID'            },            format: {                getter: function () {return 'json';}            }        }    }};var zbp = new ZBP(zbpConfig);var bloghost = zbp.options.bloghost;var cookiespath = zbp.options.cookiepath;var ajaxurl = zbp.options.ajaxurl;var lang_comment_name_error = zbp.options.lang.error[72];var lang_comment_email_error = zbp.options.lang.error[29];var lang_comment_content_error = zbp.options.lang.error[46];if($('#article-text').length > 0){$(function(){var compatibility={as3:"actionscript","c#":"csharp",delphi:"pascal",html:"markup",xml:"markup",vb:"basic",js:"javascript",plain:"markdown",pl:"perl",ps:"powershell"};var runFunction=function(doms,callback){doms.each(function(index,unwrappedDom){var dom=$(unwrappedDom);var codeDom=$("<code>");if(callback)callback(dom);var languageClass="prism-language-"+function(classObject){if(classObject===null)return"markdown";var className=classObject[1];return compatibility[className]?compatibility[className]:className}(dom.attr("class").match(/prism-language-([0-9a-zA-Z]+)/));codeDom.html(dom.html()).addClass("prism-line-numbers").addClass(languageClass);dom.html("").addClass(languageClass).append(codeDom)})};runFunction($("pre.prism-highlight"));runFunction($('pre[class*="brush:"]'),function(preDom){var original;if((original=preDom.attr("class").match(/brush:([a-zA-Z0-9\#]+);/))!==null){preDom.get(0).className="prism-highlight prism-language-"+original[1]}});Prism.highlightAll()});}(function ($, window, i) { $.fn.responsiveSlides = function (options) { var settings = $.extend({ "auto": true, "speed": 1000, "timeout": 8000, "pager": true, "nav": true, "random": false, "pause": true, "pauseControls": true, "prevText": "Previous", "nextText": "Next", "maxwidth": "980", "navContainer": "", "manualControls": "", "namespace": "rslides", "before": $.noop, "after": $.noop }, options); return this.each(function () { i++; var $this = $(this), vendor, selectTab, startCycle, restartCycle, rotate, $tabs, index = 0, $slide = $this.children(), length = $slide.length, fadeTime = parseFloat(settings.speed), waitTime = parseFloat(settings.timeout), maxw = parseFloat(settings.maxwidth), namespace = settings.namespace, namespaceIdx = namespace + i, navClass = namespace + "_nav " + namespaceIdx + "_nav", activeClass = namespace + "_here", visibleClass = namespaceIdx + "_on", slideClassPrefix = namespaceIdx + "_s", $pager = $("<ul class='" + namespace + "_tabs' />"), visible = { "float": "left", "position": "relative", "opacity": 1, "zIndex": 2 }, hidden = { "float": "none", "position": "absolute", "opacity": 0, "zIndex": 1 }, supportsTransitions = (function () { var docBody = document.body || document.documentElement; var styles = docBody.style; var prop = "transition"; if (typeof styles[prop] === "string") { return true } vendor = ["Moz", "Webkit", "Khtml", "O", "ms"]; prop = prop.charAt(0).toUpperCase() + prop.substr(1); var i; for (i = 0; i < vendor.length; i++) { if (typeof styles[vendor[i] + prop] === "string") { return true } } return false })(), slideTo = function (idx) { settings.before(idx); if (supportsTransitions) { $slide.removeClass(visibleClass).css(hidden).eq(idx).addClass(visibleClass).css(visible); index = idx; setTimeout(function () { settings.after(idx) }, fadeTime) } else { $slide.stop().fadeOut(fadeTime, function () { $(this).removeClass(visibleClass).css(hidden).css("opacity", 1) }).eq(idx).fadeIn(fadeTime, function () { $(this).addClass(visibleClass).css(visible); settings.after(idx); index = idx }) } }; if (settings.random) { $slide.sort(function () { return (Math.round(Math.random()) - 0.5) }); $this.empty().append($slide) } $slide.each(function (i) { this.id = slideClassPrefix + i }); $this.addClass(namespace + " " + namespaceIdx); if (options && options.maxwidth) { $this.css("max-width", maxw) } $slide.hide().css(hidden).eq(0).addClass(visibleClass).css(visible).show(); if (supportsTransitions) { $slide.show().css({ "-webkit-transition": "opacity " + fadeTime + "ms ease-in-out", "-moz-transition": "opacity " + fadeTime + "ms ease-in-out", "-o-transition": "opacity " + fadeTime + "ms ease-in-out", "transition": "opacity " + fadeTime + "ms ease-in-out" }) } if ($slide.length > 1) { if (waitTime < fadeTime + 100) { return } if (settings.pager && !settings.manualControls) { var tabMarkup = []; var pagerleft = 0; $slide.each(function (i) { var n = i + 1; pagerleft = pagerleft + 13; tabMarkup += "<li><a href='#' rel='nofollow'>" + n + "</a></li>" }); $pager.css('margin-left', '-' + pagerleft + 'px'); $pager.append(tabMarkup); if (options.navContainer) { $(settings.navContainer).append($pager) } else { $this.after($pager) } } if (settings.manualControls) { $pager = $(settings.manualControls); $pager.addClass(namespace + "_tabs") } if (settings.pager || settings.manualControls) { $pager.find("li").each(function (i) { $(this).addClass(slideClassPrefix + (i + 1)) }) } if (settings.pager || settings.manualControls) { $tabs = $pager.find("a"); selectTab = function (idx) { $tabs.closest("li").removeClass(activeClass).eq(idx).addClass(activeClass) } } if (settings.auto) { startCycle = function () { rotate = setInterval(function () { $slide.stop(true, true); var idx = index + 1 < length ? index + 1 : 0; if (settings.pager || settings.manualControls) { selectTab(idx) } slideTo(idx) }, waitTime) }; startCycle() } restartCycle = function () { if (settings.auto) { clearInterval(rotate); startCycle() } }; if (settings.pause) { $this.hover(function () { clearInterval(rotate) }, function () { restartCycle() }) } if (settings.pager || settings.manualControls) { $tabs.bind("click", function (e) { e.preventDefault(); if (!settings.pauseControls) { restartCycle() } var idx = $tabs.index(this); if (index === idx || $("." + visibleClass).queue("fx").length) { return } selectTab(idx); slideTo(idx) }).eq(0).closest("li").addClass(activeClass); if (settings.pauseControls) { $tabs.hover(function () { clearInterval(rotate) }, function () { restartCycle() }) } } if (settings.nav) { var navMarkup = "<a href='#' rel='nofollow' class='" + navClass + " rslides_prev'>" + settings.prevText + "</a><a href='#' rel='nofollow' class='" + navClass + " rslides_next'>" + settings.nextText + "</a>"; if (options.navContainer) { $(settings.navContainer).append(navMarkup) } else { $this.after(navMarkup) } var $trigger = $("." + namespaceIdx + "_nav"), $prev = $trigger.filter(".rslides_prev"); $trigger.bind("click", function (e) { e.preventDefault(); var $visibleClass = $("." + visibleClass); if ($visibleClass.queue("fx").length) { return } var idx = $slide.index($visibleClass), prevIdx = idx - 1, nextIdx = idx + 1 < length ? index + 1 : 0; slideTo($(this)[0] === $prev[0] ? prevIdx : nextIdx); if (settings.pager || settings.manualControls) { selectTab($(this)[0] === $prev[0] ? prevIdx : nextIdx) } if (!settings.pauseControls) { restartCycle() } }); if (settings.pauseControls) { $trigger.hover(function () { clearInterval(rotate) }, function () { restartCycle() }) } } } if (typeof document.body.style.maxWidth === "undefined" && options.maxwidth) { var widthSupport = function () { $this.css("width", "100%"); if ($this.width() > maxw) { $this.css("width", maxw) } }; widthSupport(); $(window).bind("resize", function () { widthSupport() }) } }) } })(jQuery, this, 0); $(function () { $("#slider").responsiveSlides({}) });$("#nav ul li").hover(function () { if ($(document).width() > 1023) { $('#nav>ul>li>ul').removeAttr('style'); $(this).addClass("on"); } }, function () { if ($(document).width() > 1023) { $(this).removeClass("on"); } });$(document).ready(function () { var html = '<i class="icon icon-plus erji"></i>'; for (i = 0; i < 10; i++) { if ($("#nav>ul>li:nth-child(" + i + ")").find("ul")[0] != null) { $("#nav>ul>li:nth-child(" + i + ")>a").after(html); $("#nav>ul>li:nth-child(" + i + ")>a").addClass("icobfe") } } }); $("body").on("click", ".icon-plus", function () { $(".erji").removeClass("icon-minus").addClass("icon-plus"); $("#nav>ul>li>ul").slideUp(); $(this).addClass("icon-minus").removeClass("icon-plus").next("ul").slideDown() }); $("body").on("click", ".icon-minus", function () { $("#nav>ul>li>ul").slideUp(); $(this).addClass("icon-plus").removeClass("icon-minus") });$(window).scroll(function () { var scrolly = $(document).scrollTop(); if ($('#menu_alert').length > 0){$('#menu_alert').remove();}if (scrolly > 50) { $("#y-nav-top").fadeIn("slow"); $("#search").addClass("guidongsearch"); $("#header-footer").addClass("guidongnav") } else { $("#y-nav-top").fadeOut("fast"); $("#search").removeClass("guidongsearch"); $("#header-footer").removeClass("guidongnav") } });$(".Ysearch,.searchclose").click(function () { searchdiv() }); function searchdiv() { $("#search").slideToggle();} $("#sousuo").click(function () { searchdiv(); if ($(document).width() < 1023) { wapnav() } }); $('.Ymem').click(function () { wapnav()}); $(".Ynav,.Ynavclose").click(function () { wapnav() }); function wapnav() { $("#nav").animate({ right: parseInt($("#nav").css("right"), 10) == 0 ? $("#nav").outerWidth() : 0 }) };$("#tab li").click(function () { $(this).addClass("tabhover").siblings().removeClass("tabhover"); var index = $("#tab").children().index(this); $("#con_one").children().eq(index).fadeIn(300).siblings().hide() }); $(".cent-xiangguan-title span").click(function () { $(this).addClass("tabhover2").siblings().removeClass("tabhover2"); var index = $(".cent-xiangguan-title").children().index(this); $(".cent-xiangguan-ul").children().eq(index).fadeIn(300).siblings().hide() });$("#divTags li a,#htagcelan li a,#rtagcelan li a").each(function () { $(this).addClass("tags" + Math.floor(Math.random() * 10)) }); $(".article-tag a").each(function () { $(this).addClass("tagac" + Math.floor(Math.random() * 10)) });$("#nav ul li a").each(function () { if ($(this).attr("href") == $(".place a:eq(1)").attr("href") || $(this).attr("href") == location.href) { $(this).parent("li").addClass("ons"); $(this).parents("li").addClass("ons") } });$('body').on('click', '.denglu', function () { addbei(); $.getJSON("/zb_users/theme/Mochu_Feiniao/function.php?type=login", {}, function (res) { $('body').append(res.html); try { if (typeof (eval(MD5)) == "function") { } } catch (e) { $.getScript( "/zb_system/script/md5.js"); }});}); $("body").on("click", "#tcaguan", function () { $("#dengdiv").remove(); rembei();});$("body").on("click", "#btnPost", function () { var strUserName = $("#edtUserName").val(); var strPassWord = $("#edtPassWord").val(); var strSaveDate = $("#savedate").val(); if ((strUserName == "") || (strPassWord == "")) { mochu_alert("用户名或密码不能为空！", 3000); return false } $("#edtUserName").val(""); $("#edtPassWord").val(""); $("form").attr("action","/zb_system/cmd.php?act=verify"); $("#username").val(strUserName); $("#password").val(MD5(strPassWord)); $("#savedate").val(strSaveDate) }); $("#chkRemember").click(function () { $("#savedate").attr("value", $("#chkRemember").attr("checked") == "checked" ? 30 : 1) });function mochu_alert(cents, time) { var mochuhtml = '<div style="z-index:9999; padding:10px; top:50%;left:50%;color:#fff;background-color:#666;position:fixed;border-radius:2px;" class="mochu-zan-js"><span style="font-size:16px;font-family:cursive;">' + cents + "</span></div>"; $("body").append(mochuhtml); var mochu_g_msg = ($(".mochu-zan-js").width() + 40) / 2 * -1; $(".mochu-zan-js").css("margin-left", mochu_g_msg); var t = time; setTimeout(function () { $(".mochu-zan-js").remove();},t)};!function (e) { e.fn.flexisel = function (t) { var n, i, l, a, o = e.extend({ visibleItems: 4, itemsToScroll: 3, animationSpeed: 400, infinite: !0, navigationTargetSelector: null, autoPlay: { enable: !1, interval: 5e3, pauseOnHover: !0 }, responsiveBreakpoints: { portrait: { changePoint: 480, visibleItems: 1, itemsToScroll: 1 }, landscape: { changePoint: 640, visibleItems: 2, itemsToScroll: 2 }, tablet: { changePoint: 768, visibleItems: 3, itemsToScroll: 3 } }, loaded: function () { }, before: function () { }, after: function () { } }, t), s = e(this), r = e.extend(o, t), c = !0, f = r.visibleItems, d = r.itemsToScroll, u = [], v = { init: function () { return this.each(function () { v.appendHTML(), v.setEventHandlers(), v.initializeItems() }) }, initializeItems: function () { var t = r.responsiveBreakpoints; for (var l in t) u.push(t[l]); u.sort(function (e, t) { return e.changePoint - t.changePoint }); var a = s.children(); n = v.getCurrentItemWidth(), i = a.length, a.width(n), s.css({ left: -n * (f + 1) }), s.fadeIn(), e(window).trigger("resize"), r.loaded.call(this, s) }, appendHTML: function () { if (s.addClass("nbs-flexisel-ul"), s.wrap("<div class='nbs-flexisel-container'><div class='nbs-flexisel-inner'></div></div>"), s.find("li").addClass("nbs-flexisel-item"), r.navigationTargetSelector && e(r.navigationTargetSelector).length > 0 ? e("<div class='nbs-flexisel-nav-left'></div><div class='nbs-flexisel-nav-right'></div>").appendTo(r.navigationTargetSelector) : (r.navigationTargetSelector = s.parent(), e("<div class='nbs-flexisel-nav-left'></div><div class='nbs-flexisel-nav-right'></div>").insertAfter(s)), r.infinite) { var t = s.children(), n = t.clone(), i = t.clone(); s.prepend(n), s.append(i) } }, setEventHandlers: function () { var t = s.children(); e(window).on("resize", function (i) { c = !1, clearTimeout(l), l = setTimeout(function () { c = !0, v.calculateDisplay(), n = v.getCurrentItemWidth(), t.width(n), r.infinite ? s.css({ left: -n * Math.floor(t.length / 2) }) : (v.clearDisabled(), e(r.navigationTargetSelector).find(".nbs-flexisel-nav-left").addClass("disabled"), s.css({ left: 0 })) }, 100) }), e(r.navigationTargetSelector).find(".nbs-flexisel-nav-left").on("click", function (e) { v.scroll(!0) }), e(r.navigationTargetSelector).find(".nbs-flexisel-nav-right").on("click", function (e) { v.scroll(!1) }), r.autoPlay.enable && (v.setAutoplayInterval(), r.autoPlay.pauseOnHover === !0 && s.on({ mouseenter: function () { c = !1 }, mouseleave: function () { c = !0 } })), s[0].addEventListener("touchstart", v.touchHandler.handleTouchStart, !1), s[0].addEventListener("touchmove", v.touchHandler.handleTouchMove, !1) }, calculateDisplay: function () { var t = e("html").width(), n = u[u.length - 1].changePoint; for (var i in u) { if (t >= n) { f = r.visibleItems, d = r.itemsToScroll; break } if (t < u[i].changePoint) { f = u[i].visibleItems, d = u[i].itemsToScroll; break } } }, scroll: function (e) { if ("undefined" == typeof e && (e = !0), 1 == c) { if (c = !1, r.before.call(this, s), n = v.getCurrentItemWidth(), r.autoPlay.enable && clearInterval(a), r.infinite) s.animate({ left: e ? "+=" + n * d : "-=" + n * d }, r.animationSpeed, function () { r.after.call(this, s), c = !0, e ? v.offsetItemsToBeginning(d) : v.offsetItemsToEnd(d), v.offsetSliderPosition(e) }); else { var t = n * d; e ? s.animate({ left: v.calculateNonInfiniteLeftScroll(t) }, r.animationSpeed, function () { r.after.call(this, s), c = !0 }) : s.animate({ left: v.calculateNonInfiniteRightScroll(t) }, r.animationSpeed, function () { r.after.call(this, s), c = !0 }) } r.autoPlay.enable && v.setAutoplayInterval() } }, touchHandler: { xDown: null, yDown: null, handleTouchStart: function (e) { this.xDown = e.touches[0].clientX, this.yDown = e.touches[0].clientY }, handleTouchMove: function (e) { if (this.xDown && this.yDown) { var t = e.touches[0].clientX, n = e.touches[0].clientY, i = this.xDown - t; this.yDown - n; Math.abs(i) > 0 && (i > 0 ? v.scroll(!1) : v.scroll(!0)), this.xDown = null, this.yDown = null, c = !0 } } }, getCurrentItemWidth: function () { return s.parent().width() / f }, offsetItemsToBeginning: function (e) { "undefined" == typeof e && (e = 1); for (var t = 0; t < e; t++)s.children().last().insertBefore(s.children().first()) }, offsetItemsToEnd: function (e) { "undefined" == typeof e && (e = 1); for (var t = 0; t < e; t++)s.children().first().insertAfter(s.children().last()) }, offsetSliderPosition: function (e) { var t = parseInt(s.css("left").replace("px", "")); e ? t -= n * d : t += n * d, s.css({ left: t }) }, getOffsetPosition: function () { return parseInt(s.css("left").replace("px", "")) }, calculateNonInfiniteLeftScroll: function (t) { return v.clearDisabled(), v.getOffsetPosition() + t >= 0 ? (e(r.navigationTargetSelector).find(".nbs-flexisel-nav-left").addClass("disabled"), 0) : v.getOffsetPosition() + t }, calculateNonInfiniteRightScroll: function (t) { v.clearDisabled(); var l = i * n - f * n; return v.getOffsetPosition() - t <= -l ? (e(r.navigationTargetSelector).find(".nbs-flexisel-nav-right").addClass("disabled"), -l) : v.getOffsetPosition() - t }, setAutoplayInterval: function () { a = setInterval(function () { c && v.scroll(!1) }, r.autoPlay.interval) }, clearDisabled: function () { var t = e(r.navigationTargetSelector); t.find(".nbs-flexisel-nav-left").removeClass("disabled"), t.find(".nbs-flexisel-nav-right").removeClass("disabled") } }; return v[t] ? v[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof t && t ? void e.error('Method "' + method + '" does not exist in flexisel plugin!') : v.init.apply(this) } }(jQuery);$("#flexisel").flexisel({visibleItems: 4,itemsToScroll: 1,autoPlay: {enable: true,interval: 5000,pauseOnHover: true}});$("#pageload").on("click", function () { var load = '<div class="pagination-loading"><i class="icon iconzhuan "></i> 数据加载中.......</div>'; $(".cent-two").append(load); page = $(this).attr("data-page"); pagetype = $(this).attr("data-type"); pageid = $(this).attr("data-id"); $.ajax({ type: "POST", url: "/zb_users/theme/Mochu_Feiniao/ajax.php", data: { "page": page, "pagetype": pagetype, "pageid": pageid }, dataType: "json", success: function (res) { $(".pagination-loading").remove(); $(".cent-two").append(res.html);$('#bar').html(res.pagehtml);if (res.page > 0) { $("#pageload").attr("data-page", res.page) } else { $("#pageload").css("display", "none") } }, error: function () { $(".pagination-loading").remove() } }) });(function ($) { $.fn.theiaStickySidebar = function (options) { var defaults = { 'containerSelector': '', 'additionalMarginTop': 0, 'additionalMarginBottom': 0, 'updateSidebarHeight': true, 'minWidth': 0, 'disableOnResponsiveLayouts': true, 'sidebarBehavior': 'modern', 'defaultPosition': 'relative', 'namespace': 'TSS' }; options = $.extend(defaults, options); options.additionalMarginTop = parseInt(options.additionalMarginTop) || 0; options.additionalMarginBottom = parseInt(options.additionalMarginBottom) || 0; tryInitOrHookIntoEvents(options, this); function tryInitOrHookIntoEvents(options, $that) { var success = tryInit(options, $that); if (!success) { console.log('TSS: Body width smaller than options.minWidth. Init is delayed.'); $(document).on('scroll.' + options.namespace, function (options, $that) { return function (evt) { var success = tryInit(options, $that); if (success) { $(this).unbind(evt) } } }(options, $that)); $(window).on('resize.' + options.namespace, function (options, $that) { return function (evt) { var success = tryInit(options, $that); if (success) { $(this).unbind(evt) } } }(options, $that)) } } function tryInit(options, $that) { if (options.initialized === true) { return true } if ($('body').width() < options.minWidth) { return false } init(options, $that); return true } function init(options, $that) { options.initialized = true; var existingStylesheet = $('#theia-sticky-sidebar-stylesheet-' + options.namespace); if (existingStylesheet.length === 0) { $('head').append($('<style id="theia-sticky-sidebar-stylesheet-' + options.namespace + '">.theiaStickySidebar:after {content: ""; display: table; clear: both;}</style>')) } $that.each(function () { var o = {}; o.sidebar = $(this); o.options = options || {}; o.container = $(o.options.containerSelector); if (o.container.length == 0) { o.container = o.sidebar.parent() } o.sidebar.parents().css('-webkit-transform', 'none'); o.sidebar.css({ 'position': o.options.defaultPosition, 'overflow': 'visible', '-webkit-box-sizing': 'border-box', '-moz-box-sizing': 'border-box', 'box-sizing': 'border-box' }); o.stickySidebar = o.sidebar.find('.theiaStickySidebar'); if (o.stickySidebar.length == 0) { var javaScriptMIMETypes = /(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i; o.sidebar.find('script').filter(function (index, script) { return script.type.length === 0 || script.type.match(javaScriptMIMETypes) }).remove(); o.stickySidebar = $('<div>').addClass('theiaStickySidebar').append(o.sidebar.children()); o.sidebar.append(o.stickySidebar) } o.marginBottom = parseInt(o.sidebar.css('margin-bottom')); o.paddingTop = parseInt(o.sidebar.css('padding-top')); o.paddingBottom = parseInt(o.sidebar.css('padding-bottom')); var collapsedTopHeight = o.stickySidebar.offset().top; var collapsedBottomHeight = o.stickySidebar.outerHeight(); o.stickySidebar.css('padding-top', 1); o.stickySidebar.css('padding-bottom', 1); collapsedTopHeight -= o.stickySidebar.offset().top; collapsedBottomHeight = o.stickySidebar.outerHeight() - collapsedBottomHeight - collapsedTopHeight; if (collapsedTopHeight == 0) { o.stickySidebar.css('padding-top', 0); o.stickySidebarPaddingTop = 0 } else { o.stickySidebarPaddingTop = 1 } if (collapsedBottomHeight == 0) { o.stickySidebar.css('padding-bottom', 0); o.stickySidebarPaddingBottom = 0 } else { o.stickySidebarPaddingBottom = 1 } o.previousScrollTop = null; o.fixedScrollTop = 0; resetSidebar(); o.onScroll = function (o) { if (!o.stickySidebar.is(":visible")) { return } if ($('body').width() < o.options.minWidth) { resetSidebar(); return } if (o.options.disableOnResponsiveLayouts) { var sidebarWidth = o.sidebar.outerWidth(o.sidebar.css('float') == 'none'); if (sidebarWidth + 50 > o.container.width()) { resetSidebar(); return } } var scrollTop = $(document).scrollTop(); var position = 'static'; if (scrollTop >= o.sidebar.offset().top + (o.paddingTop - o.options.additionalMarginTop)) { var offsetTop = o.paddingTop + options.additionalMarginTop; var offsetBottom = o.paddingBottom + o.marginBottom + options.additionalMarginBottom; var containerTop = o.sidebar.offset().top; var containerBottom = o.sidebar.offset().top + getClearedHeight(o.container); var windowOffsetTop = 0 + options.additionalMarginTop; var windowOffsetBottom; var sidebarSmallerThanWindow = (o.stickySidebar.outerHeight() + offsetTop + offsetBottom) < $(window).height(); if (sidebarSmallerThanWindow) { windowOffsetBottom = windowOffsetTop + o.stickySidebar.outerHeight() } else { windowOffsetBottom = $(window).height() - o.marginBottom - o.paddingBottom - options.additionalMarginBottom } var staticLimitTop = containerTop - scrollTop + o.paddingTop; var staticLimitBottom = containerBottom - scrollTop - o.paddingBottom - o.marginBottom; var top = o.stickySidebar.offset().top - scrollTop; var scrollTopDiff = o.previousScrollTop - scrollTop; if (o.stickySidebar.css('position') == 'fixed') { if (o.options.sidebarBehavior == 'modern') { top += scrollTopDiff } } if (o.options.sidebarBehavior == 'stick-to-top') { top = options.additionalMarginTop } if (o.options.sidebarBehavior == 'stick-to-bottom') { top = windowOffsetBottom - o.stickySidebar.outerHeight() } if (scrollTopDiff > 0) { top = Math.min(top, windowOffsetTop) } else { top = Math.max(top, windowOffsetBottom - o.stickySidebar.outerHeight()) } top = Math.max(top, staticLimitTop); top = Math.min(top, staticLimitBottom - o.stickySidebar.outerHeight()); var sidebarSameHeightAsContainer = o.container.height() == o.stickySidebar.outerHeight(); if (!sidebarSameHeightAsContainer && top == windowOffsetTop) { position = 'fixed' } else if (!sidebarSameHeightAsContainer && top == windowOffsetBottom - o.stickySidebar.outerHeight()) { position = 'fixed' } else if (scrollTop + top - o.sidebar.offset().top - o.paddingTop <= options.additionalMarginTop) { position = 'static' } else { position = 'absolute' } } if (position == 'fixed') { var scrollLeft = $(document).scrollLeft(); o.stickySidebar.css({ 'position': 'fixed', 'width': getWidthForObject(o.stickySidebar) + 'px', 'transform': 'translateY(' + top + 'px)', 'left': (o.sidebar.offset().left + parseInt(o.sidebar.css('padding-left')) - scrollLeft) + 'px', 'top': '0px' }) } else if (position == 'absolute') { var css = {}; if (o.stickySidebar.css('position') != 'absolute') { css.position = 'absolute'; css.transform = 'translateY(' + (scrollTop + top - o.sidebar.offset().top - o.stickySidebarPaddingTop - o.stickySidebarPaddingBottom) + 'px)'; css.top = '0px' } css.width = getWidthForObject(o.stickySidebar) + 'px'; css.left = ''; o.stickySidebar.css(css) } else if (position == 'static') { resetSidebar() } if (position != 'static') { if (o.options.updateSidebarHeight == true) { o.sidebar.css({ 'min-height': o.stickySidebar.outerHeight() + o.stickySidebar.offset().top - o.sidebar.offset().top + o.paddingBottom }) } } o.previousScrollTop = scrollTop }; o.onScroll(o); $(document).on('scroll.' + o.options.namespace, function (o) { return function () { o.onScroll(o) } }(o)); $(window).on('resize.' + o.options.namespace, function (o) { return function () { o.stickySidebar.css({ 'position': 'static' }); o.onScroll(o) } }(o)); if (typeof ResizeSensor !== 'undefined') { new ResizeSensor(o.stickySidebar[0], function (o) { return function () { o.onScroll(o) } }(o)) } function resetSidebar() { o.fixedScrollTop = 0; o.sidebar.css({ 'min-height': '1px' }); o.stickySidebar.css({ 'position': 'static', 'width': '', 'transform': 'none' }) } function getClearedHeight(e) { var height = e.height(); e.children().each(function () { height = Math.max(height, $(this).height()) }); return height } }) } function getWidthForObject(object) { var width; try { width = object[0].getBoundingClientRect().width } catch (err) { } if (typeof width === "undefined") { width = object.width() } return width } return this } })(jQuery);;(function($){    $.fn.share = function ($options) {        var $head = $(document.head);        var $defaults = {            url: location.href,            site_url: location.origin,            source: $head.find('[name=site], [name=Site]').attr('content') || document.title,            title: $head.find('[name=title], [name=Title]').attr('content') || document.title,            description: $head.find('[name=description], [name=Description]').attr('content') || '',            image: $('img:first').prop('src') || '',            imageSelector: undefined,            weiboKey: '',            mobileSites: [],            sites: ['weibo','qq','wechat','douban','qzone'],            disabled: [],            initialized: false        };        var $globals = $.extend({}, $defaults, $options);        var $templates = {            qzone       : 'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{URL}}&title={{TITLE}}&desc={{DESCRIPTION}}&summary={{SUMMARY}}&site={{SOURCE}}&pics={{IMAGE}}',            qq          : 'http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&title={{TITLE}}&source={{SOURCE}}&desc={{DESCRIPTION}}&pics={{IMAGE}}',            weibo       : 'https://service.weibo.com/share/share.php?url={{URL}}&title={{TITLE}}&pic={{IMAGE}}&appkey={{WEIBOKEY}}',            wechat      : 'javascript:;',            douban      : 'http://shuo.douban.com/!service/share?href={{URL}}&name={{TITLE}}&text={{DESCRIPTION}}&image={{IMAGE}}&starid=0&aid=0&style=11',        };        var $ariaLabels = {            qzone: "QQ空间",            qq: "QQ",            weibo: "微博",            wechat: "微信",            douban: "豆瓣",        };        this.each(function() {            if ($(this).data('initialized')) {                return true;            }            var $data = $.extend({}, $globals, $(this).data());            if ($data.imageSelector) {                $data.image = $($data.imageSelector).map(function() {                    return $(this).prop('src');                }).get().join('||');            }            var $container = $(this).addClass('share-component social-share');            createIcons($container, $data);            $(this).data('initialized', true);        });        function createIcons ($container, $data) {            var $sites = getSites($data);            $data.mode == 'prepend' ? $sites.reverse() : $sites;            if (!$sites.length) {return;}            $.each($sites, function (i, $name) {                var $url  = makeUrl($name, $data);                var $link = $data.initialized ? $container.find('.icon-'+$name) : $('<a class="icon social-share-icon icon-'+$name+'"></a>');                if (!$link.length) {                    return true;                }                $link.prop('aria-label', "分享到 "+$ariaLabels[$name]);                $link.prop('href', $url);                if ($name === 'wechat') {                    $link.prop('id','share_wechat');                } else {                    $link.prop('target', '_blank');                }                if (!$data.initialized) {                    $data.mode == 'prepend' ? $container.prepend($link) : $container.append($link);                }            });        }        function getSites ($data) {            if ($data['mobileSites'].length === 0 && $data['sites'].length) {                $data['mobileSites'] = $data['sites'];            };            var $sites = (isMobileScreen() ? $data['mobileSites'] : ($data['sites'].length ? $data['sites']: [])).slice(0);            var $disabled = $data['disabled'];            if (typeof $sites == 'string') { $sites = $sites.split(/\s*,\s*/); }            if (typeof $disabled == 'string') { $disabled = $disabled.split(/\s*,\s*/); }            if (runningInWeChat()) {                $disabled.push('wechat');            }            $disabled.length && $.each($disabled, function (i, el) {                var removeItemIndex = $.inArray(el, $sites);                if (removeItemIndex !== -1) {                    $sites.splice(removeItemIndex, 1);                }            });            return $sites;        }        function makeUrl ($name, $data) {            var $template = $templates[$name];            $data['summary'] = $data['description'];            for (var $key in $data) {                if ($data.hasOwnProperty($key)) {                    var $camelCaseKey = $name + $key.replace(/^[a-z]/, function($str){                        return $str.toUpperCase();                    });                    var $value = encodeURIComponent($data[$camelCaseKey] === undefined ? $data[$key] : $data[$camelCaseKey]);                    $template = $template.replace(new RegExp('{{'+$key.toUpperCase()+'}}', 'g'), $value);                }            }            return $template;        }        function runningInWeChat() {            return /MicroMessenger/i.test(navigator.userAgent);        }        function isMobileScreen () {            return $(window).width() <= 768;        }    };})(jQuery);zbp.plugin.unbind("comment.reply.start", "system-default");zbp.plugin.on("comment.reply.start", "Mochu_Feiniao", function (i) {    $("#inpRevID").val(i);    var html = $("#postcmt").html();    if (html == '') { html = $("#reply").html();}    $("#reply").remove();    $("#AjaxComment" + i).after('<dl id="reply">' + html + "</dl>");    $("#postcmt").hide(2000).html("");    $("#cancel-reply").show().bind("click", function () {        $("#inpRevID").val(0);        $("#postcmt").html(html).show(1500);        $("#reply").remove();        window.location.hash = "#comment";        return false;    });    $("#reply").show(1500);    window.location.hash = "#reply";});zbp.plugin.on("comment.post.success", "Mochu_Feiniao", function (t, e, n, o) {    $("#cancel-reply").click();});zbp.plugin.unbind("comment.post.error", "system-default");zbp.plugin.on('comment.post.error', 'Mochu_Feiniao', function (t) {    if (t.code == 53) {        $("#txaArticle").val("");        $("#slide_xbox").css('width', '40px').html("<div id='btn'>&gt;&gt;</div>");        $("#sumbitping").removeAttr("onclick").removeClass("buttons");        mochu_pinglun = false;        $("#cancel-reply").click();    }    mochu_alert(t.message, 5000);    throw new Error("ERROR - " + t.message);});if ($('.article-art').length > 0){    $('.article-art').prepend('<div class="tip tip_g"><a rel="nofollow" style="color: #FF5722 !important;" href="https://www.aliyun.com/minisite/goods?userCode=pcbd6uwb" target="_blank">阿里云服务器1折促销中，点击查看！</a></div>');    $('.article-art').prepend('<div class="tip tip_g"><a rel="nofollow" style="color: #FF5722 !important;" href="https://curl.qcloud.com/g20ZZ5X6" target="_blank">免费领取腾讯云服务器！</a></div>');}$("body").on("click",'.body_an_on', function () {    if (zbp.cookie.get('night') == '1' || $('body').hasClass('night')) {        zbp.cookie.set('night', '0'); $('body').removeClass('night');    } else { zbp.cookie.set('night', '1'); $('body').addClass('night');}an_ye();});$(function () {an_ye();});function an_ye() {    if ($('body').hasClass('night')) {        $(".body_an_on").html('<span title="开灯" class="y-nav-a" ><i class="icon iconsun"></i><br>开灯</span>');    } else {        $(".body_an_on").html('<span title="关灯" class="y-nav-a" ><i class="icon iconmoon"></i><br>关灯</span>');    }}if($("#article-text table").length > 0){    $("#article-text table").each(function(){        $(this).replaceWith("<div class='tablediv'><table>"+$(this).html()+"</table></div>");    });}$("pre").each(function () { var h = $(this).outerHeight(); var html = '<a href="javascript:;" style="margin-top:-' + h + 'px" class="coptcode" onclick="copyCnblogsCode(this)" >复制</a>'; $(this).after(html) }); function copyCnblogsCode(n) { var i = $(n).prev().first().first(); var u = i.text(); var t = document.createElement("textarea"), r; $(t).val(u); $(t).css("width", $(i).width()); r = $(i).height() * 0.8; r > 600 && (r = 600); r < 150 && (r = 150); $(t).css("height", r); $(t).css("font-family", "宋体"); $(t).css("font-size", "14px").css("border","1px solid #e5e8ed").css("padding","10px");$(t).css("line-height", "1.5"); $(i).html(t); $(t).select(); $("<div class='ctrlc'>按 Ctrl + C 复制代码</div>").insertBefore($(t)); $(n).hide() };function addbei(){$("body").append("<div id='t-bei'></div>");} function rembei(){$("#t-bei").remove();}$("body").on("click", "#kdashang",function(){$('body').append(foothtml2);addbei();$("#dashang").fadeIn("slow");});$("body").on("click", "#tca",function(){$("#dashang").fadeOut("fast");rembei();});$("body").on("click", "#ksaomiao", function () { $('body').append(foothtml1);addbei(); $("#sanmiao").fadeIn("slow"); }); $("body").on("click", "#saoguan", function () { $("#sanmiao").fadeOut("fast"); rembei(); });$("body").on("click", ".ds-payment-way", function () { $(".qrcode-img").hide(); $(".qrCode_" + $(".ds-payment-way").find("input[name=reward-way]:checked").val()).show() });$("body").on("click", "#kfeixiang", function () {$('body').append(foothtml3);addbei(); $("#fenxiang").fadeIn("slow");$('.share-component,.social-share').share();});$("body").on("click", "#fenguan", function () { $("#fenxiang").fadeOut("fast"); rembei(); }); $('body').on('click', '.mochu-zan', function () { var $postid = $(this).attr("data-postid"); if ($postid < 1) { mochu_alert("不要捣乱 ^(oo)^", 2000); return false } $.post('/zb_users/theme/Mochu_Feiniao/function.php?type=zan', { 'id': $postid, }, function (data) { var s = data; if (s == 'no') { mochu_alert("你已经点过赞啦 (¯^¯ )", 2000) } else { $(".mochu-zan").html("<i class='icon iconzan'></i>" + s + "人赞"); mochu_alert("你已成功点赞 ^_^", 2000) } }) });$("body").on("blur", "#inpQQ", function () { mochu_alert("正在获取QQ资料...", 1000); $.getJSON("/zb_users/theme/Mochu_Feiniao/function.php?type=inputqq&qq=" + $("#inpQQ").val(), function (q) { if (q.name) { mochu_alert("QQ资料获取成功...", 1000); $("#inpName").val(q.name); $("#inpEmail").val($("#inpQQ").val() + "@qq.com"); $("#inpQQ").attr("disabled", "disabled") } else { mochu_alert("获取资料失败！", 2000) } }) });var mochu_pinglun = false;$("#sumbitping").click(function () { if (mochu_pinglun == false) { mochu_alert("请解开封印后再提交 (∩＿∩)", 2000); return false; } });$(".zitidaxiao").click(function () { var s = $(this).text(); var f = parseInt($(".article-text").css("font-size")); if (s == '-') { if (f > 14) { $(".article-text").css("font-size", f - 1); for (i = 2; i < 5; i++) { $(".article-text h" + i).css({ "font-size": parseInt($(".article-text h" + i).css("font-size")) - 1, "line-height": (parseInt($(".article-text h" + i).css("font-size")) - 1) + "px" }) } } } if (s == 'N') { $(".article-text").css("font-size", 15); $(".article-text h2").css({ "font-size": "20px", "line-height": "20px" }); $(".article-text h3").css({ "font-size": "18px", "line-height": "18px" }); $(".article-text h4").css({ "font-size": "15px", "line-height": "15px" }) } if (s == '+') { $(".article-text").css("font-size", f + 1); for (i = 2; i < 5; i++) { $(".article-text h" + i).css({ "font-size": parseInt($(".article-text h" + i).css("font-size")) + 1, "line-height": (parseInt($(".article-text h" + i).css("font-size")) + 1) + "px" }) } } });slide();function slide() { var slideBox = $('body #slide_box')[0]; if (!slideBox) { return false; } var btn = $('body #btn')[0]; var slideBoxWidth = slideBox.offsetWidth; var btnWidth = btn.offsetWidth; $('body').on('mousedown', '#btn', function (e) { var disX = e.clientX - btn.offsetLeft; $(document).mousemove(function (e) { var objX = e.clientX - disX + btnWidth; if (objX < btnWidth) { objX = btnWidth } if (objX > slideBoxWidth) { objX = slideBoxWidth } $('body #slide_xbox').width(objX + 'px') }); $(document).mouseup(function (e) { var objX = e.clientX - disX + btnWidth; if (objX < slideBoxWidth) { objX = btnWidth } else { objX = slideBoxWidth; $('body #slide_xbox').html('封印已解<div class="btn">&radic;</div>'); mochu_pinglun = true; $("body #sumbitping").attr("onclick", "return zbp.comment.post()").addClass("buttons") } $('body #slide_xbox').width(objX + 'px'); $(document).off('mousemove'); $(document).off('mouseup') }) }); var startX = 0; var sX = 0; var moveX = 0; var leftX = 0; $("body").on("touchstart", "#btn", function (e) { startX = e.originalEvent.touches[0].pageX; sX = $(this).offset().left; leftX = startX - sX }); $("body").on("touchmove", "#btn", function (e) { e.preventDefault(); moveX = e.originalEvent.touches[0].pageX; var objX = moveX - leftX + btnWidth; if (objX < btnWidth) { objX = btnWidth } if (objX > slideBoxWidth) { objX = slideBoxWidth } $('body #slide_xbox').width(objX + 'px') }); $("body").on("touchend", "#btn", function (e) { var objX = moveX - leftX + btnWidth; if (objX < slideBoxWidth) { objX = btnWidth } else { objX = slideBoxWidth; $('body #slide_xbox').html('封印已解<div class="btn">&radic;</div>'); mochu_pinglun = true; $("body #sumbitping").attr("onclick", "return zbp.comment.post()").addClass("buttons") } $('body #slide_xbox').width(objX + 'px') }) }$("body").on('click', '#y-nav-close', function () { $(".y-nav").fadeOut("fast"); mochu_alert("关闭后，将在 120 秒后出现!", 3000); zbp.cookie.set("Mochu_Feniao", "1",0.0014);});$("body").on('click', '#y-nav-top', function () { $('body,html').animate({ scrollTop: 0 }, 1000); });var CeNavHTML='<div class="y-nav"><ul><li class="body_an_on"><span title="关灯" class="y-nav-a" ><i class="icon iconmoon"></i><br>关灯</span></li><li><a title="留言" class="y-nav-a" rel="nofollow" target="_blank" href="//www.feiniaomy.com/liuyan.html"><i class="icon iconedit"></i><br>留言</a></li><li ><a title="QQ联系我" class="y-nav-a" rel="external nofollow" target="_blank" href="//wpa.qq.com/msgrd?v=3&uin=540344537&site=qq&menu=yes"><i class="icon iconqq"></i><br>QQ</a></li><li style="position:relative;" id="ynavweixin"><span title="微信联系"  class="y-nav-a"><i class="icon iconweixin"></i><br>微信</span><div class="y-nav-weixin"><img src="//oss.feiniaomy.com/weixin.png" title="微信二维码" alt="微信二维码"></div></li><li id="y-nav-top"><span title="返回顶部" class="y-nav-a"><i class="icon iconup"></i><br>返顶</span></li><li id="y-nav-close"><span title="关闭" class="y-nav-a"><i class="icon iconclose"></i><br>关闭</span></li></ul></div>';if(zbp.cookie.get('Mochu_Feniao') == null){ $('body').append(CeNavHTML);}        if ($(".article-zhong").length){            var artrcleHTML='<span  id="kfeixiang" ><i class="icon iconfen"></i>分享</span><span  class="zshang" id="ksaomiao" ><i class="icon iconerwei"></i>二维码</span><span  id="kdashang" ><i class="icon iconcard"></i>打赏</span>';            var aid = $(".article-zhong").attr("data-id");            var azan = $(".article-zhong").attr("data-zan");            var html = '<span  class="mochu-zan"  data-postid="'+aid+'" data-value="1"><i class="icon iconzan"></i>'+azan+'人赞</span>';            $(".article-zhong").html(html + artrcleHTML);                  }    foothtml1 = '<div class="t-opo" id="sanmiao"><span  id="saoguan"><i class="icon iconclose"></i></span><div class="t-opo-title"><i class="icon iconerweis"></i>移步手机端</div><div class="t-opo-content"><div class="sao-lf lf"><img src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&amp;data='+window.location.href+'" alt="文章手机二维码" title="文章手机二维码"></div><div class="sao-lr"><i class="icon icontvs"></i><i class="icon iconrights"></i><i class="icon iconmobiles"></i><hr class="sao-hr">1、打开你手机的二维码扫描APP<br>2、扫描左则的二维码<br>3、点击扫描获得的网址<br>4、可以在手机端阅读此文章</div></div></div>';    foothtml2 = '<div class="t-opo" id="dashang"><span id="tca"><i class="icon iconclose"></i></span><div class="t-opo-title"><i class="icon iconcards"></i>选择打赏方式</div><div class="t-opo-content"><div class="ds-payment-way"><label for="wechat"><input type="radio" id="wechat" class="reward-radio" value="0" checked="checked" name="reward-way">微信</label><label for="qqqb"><input type="radio" id="qqqb" class="reward-radio" value="1" name="reward-way">QQ钱包</label><label for="alipay"><input type="radio" id="alipay" class="reward-radio" value="2" name="reward-way">支付宝</label></div><div class="ds-payment-img"> <div class="qrcode-img qrCode_0" id="qrCode_0" style="display: block;"><div class="qrcode-border box-size" style="border: 9.02px solid rgb(60, 175, 54"><img class="qrcode-img qrCode_0" id="qrCode_0" src="//oss.feiniaomy.com/zan/zanwei.png" alt="微信赞助" style="display: inline;"></div><p class="qrcode-tip">打赏</p></div><div class="qrcode-img qrCode_1" id="qrCode_1" style="display: none;"><div class="qrcode-border box-size" style="border: 9.02px solid rgb(102, 153, 204"><img class="qrcode-img qrCode_1" id="qrCode_1" src="//oss.feiniaomy.com/zan/zanqq.png" alt="QQ钱包" style="display: none;"></div><p class="qrcode-tip">打赏</p> </div><div class="qrcode-img qrCode_2" id="qrCode_2" style="display: none;"><div class="qrcode-border box-size" style="border: 9.02px solid rgb(235, 95, 1"><img class="qrcode-img qrCode_2" id="qrCode_2" src="//oss.feiniaomy.com/zan/zanzhi.png" alt="支付宝赞助" style="display: none;"></div><p class="qrcode-tip">打赏</p></div></div></div></div>';    foothtml3 = '<div class="t-opo" id="fenxiang"><span id="fenguan"><i class="icon iconclose"></i></span><div class="t-opo-title"><i class="icon iconfeis"></i>选择分享方式</div><div class="t-opo-content"><div class="social-share" data-sites="weibo,qq,wechat,qzone,douban"></div></div></div> ';var alert_html = '<div id="menu_alert"><a href="https://www.aliyun.com/minisite/goods?userCode=pcbd6uwb" target="_blank">阿里云服务器</a><a href="https://cloud.tencent.com/act/cps/redirect?redirect=1052&cps_key=8485d1d1a55a4c81d56258f864107709&from=console" target="_blank">腾讯云服务器</a><a href="https://www.bt.cn/?invite_code=MV95dnh0Y3o=" target="_blank">宝塔管理面板</a><a href="https://www.316la.com/post/14.html" target="_blank">本博客主题购买</a></div>';$(function () {  $('#article-text p').contextmenu(function(e) { $('#menu_alert').remove(); a_count = alert_html.split('href').length - 1;  if(a_count > 0){  var e = e || window.event;  var oX = e.clientX;  var wox = $(window).width() - 150;oX = oX > wox ? oX - 150 : oX; var oY = e.clientY; var woy = $(window).height() - (a_count * 45);  oY = oY > woy ? oY - (a_count * 45) : oY;  $('body').append(alert_html); $('#menu_alert').css({ 'left': oX + 'px', 'top': oY + 'px' }); return false; } }); });$(document).on('click',function(e){ var e = e || window.event; $('#menu_alert').remove(); });$('body').on('click','#share_wechat',function(){        $('#fenxiang').css('display','none');        $('#sanmiao').css('display','block');    });