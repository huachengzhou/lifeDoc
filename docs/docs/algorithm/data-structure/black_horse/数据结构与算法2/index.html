<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.83.1" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="一. 基础算法
#

1. 常见查找算法
#

查找算法是一种在数据集中寻找特定数据项的方法。通常，数据集是在计算机程序中存储的，例如数组、链表或散列表。在编写程序时，查找算法是非常重要的，它有助于快速找到所需的数据。在本文中，我们将介绍一些基本的查找算法及其特点。
线性查找
#

线性查找也称为顺序查找，是一种最简单的查找算法。在这种算法中，我们从数据集的开头开始，逐个比较每个数据项，以寻找要查找的数据。如果我们找到了目标数据，查找过程就结束了。如果我们到达数据集的末尾，仍然找不到目标数据，则可以认为它不存在于数据集中。
线性查找的时间复杂度是O(n)，其中n是数据集的大小。因此，它在大型数据集中可能会很慢。然而，在小型数据集中，它仍然是一种非常有用的算法。
二分查找
#

二分查找也称为折半查找，是一种更快速的查找算法。但前提是，数据集必须已经排序。在二分查找中，我们取数据集的中间值，然后将目标与中间值进行比较。如果目标小于中间值，则在左侧子集中继续查找；如果目标大于中间值，则在右侧子集中继续查找。每次比较都会缩小要搜索的数据集的大小。
二分查找的时间复杂度是O(log n)，其中n是数据集的大小。这种算法在大型数据集中非常有效，但在小型数据集中可能并不是最快的选择。
哈希表查找
#

哈希表查找也称为散列表查找，是另一种常见的查找算法。它利用哈希函数将数据项映射到散列表中的位置。在查找过程中，我们只需通过哈希函数计算目标数据的位置，然后检查该位置是否包含目标数据。
哈希表查找的时间复杂度是O(1)。这使得它成为大型数据集中最快的查找算法之一。但是，哈希表查找的效率取决于哈希函数的质量。如果两个数据项映射到相同的位置，就会发生哈希冲突，这可能会导致性能下降。
小结
#

在编写程序时，我们需要选择适合数据集大小和其他要求的最佳查找算法。例如，如果数据集很小，则线性查找可能是最快的选择；如果数据集已经排序，则二分查找是非常有用的。然而，在大型数据集中，哈希表查找通常是最好的选择。了解不同类型的查找算法及其特点可以帮助我们在编写程序时做出明智的选择。
2. 高效查找相关数据结构
#

不管是之前学过的数组、链表、队列、还是栈，这些线性结构中，如果想在其中查找一个元素，效率是比较慢的，只有$O(N)$，因此如果你的需求是实现数据的快速查找，那么就需要新的数据结构支持。
还记得最先介绍的那个二分查找算法吗？它的查找效率能够达到 $O(\log{N})$，是不是还不错？不过呢，它需要对数组事先排好序，而排序的成本是比较高的。那么有没有一个折中的办法呢？有，那就是接下来要给大家介绍的二叉搜索树，它插入元素后，自然就是排好序的，接下来的查询也自然而然可以应用二分查找算法进行高效搜索。
1) 二叉搜索树
#

历史
#

 二叉搜索树最早是由Bernoulli兄弟在18世纪中提出的，但是真正推广和应用该数据结构的是1960年代的D.L. Gries。他的著作《The Science of Programming》中详细介绍了二叉搜索树的实现和应用。
在计算机科学的发展中，二叉搜索树成为了一种非常基础的数据结构，被广泛应用在各种领域，包括搜索、排序、数据库索引等。随着计算机算力的提升和对数据结构的深入研究，二叉搜索树也不断被优化和扩展，例如AVL树、红黑树等。
 特性
#

二叉搜索树（也称二叉排序树）是符合下面特征的二叉树：
 树节点增加 key 属性，用来比较谁大谁小，key 不可以重复 对于任意一个树节点，它的 key 比左子树的 key 都大，同时也比右子树的 key 都小，例如下图所示  轻易看出要查找 7 （从根开始）自然就可应用二分查找算法，只需三次比较">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="基础算法" />
<meta property="og:description" content="一. 基础算法
#

1. 常见查找算法
#

查找算法是一种在数据集中寻找特定数据项的方法。通常，数据集是在计算机程序中存储的，例如数组、链表或散列表。在编写程序时，查找算法是非常重要的，它有助于快速找到所需的数据。在本文中，我们将介绍一些基本的查找算法及其特点。
线性查找
#

线性查找也称为顺序查找，是一种最简单的查找算法。在这种算法中，我们从数据集的开头开始，逐个比较每个数据项，以寻找要查找的数据。如果我们找到了目标数据，查找过程就结束了。如果我们到达数据集的末尾，仍然找不到目标数据，则可以认为它不存在于数据集中。
线性查找的时间复杂度是O(n)，其中n是数据集的大小。因此，它在大型数据集中可能会很慢。然而，在小型数据集中，它仍然是一种非常有用的算法。
二分查找
#

二分查找也称为折半查找，是一种更快速的查找算法。但前提是，数据集必须已经排序。在二分查找中，我们取数据集的中间值，然后将目标与中间值进行比较。如果目标小于中间值，则在左侧子集中继续查找；如果目标大于中间值，则在右侧子集中继续查找。每次比较都会缩小要搜索的数据集的大小。
二分查找的时间复杂度是O(log n)，其中n是数据集的大小。这种算法在大型数据集中非常有效，但在小型数据集中可能并不是最快的选择。
哈希表查找
#

哈希表查找也称为散列表查找，是另一种常见的查找算法。它利用哈希函数将数据项映射到散列表中的位置。在查找过程中，我们只需通过哈希函数计算目标数据的位置，然后检查该位置是否包含目标数据。
哈希表查找的时间复杂度是O(1)。这使得它成为大型数据集中最快的查找算法之一。但是，哈希表查找的效率取决于哈希函数的质量。如果两个数据项映射到相同的位置，就会发生哈希冲突，这可能会导致性能下降。
小结
#

在编写程序时，我们需要选择适合数据集大小和其他要求的最佳查找算法。例如，如果数据集很小，则线性查找可能是最快的选择；如果数据集已经排序，则二分查找是非常有用的。然而，在大型数据集中，哈希表查找通常是最好的选择。了解不同类型的查找算法及其特点可以帮助我们在编写程序时做出明智的选择。
2. 高效查找相关数据结构
#

不管是之前学过的数组、链表、队列、还是栈，这些线性结构中，如果想在其中查找一个元素，效率是比较慢的，只有$O(N)$，因此如果你的需求是实现数据的快速查找，那么就需要新的数据结构支持。
还记得最先介绍的那个二分查找算法吗？它的查找效率能够达到 $O(\log{N})$，是不是还不错？不过呢，它需要对数组事先排好序，而排序的成本是比较高的。那么有没有一个折中的办法呢？有，那就是接下来要给大家介绍的二叉搜索树，它插入元素后，自然就是排好序的，接下来的查询也自然而然可以应用二分查找算法进行高效搜索。
1) 二叉搜索树
#

历史
#

 二叉搜索树最早是由Bernoulli兄弟在18世纪中提出的，但是真正推广和应用该数据结构的是1960年代的D.L. Gries。他的著作《The Science of Programming》中详细介绍了二叉搜索树的实现和应用。
在计算机科学的发展中，二叉搜索树成为了一种非常基础的数据结构，被广泛应用在各种领域，包括搜索、排序、数据库索引等。随着计算机算力的提升和对数据结构的深入研究，二叉搜索树也不断被优化和扩展，例如AVL树、红黑树等。
 特性
#

二叉搜索树（也称二叉排序树）是符合下面特征的二叉树：
 树节点增加 key 属性，用来比较谁大谁小，key 不可以重复 对于任意一个树节点，它的 key 比左子树的 key 都大，同时也比右子树的 key 都小，例如下图所示  轻易看出要查找 7 （从根开始）自然就可应用二分查找算法，只需三次比较" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://huachengzhou.github.io/life/docs/algorithm/data-structure/black_horse/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%952/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2023-01-17T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2023-01-17T00:00:00&#43;00:00" />

<title>基础算法 | 所悟所想</title>
<link rel="manifest" href="./../../../../../manifest.json">
<link rel="icon" href="./../../../../../favicon.png" type="image/x-icon">
<link rel="stylesheet" href="./../../../../../book.min.2287b6f2871d6b78ee0a49069a42487d840f883445869f9883981ad861ebdaaa.css"  >
<script defer src="./../../../../../en.search.min.81835e7c5430b9ad888dedb0bbce3d9956696f164a9989929104d33f15a9d5f2.js"  ></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  

<script defer src="./../../../../../crypto-js/core.js"></script>
<script defer src="./../../../../../crypto-js/enc-base64.js"></script>
<script defer src="./../../../../../crypto-js/cipher-core.js"></script>
<script defer src="./../../../../../crypto-js/aes.js"></script>
<script defer src="./../../../../../crypto-js/enc-utf16.js"></script>
<script defer src="./../../../../../crypto-js/evpkdf.js"></script>
<script defer src="./../../../../../crypto-js/format-hex.js"></script>
<script defer src="./../../../../../crypto-js/hmac.js"></script>
<script defer src="./../../../../../crypto-js/lib-typedarrays.js"></script>
<script defer src="./../../../../../crypto-js/mode-cfb.js"></script>
<script defer src="./../../../../../crypto-js/pbkdf2.js"></script>
<script defer src="./../../../../../crypto-js/md5.js"></script>
<script defer src="./../../../../../crypto-js/mode-ecb.js"></script>
<script defer src="./../../../../../crypto-js/rabbit.js"></script>
<script defer src="./../../../../../crypto-js/rabbit-legacy.js"></script>
<script defer src="./../../../../../crypto-js/sha256.js"></script>








<script defer src="./../../../../../common-js/jquery-1.9.1.js"></script>

<script defer src="./../../../../../common-js/data.js"></script>
<script defer src="./../../../../../common-js/aesTool.js"></script>
<script defer src="./../../../../../common-js/myInfo.js"></script>


<link  href="./../../../../../layui/css/layui.css" rel="stylesheet" type="text/css">
<link  href="./../../../../../font-awesome-4.7.0/css/font-awesome.css" rel="stylesheet" type="text/css">
<script defer src="./../../../../../layui/layui.js"></script>

</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="./../../../../../"><span>所悟所想</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-dc4b37c6c16a6986655cb8a0614c536b" class="toggle"  />
    <label for="section-dc4b37c6c16a6986655cb8a0614c536b" class="flex justify-between">
      <a href="./../../../../../docs/computer_network/" class="">计算机网络 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/" class="">网络体系结构</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/1.1.1%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A6%82%E5%BF%B5-%E7%BB%84%E6%88%90-%E5%8A%9F%E8%83%BD-%E5%88%86%E7%B1%BB/" class="">计算机概念 组成 功能 分类 * </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/1.1.2%E6%A0%87%E5%87%86%E5%8C%96%E5%B7%A5%E4%BD%9C%E5%8F%8A%E7%9B%B8%E5%85%B3%E7%BB%84%E7%BB%87/" class="">标准的分类</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/1.1.3%E9%80%9F%E7%8E%87%E7%9B%B8%E5%85%B3%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/" class="">速率</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84/" class="">分层结构</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/%E5%88%86%E5%B1%82%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B/" class="">分层参考模型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/%E6%A8%A1%E5%9E%8B%E5%B1%82%E6%AC%A1%E8%AF%A6%E8%A7%A3/" class="">模型层次详解</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/physical_layer/" class="">物理层 </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/physical_layer/%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="">数据通信基础知识 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/physical_layer/%E7%89%A9%E7%90%86%E5%B1%82%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" class="">物理层基本概念 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>数据链路层 </span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>网络层 </span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>传输层 </span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>应用层 </span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-520770a3f5ea08f8358bcf92838812da" class="toggle"  />
    <label for="section-520770a3f5ea08f8358bcf92838812da" class="flex justify-between">
      <a href="./../../../../../docs/c-plus/" class=""> c&#43;&#43;</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6fc49ad6722ad822609d4f02b81f6358" class="toggle"  />
    <label for="section-6fc49ad6722ad822609d4f02b81f6358" class="flex justify-between">
      <a href="./../../../../../docs/databases/" class=""> 数据库</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/" class="">mysql学习笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_basis/" class="">基本命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_data/" class="">数据准备</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_distinguish/" class="">MySQL分库分表原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_install/" class="">mysql安装</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_install_more/" class="">Win10一台电脑安装多个版本的Mysql</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_install_problem/" class="">windows下 Mysql安装的一些问题解决方法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_install_centos/" class="">centos7安装多个mysql</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%89%E8%8C%83%E5%BC%8F/" class="">mysql_数据库设计三范式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E4%BA%8B%E5%8A%A1/" class="">mysql事务</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E5%87%BD%E6%95%B0/" class="">mysql函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" class="">mysql存储引擎</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_procedure/" class="">mysql存储过程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_procedure_function/" class="">mysql存储函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_operation_maintenance/" class="">mysql运维</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" class="">数据库设计的规范</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E6%9F%A5%E8%AF%A2/" class="">mysql查询</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_regexp/" class="">mysql正则表达式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9D%83%E9%99%90/" class="">mysql用户与权限</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E7%B4%A2%E5%BC%95/" class="">mysql索引</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E6%95%B4%E7%90%86/" class="">mysql整理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysq_advanced_optimization/" class="">mysql优化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_select/" class="">mysql新查询</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_view/" class="">mysql视图</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/triggers/" class="">mysql触发器</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/postgresql/" class="">postgresql学习笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/postgresql/postgresql_create%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9D%83%E9%99%90/" class="">权限</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/" class="">网易云课堂MySQL微专业学习笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter1/" class="">MySQL数据库基础</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter2/" class="">MySQL数据库对象与应用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter3/" class="">MySQL事务与存储引擎</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter4/" class="">MySQL应用优化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter5/" class="">MySQL运维实践</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/oracle/" class="">oracle</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/sqlserver/create_table/" class="">sqlserver</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-dbec22d72f9c0b4ccf9d173e77fe928c" class="toggle"  />
    <label for="section-dbec22d72f9c0b4ccf9d173e77fe928c" class="flex justify-between">
      <a href="./../../../../../docs/python/" class=""> python</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-1eba4d3394916870dc9a66fd50843417" class="toggle"  />
    <label for="section-1eba4d3394916870dc9a66fd50843417" class="flex justify-between">
      <a href="./../../../../../docs/python/base/" class="">python 基础学习</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/remark/" class="">python 说明</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/pip/" class="">python pip</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/lambda_or_function/" class="">python 函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/set/" class="">python set</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/module/" class="">python 模块介绍</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/venv/" class="">python 环境变量</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/dictionary/" class="">python 字典</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/casting/" class="">python 类型转换</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/print/" class="">python print</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/tuple/" class="">python 元组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/string/" class="">python string</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/pipenv/" class="">python pipenv 包管理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python-object/" class="">python 面向对象</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/pathlib/" class="">python pathlib</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/file/" class="">python 文件</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/list/" class="">python list</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_datetime/" class="">python datetime</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_try_except/" class="">Python Try Except</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_regex/" class="">Python RegEx</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_json/" class="">Python JSON</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_string_formatting/" class="">Python 字符串格式化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_cmd_input/" class="">Python 命令行输入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/math/" class="">python math</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/annotation/" class="">Python 注解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/container/" class="">Python 容器问题</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5edfb103a0f74ef3d489bca94178c238" class="toggle"  />
    <label for="section-5edfb103a0f74ef3d489bca94178c238" class="flex justify-between">
      <a href="./../../../../../docs/python/install/" class="">python 插件学习</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyinstaller/" class="">python pyinstaller </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyecharts/" class="">python pyecharts  </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/numpy/" class="">python NumPy  </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyqt5/" class="">python pyqt5</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyqt5_note/" class="">python pyqt5 介绍</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyqt_layout/" class="">python pyqt5 layout</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyqt_resources/" class="">python pyqt5 皮肤和图标</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/python_ml_getting_started/" class="">python 机器学习  </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-426c24f586a1a31f40b6adbe7793c4e5" class="toggle"  />
    <label for="section-426c24f586a1a31f40b6adbe7793c4e5" class="flex justify-between">
      <a href="./../../../../../docs/math/" class="">数学</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/math/katex/" class="">KaTeX 使用指南</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-353f7a5578fa41dbc42c73ea30fe2255" class="toggle" checked />
    <label for="section-353f7a5578fa41dbc42c73ea30fe2255" class="flex justify-between">
      <a href="./../../../../../docs/algorithm/" class="">数据结构与算法</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-1ab1b97ced25a55e9af530a2afbb2e98" class="toggle"  />
    <label for="section-1ab1b97ced25a55e9af530a2afbb2e98" class="flex justify-between">
      <a href="./../../../../../docs/algorithm/alg-sort/" class="">常见排序算法知识体系</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/" class="">数据结构</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/array/" class="">数组</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="">数据结构(简单文字描述)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/linklist/" class="">链表</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/tree/" class="">树</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/stack/" class="">栈</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/queue/" class="">队列</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/heap/" class="">堆(优化队列)</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/hashtable/" class="">哈希</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/graph/" class="">图</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/adt/" class="">ADT</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/black_horse/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%951/" class="">初识算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/black_horse/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%952/" class=" active">基础算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/black_horse/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%953/" class="">进阶 - 算法设计</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-45dc11ee6178b60df0469def110149c5" class="toggle"  />
    <label for="section-45dc11ee6178b60df0469def110149c5" class="flex justify-between">
      <a href="./../../../../../docs/hugo%E5%AD%A6%E4%B9%A0/" class="">hugo教程</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/hugo%E5%AD%A6%E4%B9%A0/hugo_server_faile_-to_get_json/" class="">hugo教程 hugo server Failed to get JSON</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/hugo%E5%AD%A6%E4%B9%A0/hugo_tutorials1/" class="">hugo教程1</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/hugo%E5%AD%A6%E4%B9%A0/hugo_tutorials2/" class="">hugo教程2</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-63b4fdb949c68d1e40afa99db9f2025c" class="toggle"  />
    <label for="section-63b4fdb949c68d1e40afa99db9f2025c" class="flex justify-between">
      <a href="./../../../../../docs/javadir/" class=""> Java技术栈</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f59b4d30ba46bb091d0f0aa7c3266e10" class="toggle"  />
    <label for="section-f59b4d30ba46bb091d0f0aa7c3266e10" class="flex justify-between">
      <a href="./../../../../../docs/javadir/basedir/" class="">Java基础知识 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c62fda4779509a2bf52b7c12feccca28" class="toggle"  />
    <label for="section-c62fda4779509a2bf52b7c12feccca28" class="flex justify-between">
      <a href="./../../../../../docs/javadir/basedir/io/" class="">Java IO</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/io/java-basic-io-nio/" class="">nio</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ba9f37c30cbddfdede23d767e7034c30" class="toggle"  />
    <label for="section-ba9f37c30cbddfdede23d767e7034c30" class="flex justify-between">
      <a href="./../../../../../docs/javadir/basedir/jsp_dir/" class="">jsp 基础知识 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/java_%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6%E5%8E%9F%E7%90%86/" class="">java_监听事件原理 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/jsp_el%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" class="">EL基础教程 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/jsp_jstl_core%E6%A0%87%E7%AD%BE%E5%BA%93/" class="">jsp jstl core 标签库 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/jsp_jstl_session/" class="">jsp jstl session </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/jsp_%E5%AD%97%E7%AC%A6%E4%B8%B2el%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="">字符串el表达式 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/dw7668daxw/" class="">java类型转换,构造,重要语法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-exception/" class="">异常机制详解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-reflection/" class="">反射机制详解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-annotation/" class="">注解机制详解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-generic/" class="">泛型机制详解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-jdk8-stream/" class="">Java8 流式数据处理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-jdk8-stream_base/" class="">Java8 流式数据处理 短介绍</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-spi/" class="">Java SPI机制详解</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e4f99824d06ea4abb1161f3046570d7f" class="toggle"  />
    <label for="section-e4f99824d06ea4abb1161f3046570d7f" class="flex justify-between">
      <a href="./../../../../../docs/javadir/thread/" class="">多线程与并发 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/glossary/" class="">名词解释</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/essential_glossary/" class="">关键名词解释</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/cas/" class="">cas</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a04d0f5c62b5bf3efb9caef3d57e52c6" class="toggle"  />
    <label for="section-a04d0f5c62b5bf3efb9caef3d57e52c6" class="flex justify-between">
      <a href="./../../../../../docs/javadir/thread/tool/" class="">并发工具 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/thread_local/" class="">ThreadLocal</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/semaphore_exchanger/" class="">Semaphore和Exchanger</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/countdownlatch_cyclicbarrier/" class="">CountDownLatch 和 CyclicBarrier</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/phaser/" class="">Phaser</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/executor/" class="">Executor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/future_callable/" class="">Future 和 callable</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/completionservice/" class="">CompletionService</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/executorservice/" class="">ExecutorService</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/fork_join/" class="">Fork-Join</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/collection/" class="">并发集合框架</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/jol/" class="">JOL工具 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/unsafe/" class="">unsafe</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/reentrantlock/" class="">ReentrantLock</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/repeat_lock/" class="">java重复加锁</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/park/" class="">park</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/practice/" class="">线程最佳实践</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d2bb26ee293a9741ecef2fb6f7d20b43" class="toggle"  />
    <label for="section-d2bb26ee293a9741ecef2fb6f7d20b43" class="flex justify-between">
      <a href="./../../../../../docs/javadir/groovy/" class="">groovy 学习与使用 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E5%AD%A6%E4%B9%A0/" class=""> Groovy 概述 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" class="">groovy 基本概念 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="">groovy 数据类型 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E5%8F%98%E9%87%8F%E5%92%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8A%A0%E5%BC%BA/" class=""> groovy变量和数据类型 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/%E5%A6%82%E4%BD%95%E5%9C%A8groovy%E4%B8%AD%E8%8E%B7%E5%8F%96%E4%BB%A5%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D%E7%9A%84%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC/" class=""> groovy变量值获取 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E4%B8%AD%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%AF%94%E8%BE%83%E4%BB%A5%E5%8F%8A%E9%9D%9E%E7%A9%BA%E5%88%A4%E6%96%AD/" class=""> groovy对象比较以及空判断 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/" class=""> groovy使用场景 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E5%8F%98%E9%87%8F/" class="">Groovy变量</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3c751f376602d063da318fd2ace31d1e" class="toggle"  />
    <label for="section-3c751f376602d063da318fd2ace31d1e" class="flex justify-between">
      <a href="./../../../../../docs/javadir/tooldoc/" class="">Java公共库文档总结 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/apache-common%E5%B7%A5%E5%85%B7%E5%8C%85/" class="">Apache Commons 工具类介绍及简单使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/aspose/" class="">Aspose</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/commons_io/" class="">apache FilenameUtils 文件名称操作</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/dom4j/" class="">dom4j</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/guava-common/" class="">Guava 基于java1.6的类库集合的扩展项目</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/js_console%E7%94%A8%E6%B3%95/" class="">常用 Console 调试命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/jsoup/" class="">jsoup学习文档</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/spring%E5%B7%A5%E5%85%B7/" class="">spring工具类</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/spring%E5%B8%B8%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%E7%B1%BB/" class="">spring常用的工具类</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/" class="">中间件 </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/redis/" class="">Redis 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/nginx/" class="">Nginx 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/testng/" class="">testng 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/mycat/" class="">mycat 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/uml/" class="">uml 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/" class="">solr</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/adminui/" class="">AdminUI 简单使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/config/" class="">基本配置</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/javaapi/" class="">Java API SolrJ 的使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/core/" class="">创建索引和字段</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/include_document/" class="">内嵌文档</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/" class="">rabbit-mq</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/simple_default_exchange/" class="">Hello-world</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/work-queues/" class="">work-queues</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/publish-subscribe/" class="">Publish/Subscribe</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/rounting/" class="">Routing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/ask/" class="">ask</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/" class="">Elasticsearch</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/ik/" class="">ik分词器(analysis)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/elasticsearch-cluster/" class="">(集群)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/elasticsearch_principle/" class="">elasticsearch 原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/lucene-data/" class="">lucene数据存储</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/elasticsearch_architecture/" class="">ElasticSearch进阶篇集群&#43;原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/elasticsearch-api/" class="">ElasticSearch API</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bbe16af0cda0a52165d4874f0cea4ee0" class="toggle"  />
    <label for="section-bbe16af0cda0a52165d4874f0cea4ee0" class="flex justify-between">
      <a href="./../../../../../docs/operating_system/" class="">计算机操作系统</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-21040cf0ac2f33d55fbb5e091a34a3f0" class="toggle"  />
    <label for="section-21040cf0ac2f33d55fbb5e091a34a3f0" class="flex justify-between">
      <a href="./../../../../../docs/operating_system/linux/" class="">linux学习与使用 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/git_introduction/" class="">git学习</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/gitub_config/" class="">git配置</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/host%E6%98%A0%E5%B0%84/" class="">host映射</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/linux%E4%B8%8B%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%9F%A5%E7%9C%8B%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" class="">Linux下设置和查看环境变量</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/linux%E5%91%BD%E4%BB%A4/" class="">linux命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/nginx/" class="">nginx学习</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/notepad&#43;&#43;%E5%AE%89%E8%A3%85/" class="">Notepad&#43;&#43; 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/ubuntu16.04%E4%BF%AE%E6%94%B9hosts/" class="">Ubuntu 16.04修改hosts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/ubuntu%E5%AE%89%E8%A3%85chmsee/" class="">ubuntu安装chmsee</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/ubuntu%E6%B8%85%E7%90%86%E7%B3%BB%E7%BB%9F%E5%9E%83%E5%9C%BE/" class="">Ubuntu清理系统垃圾</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/ubuntu%E8%BD%AF%E4%BB%B6%E5%8D%B8%E8%BD%BD/" class="">ubuntu软件卸载</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-806134514f2418a47efb34528bbe6d38" class="toggle"  />
    <label for="section-806134514f2418a47efb34528bbe6d38" class="flex justify-between">
      <a href="./../../../../../docs/operating_system/windows/" class="">windows学习与使用 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/dos_start/" class="">DOS命令 基本介绍 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/dos_basic/" class="">DOS基本命令 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/hksdjahjra/" class="">DOS基本命令 (新) </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/dos_file/" class="">DOS基本文件操作命令 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/dos_network/" class=""> DOS网络操作命令 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/ftp/" class=""> FTP </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/windows_question/" class=""> windows 问题 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/" class="">第一章 操作系统概述 </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_1_/" class="">操作系统的概念、功能</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_2_/" class="">操作系统的特征</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_3_/" class=""> 操作系统的发展与分类 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_4_/" class=""> 操作系统的运行机制与体系结构 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_5_/" class=""> 中断和异常 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_6_/" class=""> 系统调用 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_7_/" class=""> 操作系统的体系结构 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/" class="">第二章 进程管理 </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_1/" class="">进程的概念、组成、特征</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_2/" class="">进程的状态与转换</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_3/" class="">进程控制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_4/" class="">进程通信</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_5/" class="">线程概念与多线程模型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_2_1/" class="">处理机调度的概念、层次</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_2_2/" class="">进程调度的时机、切换与过程、方式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_2_3/" class="">调度算法的评价指标</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/three_chapter/" class="">第三章 内存管理 </a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/four_chapter/" class="">第四章 文件管理 </a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/five_chapter/" class="">第五章 输入，输出（I,O） </a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9caa6ae5221742cea46cb40ee3162cf1" class="toggle"  />
    <label for="section-9caa6ae5221742cea46cb40ee3162cf1" class="flex justify-between">
      <a href="./../../../../../docs/http/" class="">http知识 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/http/teywty5qnc/" class="">跨域问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/http/cdn/" class="">cdn</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/http/dns/" class="">DNS</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-350a13706fbef206280ee93f4ba7f7ab" class="toggle"  />
    <label for="section-350a13706fbef206280ee93f4ba7f7ab" class="flex justify-between">
      <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/" class="">脚本</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/nodejs/" class="">node js </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/npm%E6%A8%A1%E5%9D%97%E5%AE%89%E8%A3%85%E6%9C%BA%E5%88%B6%E7%AE%80%E4%BB%8B/" class="">node js - npm </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/uniapp%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="">uniapp基础知识 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack/" class="">webpack </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/simple-webpack/" class="">webpack simple</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack%E5%92%8Cnodejs%E5%85%B3%E7%B3%BB/" class="">webpack和nodejs关系 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack_loader/" class="">webpack loader</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/npm%E9%87%8D%E8%A6%81%E5%91%BD%E4%BB%A4/" class="">node js - npm 重要命令 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/npm%E9%83%A8%E5%88%86%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E9%97%AE%E9%A2%98/" class="">npm部分插件安装问题 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/my-plugins/" class="">webpack 应用自己插件 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack%E7%83%AD%E6%9B%B4%E6%96%B0/" class="">webpack 热更新 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack-other-loader/" class="">webpack 其他 loader </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8A%80%E6%9C%AF%E5%8F%82%E8%80%83/" class="">小程序技术总结参考 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/vue%E8%84%9A%E6%89%8B%E6%9E%B6%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F/" class="">vue脚手架创建方式 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/javascript/" class="">javascript </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/javascript/es6/" class="">ECMAScript 6</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/packing/" class="">uniapp打包</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-faf554f92b63c792eb1430dabc59780a" class="toggle"  />
    <label for="section-faf554f92b63c792eb1430dabc59780a" class="flex justify-between">
      <a href="./../../../../../docs/physics/" class="">physics</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9557cdd8ab7d0e4af192310fb091049c" class="toggle"  />
    <label for="section-9557cdd8ab7d0e4af192310fb091049c" class="flex justify-between">
      <a href="./../../../../../docs/plan/" class="">计划 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/plan/dir/jdkbatmmbr/" class="">任务分类法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/plan/dir/saxr6jwscz/" class="">2022-10-25计划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/plan/dir/cahh4sbqzx/" class="">2023-01-18待处理任务清单</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-67ac8dc39af58fa098ad94e784195ce8" class="toggle"  />
    <label for="section-67ac8dc39af58fa098ad94e784195ce8" class="flex justify-between">
      <a href="./../../../../../docs/english_study/" class="">英语学习</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/jkdy8dwywm/" class="">零基础如何开始着手学习英语</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/" class="">第二语言习得</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/stephen_d_krashen/" class="">Principles and Practice </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/%E6%96%AF%E8%92%82%E8%8A%ACd%E5%85%8B%E6%8B%89%E7%94%B3%E8%AE%BA%E6%96%87/" class="">斯蒂芬•D•克拉申论文 google学术</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/use/" class="">习得 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/%E6%95%B4%E7%90%86/" class="">习得  整理 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/input/" class="">可理解的输入 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/word/" class="">单词记忆技巧</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/word/number/" class="">英语数字规则 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/maimemo/" class="">墨墨背单词</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/plan/" class="">英语学习计划</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2832180921bf769c2911c287eaf83c57" class="toggle"  />
    <label for="section-2832180921bf769c2911c287eaf83c57" class="flex justify-between">
      <a href="./../../../../../docs/car_study/" class="">汽车教学</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/car_study/one/" class="">科目一</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>科目二</span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/car_study/three/" class="">科目三</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0e7f05afbbf08a18bae4c61de4451b8c" class="toggle"  />
    <label for="section-0e7f05afbbf08a18bae4c61de4451b8c" class="flex justify-between">
      <a href="./../../../../../docs/codereview/" class="">编码</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/specification1/" class="">Code review</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/specification2/" class="">编码规范</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/specification3/" class="">编码规范3</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d9f4d4a59bf3da3f9cd63e830886c0db" class="toggle"  />
    <label for="section-d9f4d4a59bf3da3f9cd63e830886c0db" class="flex justify-between">
      <a href="./../../../../../docs/codereview/unit_test/" class="">单元测试</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3045abd0d0a9e601a62e500261c27583" class="toggle"  />
    <label for="section-3045abd0d0a9e601a62e500261c27583" class="flex justify-between">
      <a href="./../../../../../docs/codereview/tool_debug/" class="">开发工具调试</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7aeee6a584f60c55a36eb024eb3b6e4d" class="toggle"  />
    <label for="section-7aeee6a584f60c55a36eb024eb3b6e4d" class="flex justify-between">
      <a href="./../../../../../docs/codereview/hsxkx5kbbp/" class="">编写可读代码的艺术</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-1f139500688be553cf5b773cffee3b71" class="toggle"  />
    <label for="section-1f139500688be553cf5b773cffee3b71" class="flex justify-between">
      <a href="./../../../../../docs/codereview/design_pattern/" class="">设计模式</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/singleton_pattern/" class="">创建型 - 单例模式(Singleton pattern)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/simple_factory/" class="">创建型 - 简单工厂(Simple Factory)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/factory_method/" class="">创建型 - 工厂方法(Factory Method)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/abstract_factory/" class="">创建型 - 抽象工厂(Abstract Factory)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/builder/" class="">创建型 - 生成器(Builder)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/prototype/" class="">创建型 - 原型模式(Prototype)</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a023bf2e3ec39bd7c5b2c0195d2fbe3a" class="toggle"  />
    <label for="section-a023bf2e3ec39bd7c5b2c0195d2fbe3a" class="flex justify-between">
      <a href="./../../../../../docs/codereview/kedswrgngf/" class="">重构: 改善既有代码的设计</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4ae4278ffcaad5eddcb3add9757c83b1" class="toggle"  />
    <label for="section-4ae4278ffcaad5eddcb3add9757c83b1" class="flex justify-between">
      <a href="./../../../../../docs/compilation_principle/" class="">编译原理</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-75093b6572bead2615e3964d3a3f0832" class="toggle"  />
    <label for="section-75093b6572bead2615e3964d3a3f0832" class="flex justify-between">
      <a href="./../../../../../docs/computer_composition_principle/" class="">计算机组成原理</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f756f4cd712e8961a854d8f8077f32db" class="toggle"  />
    <label for="section-f756f4cd712e8961a854d8f8077f32db" class="flex justify-between">
      <a href="./../../../../../docs/life_and_life/" class="">生活就是生活</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/life_and_life/ga2s3gmf/" class="">下班后学习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2f5b73161d05cd7b2df2340845e1aedf" class="toggle"  />
    <label for="section-2f5b73161d05cd7b2df2340845e1aedf" class="flex justify-between">
      <a href="./../../../../../docs/memory/" class="">记忆技巧</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8dd86dd3ec154af9a3d0b2799e6c0025" class="toggle"  />
    <label for="section-8dd86dd3ec154af9a3d0b2799e6c0025" class="flex justify-between">
      <a href="./../../../../../docs/reduce_fat/" class="">减肥减脂技巧</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f18f7ebc1771c05dd41d9cebd3fc8a34" class="toggle"  />
    <label for="section-f18f7ebc1771c05dd41d9cebd3fc8a34" class="flex justify-between">
      <a href="./../../../../../docs/reduce_fat/%E6%97%A0%E6%B0%A7%E8%BF%90%E5%8A%A8/" class="">无氧运动</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c2f7e0d471b6591276e406b821a17fc1" class="toggle"  />
    <label for="section-c2f7e0d471b6591276e406b821a17fc1" class="flex justify-between">
      <a href="./../../../../../docs/reduce_fat/%E6%9C%89%E6%B0%A7%E8%BF%90%E5%8A%A8/" class="">有氧运动</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bdc0af4527c0abd9c5603b6e44774fa8" class="toggle"  />
    <label for="section-bdc0af4527c0abd9c5603b6e44774fa8" class="flex justify-between">
      <a href="./../../../../../docs/reduce_fat/%E8%85%B0%E9%83%A8%E5%87%8F%E8%82%A5/" class="">腰部减肥</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-850fe52dc88ed9f8f6a9ad0ad0cd5784" class="toggle"  />
    <label for="section-850fe52dc88ed9f8f6a9ad0ad0cd5784" class="flex justify-between">
      <a href="./../../../../../docs/%E7%94%B5%E8%A7%86%E5%89%A7%E6%95%B4%E7%90%86/" class="">电视剧整理</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-63739512f503c4ce8199d3b5d0c27b9d" class="toggle"  />
    <label for="section-63739512f503c4ce8199d3b5d0c27b9d" class="flex justify-between">
      <a href="./../../../../../docs/%E7%94%B5%E8%A7%86%E5%89%A7%E6%95%B4%E7%90%86/%E9%81%A5%E8%BF%9C%E7%9A%84%E6%95%91%E4%B8%96%E4%B8%BB/" class="">遥远的救世主</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-39658318a58e1bb764fe7a9650dde553" class="toggle"  />
    <label for="section-39658318a58e1bb764fe7a9650dde553" class="flex justify-between">
      <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/" class="">自我提升</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/2021-04%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" class="">学习计划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/gsmgajphs7/" class="">看书看到大脑疲劳以后，应如何快速恢复大脑状态</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/x5ws5dsp8a/" class="">男生 穿着 和 仪态</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/sstzyfd5je/" class="">社哲讲堂</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/" class="">人际剖析</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/fdhcmhstpw/" class="">什么叫魅力</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/j74dbsrtzw/" class="">我无所畏惧，因为</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/tbwyjex4gc/" class="">从此你不再受伤害</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/x8benctsak/" class="">关于爱情令人不解的一切</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/talk_theme/" class="">聊天话题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/talk_theme/girl/ytaerczr7w/" class="">追女生</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/talk_theme/girl/seiffjx8c7/" class="">和女孩聊天话题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/talk_theme/girl/dpa4wtnhf8/" class="">耍朋友</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/" class="">自信</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/confident/" class="">如何提升自信</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/ga2s3gmf/" class="">下班后学习</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/good_voice/" class="">如何说话好听</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/hw2jindwcd/" class="">100篇锻炼口才表达能力的绕口令（精选版）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/2bm8trpqzx/" class="">发声 具体训练方法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/idx4etcwwy/" class="">如何系统地训练口才</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/dmmsjbabmp/" class="">你到底想表达什么</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/awb8ggwzn2/" class="">生活中常用的客套话</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/hweaprcifa/" class="">高情商的聊天技巧</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/we4ycwfxb7/" class="">我自己理解的口才练习技巧</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/wwnrfnfjmb/" class="">自信相关理论</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/b3akcg3n8k/" class="">我自己理解的聊天技巧</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/6ngdcha8bk/" class="">使自己成熟稳重</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/swtj6fgd6s/" class="">复盘</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/8m3fmhf6t3/" class="">如何变得更加成熟</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/pqpys8speb/" class="">每天保持心情的5句话</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/esxjjecmn5/" class="">PDCA循环工作法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/h847ijsjzr/" class="">表达能力提高</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/ca7cqmh4j8/" class="">任务分类法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/em24ppenbm/" class="">如何保持积极乐观的心态</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/mm8cnxmzyz/" class="">社恐、性格闷、胆子小</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/nnefbyyxgr/" class="">逻辑推导</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/x5xdewmh5e/" class="">所有命运的馈赠，早已暗中标好了价格</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>获取金钱</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%8E%B7%E5%8F%96%E9%87%91%E9%92%B1/%E5%A6%82%E4%BD%95%E5%9C%A8%E6%B2%B9%E7%AE%A1youtube%E5%BC%80%E9%80%9A%E6%94%B6%E7%9B%8A%E8%B5%9A%E9%92%B1/" class="">如何在油管YouTube开通收益赚钱</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/" class="">解决问题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/git_andsower/" class="">git出现的问题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/git_andsower/git%E5%A4%84%E7%90%86/" class="">git处理网络和权限问题</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/idea/" class="">idea出现的问题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/idea/idea/" class="">idea 解决working directory 设置到 target</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/maven/" class="">maven出现的问题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/maven/idea%E8%A7%A3%E5%86%B3/" class="">idea 问题解决</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/visual_studio_code/" class="">visual_studio_code</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/visual_studio_code/visualstudiocode%E9%97%AE%E9%A2%98/" class="">Visual Studio Code 问题解决方案</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/dns%E6%B1%A1%E6%9F%93/" class="">DNS 污染</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/githubpages%E7%BB%91%E5%AE%9A%E6%9D%A5%E8%87%AA%E9%98%BF%E9%87%8C%E4%BA%91%E7%9A%84%E5%9F%9F%E5%90%8D/" class="">GitHubPages绑定来自阿里云的域名</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-51de35a74b957edd5bb9b26e3e2b8f41" class="toggle"  />
    <label for="section-51de35a74b957edd5bb9b26e3e2b8f41" class="flex justify-between">
      <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/" class="">沟通技巧</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case1/" class="">不羞不怯，直切要点</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case2/" class="">如何清晰明了的向他人介绍清楚这个问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case3/" class="">怎样把事情说清楚，清晰表达的能力</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case4/" class="">回复领导的问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case5/" class="">程序员如何向同事说明自己的问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/dmmsjbabmp/" class="">你到底想表达什么</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/r2xcf5nxjq/" class="">国内咨询平台</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%AE%B0%E5%BF%86/" class="">记忆方法</a>
  

        </li>
      
    
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E5%86%A5%E6%83%B3/" class="">冥想</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/paragraph/" class="">适合分享的段子和笑话</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0dee305346a3ca3ab28150dce8272da0" class="toggle"  />
    <label for="section-0dee305346a3ca3ab28150dce8272da0" class="flex justify-between">
      <a href="./../../../../../docs/think/" class="">思维</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/think/criticalthinking/" class="">批判性思维</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/think/jinzita/" class="">金字塔原理</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/think/not_control/" class="">失控</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Shortcodes</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/buttons/" class="">Buttons</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/columns/" class="">Columns</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/details/" class="">Details</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/expand/" class="">Expand</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/hints/" class="">Hints</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/katex/" class="">Katex</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/mermaid/" class="">Mermaid</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d3fc1bf6d66cd84b896a0af9f40cb1d5" class="toggle"  />
    <label for="section-d3fc1bf6d66cd84b896a0af9f40cb1d5" class="flex justify-between">
      <a href="./../../../../../docs/shortcodes/section/" class="">Section</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/section/page1/" class="">Page1</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/section/page2/" class="">Page2</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/tabs/" class="">Tabs</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="./../../../../../posts/" >
        Blog
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="./../../../../../svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>基础算法</strong>

  <label for="toc-control">
    
    <img src="./../../../../../svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#1-常见查找算法">1. 常见查找算法</a>
      <ul>
        <li><a href="#线性查找">线性查找</a></li>
        <li><a href="#二分查找">二分查找</a></li>
        <li><a href="#哈希表查找">哈希表查找</a></li>
        <li><a href="#小结">小结</a></li>
      </ul>
    </li>
    <li><a href="#2-高效查找相关数据结构">2. 高效查找相关数据结构</a>
      <ul>
        <li><a href="#1-二叉搜索树">1) 二叉搜索树</a></li>
        <li><a href="#2-avl-树">2) AVL 树</a></li>
        <li><a href="#3-红黑树">3) 红黑树</a></li>
        <li><a href="#4-b-树">4) B 树</a></li>
        <li><a href="#5-哈希表">5) 哈希表</a></li>
      </ul>
    </li>
    <li><a href="#3-基于比较的排序算法">3. 基于比较的排序算法</a>
      <ul>
        <li><a href="#稳定-vs-不稳定">稳定 vs 不稳定</a></li>
        <li><a href="#1-冒泡排序">1) 冒泡排序</a></li>
        <li><a href="#2-选择排序">2) 选择排序</a></li>
        <li><a href="#3-堆排序">3) 堆排序</a></li>
        <li><a href="#4-插入排序">4) 插入排序</a></li>
        <li><a href="#5-希尔排序">5) 希尔排序</a></li>
        <li><a href="#6-归并排序">6) 归并排序</a></li>
        <li><a href="#7-归并插入">7) 归并+插入</a></li>
        <li><a href="#8-快速排序">8) 快速排序</a></li>
        <li><a href="#leetcode-912-题---排序数组">Leetcode 912 题 - 排序数组</a></li>
        <li><a href="#leetcode-148-题---排序链表">Leetcode 148 题 - 排序链表</a></li>
      </ul>
    </li>
    <li><a href="#4-非比较排序算法">4. 非比较排序算法</a>
      <ul>
        <li><a href="#1-计数排序">1) 计数排序</a></li>
        <li><a href="#2-桶排序">2) 桶排序</a></li>
        <li><a href="#3-基数排序">3) 基数排序</a></li>
      </ul>
    </li>
    <li><a href="#5-java-中的排序">5. Java 中的排序</a></li>
    <li><a href="#6-外部排序">6. 外部排序</a></li>
  </ul>

  <ul>
    <li><a href="#1-二叉搜索树-1">1. 二叉搜索树</a>
      <ul>
        <li><a href="#e01-删除节点-力扣-450-题">E01. 删除节点-力扣 450 题</a></li>
        <li><a href="#e02-新增节点-力扣-701-题">E02. 新增节点-力扣 701 题</a></li>
        <li><a href="#e03-查询节点-力扣-700-题">E03. 查询节点-力扣 700 题</a></li>
        <li><a href="#e04-验证二叉搜索树-力扣-98-题">E04. 验证二叉搜索树-力扣 98 题</a></li>
        <li><a href="#e05-求范围和-力扣-938-题">E05. 求范围和-力扣 938 题</a></li>
        <li><a href="#e06-根据前序遍历结果构造二叉搜索树-力扣-1008-题">E06. 根据前序遍历结果构造二叉搜索树-力扣 1008 题</a></li>
        <li><a href="#e07-二叉搜索树的最近公共祖先-力扣-235-题">E07. 二叉搜索树的最近公共祖先-力扣 235 题</a></li>
        <li><a href="#二叉树的最近公共祖先-力扣-236-题">二叉树的最近公共祖先-力扣 236 题</a></li>
        <li><a href="#二叉树展开为链表-力扣-114-题">二叉树展开为链表-力扣 114 题</a></li>
        <li><a href="#有序数组构造平衡二叉搜索树-力扣-108-题">有序数组构造平衡二叉搜索树-力扣 108 题</a></li>
        <li><a href="#二叉搜索树变为平衡-力扣--1382-题">二叉搜索树变为平衡-力扣  1382 题</a></li>
      </ul>
    </li>
    <li><a href="#2-hash-表">2. hash 表</a>
      <ul>
        <li><a href="#e01-两数之和-力扣-1-题">E01. 两数之和-力扣 1 题</a></li>
        <li><a href="#e02-无重复字符的最长字串-力扣-3-题">E02. 无重复字符的最长字串-力扣 3 题</a></li>
        <li><a href="#e03-字母异位词分组-力扣-49-题">E03. 字母异位词分组-力扣 49 题</a></li>
        <li><a href="#e04-判断有没有重复元素-力扣-217">E04. 判断有没有重复元素-力扣 217</a></li>
        <li><a href="#e05-找出出现一次的数字-力扣-136">E05. 找出出现一次的数字-力扣 136</a></li>
        <li><a href="#e06-判断字母异位词-力扣-242">E06. 判断字母异位词-力扣 242</a></li>
        <li><a href="#e07-第一个不重复字符-力扣-387">E07. 第一个不重复字符-力扣 387</a></li>
        <li><a href="#e08-出现次数最多的单词-力扣-819">E08. 出现次数最多的单词-力扣 819</a></li>
        <li><a href="#e09-leetcode105improved">E09. Leetcode105Improved</a></li>
        <li><a href="#e10-e10leetcode106improved">E10. E10Leetcode106Improved</a></li>
      </ul>
    </li>
    <li><a href="#3-排序">3. 排序</a>
      <ul>
        <li><a href="#e01-根据另一个数组次序排序---力扣1122题">E01. 根据另一个数组次序排序 - 力扣1122题</a></li>
        <li><a href="#e02-按出现频率排序---力扣-1636">E02. 按出现频率排序 - 力扣 1636</a></li>
        <li><a href="#e03-最大间距---力扣-164">E03. 最大间距 - 力扣 164</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      



<ul class="ul_abc">
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/lifeDoc/docs/about">关于程序员</a></li>
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/lifeDoc/docs/compilation_principle">编译原理</a></li>
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/lifeDoc/docs/computer_composition_principle">计算机组成原理</a></li>
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/my-blog/">myBlog</a></li>
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/blog/">blog</a></li>
    <li class="li_abc"><button type="button" onclick="layer.alert('内容')">layer</button></li>
</ul>

      
  <article class="markdown"><h1 id="一-基础算法">
  一. 基础算法
  <a class="anchor" href="#%e4%b8%80-%e5%9f%ba%e7%a1%80%e7%ae%97%e6%b3%95">#</a>
</h1>
<h2 id="1-常见查找算法">
  1. 常见查找算法
  <a class="anchor" href="#1-%e5%b8%b8%e8%a7%81%e6%9f%a5%e6%89%be%e7%ae%97%e6%b3%95">#</a>
</h2>
<p>查找算法是一种在数据集中寻找特定数据项的方法。通常，数据集是在计算机程序中存储的，例如数组、链表或散列表。在编写程序时，查找算法是非常重要的，它有助于快速找到所需的数据。在本文中，我们将介绍一些基本的查找算法及其特点。</p>
<h3 id="线性查找">
  线性查找
  <a class="anchor" href="#%e7%ba%bf%e6%80%a7%e6%9f%a5%e6%89%be">#</a>
</h3>
<p>线性查找也称为顺序查找，是一种最简单的查找算法。在这种算法中，我们从数据集的开头开始，逐个比较每个数据项，以寻找要查找的数据。如果我们找到了目标数据，查找过程就结束了。如果我们到达数据集的末尾，仍然找不到目标数据，则可以认为它不存在于数据集中。</p>
<p>线性查找的时间复杂度是O(n)，其中n是数据集的大小。因此，它在大型数据集中可能会很慢。然而，在小型数据集中，它仍然是一种非常有用的算法。</p>
<h3 id="二分查找">
  二分查找
  <a class="anchor" href="#%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be">#</a>
</h3>
<p>二分查找也称为折半查找，是一种更快速的查找算法。但前提是，数据集必须已经排序。在二分查找中，我们取数据集的中间值，然后将目标与中间值进行比较。如果目标小于中间值，则在左侧子集中继续查找；如果目标大于中间值，则在右侧子集中继续查找。每次比较都会缩小要搜索的数据集的大小。</p>
<p>二分查找的时间复杂度是O(log n)，其中n是数据集的大小。这种算法在大型数据集中非常有效，但在小型数据集中可能并不是最快的选择。</p>
<h3 id="哈希表查找">
  哈希表查找
  <a class="anchor" href="#%e5%93%88%e5%b8%8c%e8%a1%a8%e6%9f%a5%e6%89%be">#</a>
</h3>
<p>哈希表查找也称为散列表查找，是另一种常见的查找算法。它利用哈希函数将数据项映射到散列表中的位置。在查找过程中，我们只需通过哈希函数计算目标数据的位置，然后检查该位置是否包含目标数据。</p>
<p>哈希表查找的时间复杂度是O(1)。这使得它成为大型数据集中最快的查找算法之一。但是，哈希表查找的效率取决于哈希函数的质量。如果两个数据项映射到相同的位置，就会发生哈希冲突，这可能会导致性能下降。</p>
<h3 id="小结">
  小结
  <a class="anchor" href="#%e5%b0%8f%e7%bb%93">#</a>
</h3>
<p>在编写程序时，我们需要选择适合数据集大小和其他要求的最佳查找算法。例如，如果数据集很小，则线性查找可能是最快的选择；如果数据集已经排序，则二分查找是非常有用的。然而，在大型数据集中，哈希表查找通常是最好的选择。了解不同类型的查找算法及其特点可以帮助我们在编写程序时做出明智的选择。</p>
<h2 id="2-高效查找相关数据结构">
  2. 高效查找相关数据结构
  <a class="anchor" href="#2-%e9%ab%98%e6%95%88%e6%9f%a5%e6%89%be%e7%9b%b8%e5%85%b3%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84">#</a>
</h2>
<p>不管是之前学过的数组、链表、队列、还是栈，这些线性结构中，如果想在其中查找一个元素，效率是比较慢的，只有$O(N)$，因此如果你的需求是实现数据的快速查找，那么就需要<strong>新的数据结构</strong>支持。</p>
<p>还记得最先介绍的那个二分查找算法吗？它的查找效率能够达到 $O(\log{N})$，是不是还不错？不过呢，它需要对数组事先排好序，而排序的成本是比较高的。那么有没有一个折中的办法呢？有，那就是接下来要给大家介绍的<strong>二叉搜索树</strong>，它插入元素后，自然就是排好序的，接下来的查询也自然而然可以应用二分查找算法进行高效搜索。</p>
<h3 id="1-二叉搜索树">
  1) 二叉搜索树
  <a class="anchor" href="#1-%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91">#</a>
</h3>
<h4 id="历史">
  历史
  <a class="anchor" href="#%e5%8e%86%e5%8f%b2">#</a>
</h4>
<blockquote>
<p>二叉搜索树最早是由Bernoulli兄弟在18世纪中提出的，但是真正推广和应用该数据结构的是1960年代的D.L. Gries。他的著作《The Science of Programming》中详细介绍了二叉搜索树的实现和应用。</p>
<p>在计算机科学的发展中，二叉搜索树成为了一种非常基础的数据结构，被广泛应用在各种领域，包括搜索、排序、数据库索引等。随着计算机算力的提升和对数据结构的深入研究，二叉搜索树也不断被优化和扩展，例如AVL树、红黑树等。</p>
</blockquote>
<h4 id="特性">
  特性
  <a class="anchor" href="#%e7%89%b9%e6%80%a7">#</a>
</h4>
<p>二叉搜索树（也称二叉排序树）是符合下面特征的二叉树：</p>
<ol>
<li>树节点增加 key 属性，用来比较谁大谁小，key 不可以重复</li>
<li>对于任意一个树节点，它的 key 比左子树的 key 都大，同时也比右子树的 key 都小，例如下图所示</li>
</ol>
<p><img src="../imgs/image-20230228090412983.png" alt="image-20230228090412983" /></p>
<p>轻易看出要查找 7 （从根开始）自然就可应用二分查找算法，只需三次比较</p>
<ul>
<li>与 4 比，较之大，向右找</li>
<li>与 6 比，较之大，继续向右找</li>
<li>与 7 比，找到</li>
</ul>
<p>查找的时间复杂度与<strong>树高</strong>相关，插入、删除也是如此。</p>
<ul>
<li>如果这棵树长得还不赖（左右平衡）上图，那么时间复杂度均是 $O(\log{N})$</li>
<li>当然，这棵树如果长得丑（左右高度相差过大）下图，那么这时是最糟的情况，时间复杂度是 $O(N)$</li>
</ul>
<p><img src="../imgs/image-20230228091405293.png" alt="image-20230228091405293" /></p>
<blockquote>
<p>注：</p>
<ul>
<li>二叉搜索树 - 英文 binary search tree，简称 BST</li>
<li>二叉排序树 - 英文 binary ordered tree 或 binary sorted tree</li>
</ul>
</blockquote>
<h4 id="定义节点">
  定义节点
  <a class="anchor" href="#%e5%ae%9a%e4%b9%89%e8%8a%82%e7%82%b9">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BSTNode</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> key<span style="color:#f92672">;</span> <span style="color:#75715e">// 若希望任意类型作为 key, 则后续可以将其设计为 Comparable 接口
</span><span style="color:#75715e"></span>    Object value<span style="color:#f92672">;</span>
    BSTNode left<span style="color:#f92672">;</span>
    BSTNode right<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BSTNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BSTNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BSTNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">,</span> BSTNode left<span style="color:#f92672">,</span> BSTNode right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="查询">
  查询
  <a class="anchor" href="#%e6%9f%a5%e8%af%a2">#</a>
</h4>
<p><strong>递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> doGet<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> Object <span style="color:#a6e22e">doGet</span><span style="color:#f92672">(</span>BSTNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 没找到
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> doGet<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span> <span style="color:#75715e">// 向左找
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> doGet<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span> <span style="color:#75715e">// 向右找
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 找到了
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>非递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    BSTNode node <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="comparable">
  Comparable
  <a class="anchor" href="#comparable">#</a>
</h4>
<p>如果希望让除 int 外更多的类型能够作为 key，一种方式是 key 必须实现 Comparable 接口。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BSTTree2</span><span style="color:#f92672">&lt;</span>T <span style="color:#66d9ef">extends</span> Comparable<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BSTNode</span><span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
        T key<span style="color:#f92672">;</span> <span style="color:#75715e">// 若希望任意类型作为 key, 则后续可以将其设计为 Comparable 接口
</span><span style="color:#75715e"></span>        Object value<span style="color:#f92672">;</span>
        BSTNode<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> left<span style="color:#f92672">;</span>
        BSTNode<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> right<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BSTNode</span><span style="color:#f92672">(</span>T key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BSTNode</span><span style="color:#f92672">(</span>T key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BSTNode</span><span style="color:#f92672">(</span>T key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">,</span> BSTNode<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> left<span style="color:#f92672">,</span> BSTNode<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    BSTNode<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> root<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>T key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> doGet<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> Object <span style="color:#a6e22e">doGet</span><span style="color:#f92672">(</span>BSTNode<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> node<span style="color:#f92672">,</span> T key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> result <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">.</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>key<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>result <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> doGet<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>result <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> doGet<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>还有一种做法不要求 key 实现 Comparable 接口，而是在构造 Tree 时把比较规则作为 Comparator 传入，将来比较 key 大小时都调用此 Comparator 进行比较，这种做法可以参考 Java 中的 java.util.TreeMap</p>
<h4 id="最小">
  最小
  <a class="anchor" href="#%e6%9c%80%e5%b0%8f">#</a>
</h4>
<p><strong>递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">min</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> doMin<span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">doMin</span><span style="color:#f92672">(</span>BSTNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 左边已走到头
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> doMin<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>非递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">min</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>root <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    BSTNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    <span style="color:#75715e">// 左边未走到头
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="最大">
  最大
  <a class="anchor" href="#%e6%9c%80%e5%a4%a7">#</a>
</h4>
<p><strong>递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">max</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> doMax<span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">doMax</span><span style="color:#f92672">(</span>BSTNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 右边已走到头
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> doMin<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>非递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">max</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>root <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    BSTNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    <span style="color:#75715e">// 右边未走到头
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="新增">
  新增
  <a class="anchor" href="#%e6%96%b0%e5%a2%9e">#</a>
</h4>
<p><strong>递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    root <span style="color:#f92672">=</span> doPut<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> BSTNode <span style="color:#a6e22e">doPut</span><span style="color:#f92672">(</span>BSTNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> BSTNode<span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> doPut<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> doPut<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>若找到 key，走 else 更新找到节点的值</li>
<li>若没找到 key，走第一个 if，创建并返回新节点
<ul>
<li>返回的新节点，作为上次递归时 node 的左孩子或右孩子</li>
<li>缺点是，会有很多不必要的赋值操作</li>
</ul>
</li>
</ul>
<p><strong>非递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    BSTNode node <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    BSTNode parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        parent <span style="color:#f92672">=</span> node<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 1. key 存在则更新
</span><span style="color:#75715e"></span>            node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 2. key 不存在则新增
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BSTNode<span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BSTNode<span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        parent<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BSTNode<span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="前驱后继">
  前驱后继
  <a class="anchor" href="#%e5%89%8d%e9%a9%b1%e5%90%8e%e7%bb%a7">#</a>
</h4>
<p><img src="../imgs/image-20230228144422128.png" alt="image-20230228144422128" /></p>
<p>一个节点的前驱（前任）节点是指比它小的节点中，最大的那个</p>
<p>一个节点的后继（后任）节点是指比它大的节点中，最小的那个</p>
<p>例如上图中</p>
<ul>
<li>1 没有前驱，后继是 2</li>
<li>2 前驱是 1，后继是 3</li>
<li>3 前驱是 2，后继是 4</li>
<li>&hellip;</li>
</ul>
<p>简单的办法是中序遍历，即可获得排序结果，此时很容易找到前驱后继</p>
<p>要效率更高，需要研究一下规律，<strong>找前驱</strong>分成 2 种情况：</p>
<p><img src="../imgs/image-20230228144422128.png" alt="image-20230228144422128" /></p>
<ol>
<li>节点有左子树，此时前驱节点就是左子树的最大值，图中属于这种情况的有
<ul>
<li>2 的前驱是1</li>
<li>4 的前驱是 3</li>
<li>6 的前驱是 5</li>
<li>7 的前驱是 6</li>
</ul>
</li>
<li>节点没有左子树，若离它最近的祖先自从左而来，此祖先即为前驱，如
<ul>
<li>3 的祖先 2 自左而来，前驱 2</li>
<li>5 的祖先 4 自左而来，前驱 4</li>
<li>8 的祖先 7 自左而来，前驱 7</li>
<li>1 没有这样的祖先，前驱 null</li>
</ul>
</li>
</ol>
<p><strong>找后继</strong>也分成 2 种情况</p>
<p><img src="../imgs/image-20230228152715296.png" alt="image-20230228152715296" /></p>
<ol>
<li>节点有右子树，此时后继节点即为右子树的最小值，如
<ul>
<li>2 的后继 3</li>
<li>3 的后继 4</li>
<li>5 的后继 6</li>
<li>7 的后继 8</li>
</ul>
</li>
<li>节点没有右子树，若离它最近的祖先自从右而来，此祖先即为后继，如
<ul>
<li>1 的祖先 2 自右而来，后继 2</li>
<li>4 的祖先 5 自右而来，后继 5</li>
<li>6 的祖先 7 自右而来，后继 7</li>
<li>8 没有这样的祖先，后继 null</li>
</ul>
</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">predecessor</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    BSTNode ancestorFromLeft <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    BSTNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            ancestorFromLeft <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 情况1 - 有左孩子
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> max<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 情况2 - 有祖先自左而来
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> ancestorFromLeft <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> ancestorFromLeft<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>


<span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">successor</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    BSTNode ancestorFromRight <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    BSTNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            ancestorFromRight <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 情况1 - 有右孩子
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> min<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 情况2 - 有祖先自右而来
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> ancestorFromRight <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> ancestorFromRight<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="删除">
  删除
  <a class="anchor" href="#%e5%88%a0%e9%99%a4">#</a>
</h4>
<p>要删除某节点（称为 D），必须先找到被删除节点的父节点，这里称为 Parent</p>
<ol>
<li>删除节点没有左孩子，将右孩子托孤给 Parent</li>
<li>删除节点没有右孩子，将左孩子托孤给 Parent</li>
<li>删除节点左右孩子都没有，已经被涵盖在情况1、情况2 当中，把 null 托孤给 Parent</li>
<li>删除节点左右孩子都有，可以将它的后继节点（称为 S）托孤给 Parent，设 S 的父亲为 SP，又分两种情况
<ol>
<li>SP 就是被删除节点，此时 D 与 S 紧邻，只需将 S 托孤给 Parent</li>
<li>SP 不是被删除节点，此时 D 与 S 不相邻，此时需要将 S 的后代托孤给 SP，再将 S 托孤给 Parent</li>
</ol>
</li>
</ol>
<p><strong>非递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * &lt;h3&gt;根据关键字删除&lt;/h3&gt;
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param key 关键字
</span><span style="color:#75715e"> * @return 被删除关键字对应值
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    BSTNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    BSTNode parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            parent <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            parent <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 删除操作
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        shift<span style="color:#f92672">(</span>parent<span style="color:#f92672">,</span> p<span style="color:#f92672">,</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 情况1
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        shift<span style="color:#f92672">(</span>parent<span style="color:#f92672">,</span> p<span style="color:#f92672">,</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 情况2
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 情况4
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// 4.1 被删除节点找后继
</span><span style="color:#75715e"></span>        BSTNode s <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        BSTNode sParent <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span> <span style="color:#75715e">// 后继父亲
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            sParent <span style="color:#f92672">=</span> s<span style="color:#f92672">;</span>
            s <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 4.2 删除和后继不相邻, 处理后继的后事
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sParent <span style="color:#f92672">!=</span> p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>                
            shift<span style="color:#f92672">(</span>sParent<span style="color:#f92672">,</span> s<span style="color:#f92672">,</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 不可能有左孩子
</span><span style="color:#75715e"></span>            s<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 4.3 后继取代被删除节点
</span><span style="color:#75715e"></span>        shift<span style="color:#f92672">(</span>parent<span style="color:#f92672">,</span> p<span style="color:#f92672">,</span> s<span style="color:#f92672">);</span>
        s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * 托孤方法
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param parent  被删除节点的父亲
</span><span style="color:#75715e"> * @param deleted 被删除节点
</span><span style="color:#75715e"> * @param child   被顶上去的节点
</span><span style="color:#75715e"> */</span>
<span style="color:#75715e">// 只考虑让 n1父亲的左或右孩子指向 n2, n1自己的左或右孩子并未在方法内改变
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">shift</span><span style="color:#f92672">(</span>BSTNode parent<span style="color:#f92672">,</span> BSTNode deleted<span style="color:#f92672">,</span> BSTNode child<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        root <span style="color:#f92672">=</span> child<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted <span style="color:#f92672">==</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> child<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        parent<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> child<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ArrayList<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
    root <span style="color:#f92672">=</span> doDelete<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> result<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> result<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">:</span> result<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> BSTNode <span style="color:#a6e22e">doDelete</span><span style="color:#f92672">(</span>BSTNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> ArrayList<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> result<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> doDelete<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> result<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> doDelete<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> result<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    result<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        BSTNode s <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            s <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        s<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> doDelete<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;());</span>
        s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> s<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">:</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>说明</p>
<ol>
<li><code>ArrayList&lt;Object&gt; result</code> 用来保存被删除节点的值</li>
<li>第二、第三个 if 对应没找到的情况，继续递归查找和删除，注意后续的 doDelete 返回值代表删剩下的，因此需要更新</li>
<li>最后一个 return 对应删除节点只有一个孩子的情况，返回那个不为空的孩子，待删节点自己因没有返回而被删除</li>
<li>第四个 if 对应删除节点有两个孩子的情况，此时需要找到后继节点，并在待删除节点的右子树中删掉后继节点，最后用后继节点替代掉待删除节点返回，别忘了改变后继节点的左右指针</li>
</ol>
<h4 id="找小的">
  找小的
  <a class="anchor" href="#%e6%89%be%e5%b0%8f%e7%9a%84">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">less</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ArrayList<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
    BSTNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    LinkedList<span style="color:#f92672">&lt;</span>BSTNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            BSTNode pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                result<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            p <span style="color:#f92672">=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="找大的">
  找大的
  <a class="anchor" href="#%e6%89%be%e5%a4%a7%e7%9a%84">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">greater</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ArrayList<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
    BSTNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    LinkedList<span style="color:#f92672">&lt;</span>BSTNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            BSTNode pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&gt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                result<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            p <span style="color:#f92672">=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>但这样效率不高，可以用 RNL 遍历</p>
<blockquote>
<p>注：</p>
<ul>
<li>Pre-order, NLR</li>
<li>In-order, LNR</li>
<li>Post-order, LRN</li>
<li>Reverse pre-order, NRL</li>
<li>Reverse in-order, RNL</li>
<li>Reverse post-order, RLN</li>
</ul>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">greater</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ArrayList<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
    BSTNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    LinkedList<span style="color:#f92672">&lt;</span>BSTNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            BSTNode pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&gt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                result<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            p <span style="color:#f92672">=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="找之间">
  找之间
  <a class="anchor" href="#%e6%89%be%e4%b9%8b%e9%97%b4">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">between</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ArrayList<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
    BSTNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    LinkedList<span style="color:#f92672">&lt;</span>BSTNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            BSTNode pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&gt;=</span> key1 <span style="color:#f92672">&amp;&amp;</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;=</span> key2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                result<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&gt;</span> key2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            p <span style="color:#f92672">=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="小结-1">
  小结
  <a class="anchor" href="#%e5%b0%8f%e7%bb%93-1">#</a>
</h4>
<p>优点：</p>
<ol>
<li>如果每个节点的左子树和右子树的大小差距不超过一，可以保证搜索操作的时间复杂度是 O(log n)，效率高。</li>
<li>插入、删除结点等操作也比较容易实现，效率也比较高。</li>
<li>对于有序数据的查询和处理，二叉查找树非常适用，可以使用中序遍历得到有序序列。</li>
</ol>
<p>缺点：</p>
<ol>
<li>如果输入的数据是有序或者近似有序的，就会出现极度不平衡的情况，可能导致搜索效率下降，时间复杂度退化成O(n)。</li>
<li>对于频繁地插入、删除操作，需要维护平衡二叉查找树，例如红黑树、AVL 树等，否则搜索效率也会下降。</li>
<li>对于存在大量重复数据的情况，需要做相应的处理，否则会导致树的深度增加，搜索效率下降。</li>
<li>对于结点过多的情况，由于树的空间开销较大，可能导致内存消耗过大，不适合对内存要求高的场景。</li>
</ol>
<h3 id="2-avl-树">
  2) AVL 树
  <a class="anchor" href="#2-avl-%e6%a0%91">#</a>
</h3>
<h4 id="历史-1">
  历史
  <a class="anchor" href="#%e5%8e%86%e5%8f%b2-1">#</a>
</h4>
<blockquote>
<p>AVL 树是一种自平衡二叉搜索树，由托尔·哈斯特罗姆在 1960 年提出并在 1962 年发表。它的名字来源于发明者的名字：Adelson-Velsky 和 Landis，他们是苏联数学家，于 1962 年发表了一篇论文，详细介绍了 AVL 树的概念和性质。</p>
<p>在二叉搜索树中，如果插入的元素按照特定的顺序排列，可能会导致树变得非常不平衡，从而降低搜索、插入和删除的效率。为了解决这个问题，AVL 树通过在每个节点中维护一个平衡因子来确保树的平衡。平衡因子是左子树的高度减去右子树的高度。如果平衡因子的绝对值大于等于 2，则通过旋转操作来重新平衡树。</p>
<p>AVL 树是用于存储有序数据的一种重要数据结构，它是二叉搜索树的一种改进和扩展。它不仅能够提高搜索、插入和删除操作的效率，而且还能够确保树的深度始终保持在 O(log n) 的水平。随着计算机技术的不断发展，AVL 树已经成为了许多高效算法和系统中必不可少的一种基础数据结构。</p>
</blockquote>
<p>前面介绍过，如果一棵二叉搜索树长的不平衡，那么查询的效率会受到影响，如下图</p>
<p><img src="../imgs/image-20230313090500760.png" alt="image-20230313090500760" /></p>
<p>通过旋转可以让树重新变得平衡，并且不会改变二叉搜索树的性质（即左边仍然小，右边仍然大）</p>
<p><img src="../imgs/image-20230313090817485.png" alt="image-20230313090817485" /></p>
<h4 id="如何判断失衡">
  如何判断失衡？
  <a class="anchor" href="#%e5%a6%82%e4%bd%95%e5%88%a4%e6%96%ad%e5%a4%b1%e8%a1%a1">#</a>
</h4>
<blockquote>
<p>如果一个节点的<strong>左右孩子，高度差超过 1</strong>，则此节点失衡，才需要旋转</p>
</blockquote>
<h4 id="处理高度">
  处理高度
  <a class="anchor" href="#%e5%a4%84%e7%90%86%e9%ab%98%e5%ba%a6">#</a>
</h4>
<p>如何得到节点高度？一种方式之前做过的一道题目：E05. 求二叉树的最大深度（高度），但由于求高度是一个非常频繁的操作，因此将高度作为节点的一个属性，将来新增或删除时及时更新，默认为 1（按力扣说法）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AVLNode</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> height <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> key<span style="color:#f92672">;</span>
    Object value<span style="color:#f92672">;</span>
    AVLNode left<span style="color:#f92672">;</span>
    AVLNode right<span style="color:#f92672">;</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p><strong>求高度代码</strong></p>
<p>这里加入了 height 函数方便求节点为 null 时的高度</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> 0 <span style="color:#f92672">:</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>更新高度代码</strong></p>
<p>将来新增、删除、旋转时，高度都可能发生变化，需要更新。下面是更新高度的代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">updateHeight</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    node<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>height<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">),</span> height<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">))</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="何时触发失衡判断">
  何时触发失衡判断？
  <a class="anchor" href="#%e4%bd%95%e6%97%b6%e8%a7%a6%e5%8f%91%e5%a4%b1%e8%a1%a1%e5%88%a4%e6%96%ad">#</a>
</h4>
<p>定义平衡因子（balance factor）如下
$$
平衡因子 = 左子树高度 - 右子树高度
$$
当平衡因子</p>
<ul>
<li>bf = 0，1，-1 时，表示左右平衡</li>
<li>bf &gt; 1 时，表示左边太高</li>
<li>bf &lt; -1 时，表示右边太高</li>
</ul>
<p>对应代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">bf</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> height<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">)</span> <span style="color:#f92672">-</span> height<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>当插入新节点，或删除节点时，引起高度变化时，例如</p>
<p><img src="../imgs/image-20230310153645397.png" alt="image-20230310153645397" /></p>
<p>目前此树平衡，当再插入一个 4 时，节点们的高度都产生了相应的变化，8 节点失衡了</p>
<p><img src="../imgs/image-20230310153803661.png" alt="image-20230310153803661" /></p>
<p>在比如说，下面这棵树一开始也是平衡的</p>
<p><img src="../imgs/image-20230310154155728.png" alt="image-20230310154155728" /></p>
<p>当删除节点 8 时，节点们的高度都产生了相应的变化，6 节点失衡了</p>
<p><img src="../imgs/image-20230310154232729.png" alt="image-20230310154232729" /></p>
<h4 id="失衡的四种情况">
  失衡的四种情况
  <a class="anchor" href="#%e5%a4%b1%e8%a1%a1%e7%9a%84%e5%9b%9b%e7%a7%8d%e6%83%85%e5%86%b5">#</a>
</h4>
<p><strong>LL</strong></p>
<p><img src="../imgs/image-20230310154459709.png" alt="image-20230310154459709" /></p>
<ul>
<li>失衡节点（图中 8 红色）的 bf &gt; 1，即左边更高</li>
<li>失衡节点的左孩子（图中 6）的 bf &gt;= 0 即左孩子这边也是左边更高或等高</li>
</ul>
<p><strong>LR</strong></p>
<p><img src="../imgs/image-20230310154858754.png" alt="image-20230310154858754" /></p>
<ul>
<li>失衡节点（图中 8）的 bf &gt; 1，即左边更高</li>
<li>失衡节点的左孩子（图中 6 红色）的 bf &lt; 0 即左孩子这边是右边更高</li>
</ul>
<p>对称的还有两种情况</p>
<p><strong>RL</strong></p>
<p><img src="../imgs/image-20230310155048187.png" alt="image-20230310155048187" /></p>
<ul>
<li>失衡节点（图中 3）的 bf &lt;-1，即右边更高</li>
<li>失衡节点的右孩子（图中 6 红色）的 bf &gt; 0，即右孩子这边左边更高</li>
</ul>
<p><strong>RR</strong></p>
<p><img src="../imgs/image-20230310155347349.png" alt="image-20230310155347349" /></p>
<ul>
<li>失衡节点（图中 3）的 bf &lt;-1，即右边更高</li>
<li>失衡节点的右孩子（图中 6 红色）的 bf &lt;= 0，即右孩子这边右边更高或等高</li>
</ul>
<h4 id="解决失衡">
  解决失衡
  <a class="anchor" href="#%e8%a7%a3%e5%86%b3%e5%a4%b1%e8%a1%a1">#</a>
</h4>
<p>失衡可以通过树的旋转解决。什么是树的旋转呢？它是在不干扰元素顺序的情况下更改结构，通常用来让树的高度变得平衡。</p>
<p>观察下面一棵二叉搜索树，可以看到，旋转后，并未改变树的左小右大特性，但根、父、孩子节点都发生了变化</p>
<pre><code>      4                                   2
     / \             4 right             / \
    2   5      --------------------&gt;    1   4
   / \         &lt;--------------------       / \
  1   3              2 left               3   5
</code></pre><p><strong>右旋</strong></p>
<p>旋转前</p>
<p><img src="../imgs/image-20230310162158692.png" alt="image-20230310162158692" /></p>
<ul>
<li>红色节点，旧根（失衡节点）</li>
<li>黄色节点，旧根的左孩子，将来作为新根，旧根是它右孩子</li>
<li>绿色节点，新根的右孩子，将来要换爹作为旧根的左孩子</li>
</ul>
<p>旋转后</p>
<p><img src="../imgs/image-20230310162442932.png" alt="image-20230310162442932" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">rightRotate</span><span style="color:#f92672">(</span>AVLNode red<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    AVLNode yellow <span style="color:#f92672">=</span> red<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    AVLNode green <span style="color:#f92672">=</span> yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
    yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> red<span style="color:#f92672">;</span>
    red<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> green<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> yellow<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>左旋</strong></p>
<p>旋转前</p>
<p><img src="../imgs/image-20230310162945078.png" alt="image-20230310162945078" /></p>
<ul>
<li>红色节点，旧根（失衡节点）</li>
<li>黄色节点，旧根的右孩子，将来作为新根，旧根是它左孩子</li>
<li>绿色节点，新根的左孩子，将来要换爹作为旧根的右孩子</li>
</ul>
<p>旋转后</p>
<p><img src="../imgs/image-20230310163019508.png" alt="image-20230310163019508" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">leftRotate</span><span style="color:#f92672">(</span>AVLNode red<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    AVLNode yellow <span style="color:#f92672">=</span> red<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
    AVLNode green <span style="color:#f92672">=</span> yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> red<span style="color:#f92672">;</span>
    red<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> green<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> yellow<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>左右旋</strong></p>
<p>指先左旋左子树，再右旋根节点（失衡），这时一次旋转并不能解决失衡</p>
<p><img src="../imgs/image-20230310171424362.png" alt="image-20230310171424362" /></p>
<p>左子树旋转后</p>
<p><img src="../imgs/image-20230310171636904.png" alt="image-20230310171636904" /></p>
<p>根右旋前</p>
<p><img src="../imgs/image-20230310171821578.png" alt="image-20230310171821578" /></p>
<p>根右旋后</p>
<p><img src="../imgs/image-20230310171903417.png" alt="image-20230310171903417" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">leftRightRotate</span><span style="color:#f92672">(</span>AVLNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    root<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> leftRotate<span style="color:#f92672">(</span>root<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> rightRotate<span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>右左旋</strong></p>
<p>指先右旋右子树，再左旋根节点（失衡）</p>
<p><img src="../imgs/image-20230310172212302.png" alt="image-20230310172212302" /></p>
<p>右子树右旋后</p>
<p><img src="../imgs/image-20230310172234154.png" alt="image-20230310172234154" /></p>
<p>根左旋前</p>
<p><img src="../imgs/image-20230310172303012.png" alt="image-20230310172303012" /></p>
<p>根左旋后</p>
<p><img src="../imgs/image-20230310172317379.png" alt="image-20230310172317379" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">rightLeftRotate</span><span style="color:#f92672">(</span>AVLNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    root<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> rightRotate<span style="color:#f92672">(</span>root<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> leftRotate<span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>判断及调整平衡代码</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">balance</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> bf <span style="color:#f92672">=</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bf <span style="color:#f92672">&gt;</span> 1 <span style="color:#f92672">&amp;&amp;</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">)</span> <span style="color:#f92672">&gt;=</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> rightRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bf <span style="color:#f92672">&gt;</span> 1 <span style="color:#f92672">&amp;&amp;</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">)</span> <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> rightLeftRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bf <span style="color:#f92672">&lt;</span> <span style="color:#f92672">-</span>1 <span style="color:#f92672">&amp;&amp;</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">)</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> leftRightRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bf <span style="color:#f92672">&lt;</span> <span style="color:#f92672">-</span>1 <span style="color:#f92672">&amp;&amp;</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">)</span> <span style="color:#f92672">&lt;=</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> rightRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>以上四种旋转代码里，都需要更新高度，需要更新的节点是红色、黄色，而绿色节点高度不变</p>
<h4 id="新增-1">
  新增
  <a class="anchor" href="#%e6%96%b0%e5%a2%9e-1">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    root <span style="color:#f92672">=</span> doPut<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">doPut</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> AVLNode<span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">==</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> doPut<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> doPut<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    updateHeight<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> balance<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="删除-1">
  删除
  <a class="anchor" href="#%e5%88%a0%e9%99%a4-1">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    root <span style="color:#f92672">=</span> doRemove<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">doRemove</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> doRemove<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> doRemove<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            AVLNode s <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                s <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            s<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> doRemove<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">);</span>
            s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
            node <span style="color:#f92672">=</span> s<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    updateHeight<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> balance<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>完整代码备份</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AVLTree</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AVLNode</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> height <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> key<span style="color:#f92672">;</span>
        Object value<span style="color:#f92672">;</span>
        AVLNode left<span style="color:#f92672">;</span>
        AVLNode right<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">AVLNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">AVLNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">AVLNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">,</span> AVLNode left<span style="color:#f92672">,</span> AVLNode right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    AVLNode root<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">leftRotate</span><span style="color:#f92672">(</span>AVLNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        AVLNode r <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        AVLNode b <span style="color:#f92672">=</span> r<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        r<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> b<span style="color:#f92672">;</span>
        updateHeight<span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
        updateHeight<span style="color:#f92672">(</span>r<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> r<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">updateHeight</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>height<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">),</span> height<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">))</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">rightRotate</span><span style="color:#f92672">(</span>AVLNode r<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        AVLNode a <span style="color:#f92672">=</span> r<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        AVLNode b <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        a<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> r<span style="color:#f92672">;</span>
        r<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> b<span style="color:#f92672">;</span>
        updateHeight<span style="color:#f92672">(</span>r<span style="color:#f92672">);</span>
        updateHeight<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> a<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">leftRightRotate</span><span style="color:#f92672">(</span>AVLNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        AVLNode r <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> leftRotate<span style="color:#f92672">(</span>r<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> rightRotate<span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">rightLeftRotate</span><span style="color:#f92672">(</span>AVLNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        AVLNode r <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> rightRotate<span style="color:#f92672">(</span>r<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> leftRotate<span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> 0 <span style="color:#f92672">:</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>



    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        root <span style="color:#f92672">=</span> doRemove<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">doRemove</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> doRemove<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> doRemove<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                AVLNode s <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    s <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                s<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> doRemove<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">);</span>
                s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
                node <span style="color:#f92672">=</span> s<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        updateHeight<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> balance<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        root <span style="color:#f92672">=</span> doPut<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">doPut</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> AVLNode<span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">==</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> doPut<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> doPut<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        updateHeight<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> balance<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">bf</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> height<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">)</span> <span style="color:#f92672">-</span> height<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> AVLNode <span style="color:#a6e22e">balance</span><span style="color:#f92672">(</span>AVLNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> bf <span style="color:#f92672">=</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bf <span style="color:#f92672">&gt;</span> 1 <span style="color:#f92672">&amp;&amp;</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">)</span> <span style="color:#f92672">&gt;=</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> rightRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bf <span style="color:#f92672">&gt;</span> 1 <span style="color:#f92672">&amp;&amp;</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">)</span> <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> rightLeftRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bf <span style="color:#f92672">&lt;</span> <span style="color:#f92672">-</span>1 <span style="color:#f92672">&amp;&amp;</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">)</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> leftRightRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bf <span style="color:#f92672">&lt;</span> <span style="color:#f92672">-</span>1 <span style="color:#f92672">&amp;&amp;</span> bf<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">)</span> <span style="color:#f92672">&lt;=</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> rightRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="小结-2">
  小结
  <a class="anchor" href="#%e5%b0%8f%e7%bb%93-2">#</a>
</h4>
<p>AVL树的优点：</p>
<ol>
<li>AVL树是一种自平衡树，保证了树的高度平衡，从而保证了树的查询和插入操作的时间复杂度均为O(logn)。</li>
<li>相比于一般二叉搜索树，AVL树对查询效率的提升更为显著，因为其左右子树高度的差值不会超过1，避免了二叉搜索树退化为链表的情况，使得整棵树的高度更低。</li>
<li>AVL树的删除操作比较简单，只需要像插入一样旋转即可，在旋转过程中树的平衡性可以得到维护。</li>
</ol>
<p>AVL树的缺点：</p>
<ol>
<li>AVL树每次插入或删除节点时需要进行旋转操作，这个操作比较耗时，因此在一些应用中不太适用。</li>
<li>在AVL树进行插入或删除操作时，为保持树的平衡需要不断进行旋转操作，在一些高并发环节和大数据量环境下，这可能会导致多余的写锁导致性能瓶颈。</li>
<li>AVL树的旋转操作相对较多，因此在一些应用中可能会造成较大的空间浪费。</li>
</ol>
<h3 id="3-红黑树">
  3) 红黑树
  <a class="anchor" href="#3-%e7%ba%a2%e9%bb%91%e6%a0%91">#</a>
</h3>
<h4 id="历史-2">
  历史
  <a class="anchor" href="#%e5%8e%86%e5%8f%b2-2">#</a>
</h4>
<blockquote>
<p>红黑树是一种自平衡二叉查找树，最早由一位名叫Rudolf Bayer的德国计算机科学家于1972年发明。然而，最初的树形结构不是现在的红黑树，而是一种称为B树的结构，它是一种多叉树，可用于在磁盘上存储大量数据。</p>
<p>在1980年代早期，计算机科学家Leonard Adleman和Daniel Sleator推广了红黑树，并证明了它的自平衡性和高效性。从那时起，红黑树成为了最流行的自平衡二叉查找树之一，并被广泛应用于许多领域，如编译器、操作系统、数据库等。</p>
<p>红黑树的名字来源于红色节点和黑色节点的交替出现，它们的颜色是用来维护树的平衡性的关键。它们的颜色具有特殊的意义，黑色节点代表普通节点，而红色节点代表一个新添加的节点，它们必须满足一些特定的规则才能维持树的平衡性。</p>
</blockquote>
<p>红黑树也是一种自平衡的二叉搜索树，较之 AVL，插入和删除时旋转次数更少</p>
<h4 id="红黑树特性">
  红黑树特性
  <a class="anchor" href="#%e7%ba%a2%e9%bb%91%e6%a0%91%e7%89%b9%e6%80%a7">#</a>
</h4>
<ol>
<li>所有节点都有两种颜色：红:red_circle:、黑:black_circle:</li>
<li>所有 null 视为黑色:black_circle:</li>
<li>红色:red_circle:节点不能相邻</li>
<li>根节点是黑色:black_circle:</li>
<li>从根到任意一个叶子节点，路径中的黑色:black_circle:节点数一样</li>
</ol>
<h4 id="插入情况">
  插入情况
  <a class="anchor" href="#%e6%8f%92%e5%85%a5%e6%83%85%e5%86%b5">#</a>
</h4>
<p>插入节点均视为红色:red_circle:</p>
<p>case 1：插入节点为根节点，将根节点变黑:black_circle:</p>
<p>case 2：插入节点的父亲若为黑色:black_circle:，树的红黑性质不变，无需调整</p>
<p>插入节点的父亲为红色:red_circle:，触发红红相邻</p>
<p>case 3：叔叔为红色:red_circle:</p>
<ul>
<li>
<p>父亲变为黑色:black_circle:，为了保证黑色平衡，连带的叔叔也变为黑色:black_circle:</p>
</li>
<li>
<p>祖父如果是黑色不变，会造成这颗子树黑色过多，因此祖父节点变为红色:red_circle:</p>
</li>
<li>
<p>祖父如果变成红色，可能会接着触发红红相邻，因此对将祖父进行递归调整</p>
</li>
</ul>
<p>case 4：叔叔为黑色:black_circle:</p>
<ol>
<li>父亲为左孩子，插入节点也是左孩子，此时即 LL 不平衡
<ul>
<li>让父亲变黑:black_circle:，为了保证这颗子树黑色不变，将祖父变成红:red_circle:，但叔叔子树少了一个黑色</li>
<li>祖父右旋，补齐一个黑色给叔叔，父亲旋转上去取代祖父，由于它是黑色，不会再次触发红红相邻</li>
</ul>
</li>
<li>父亲为左孩子，插入节点是右孩子，此时即 LR 不平衡
<ul>
<li>父亲左旋，变成 LL 情况，按 1. 来后续处理</li>
</ul>
</li>
<li>父亲为右孩子，插入节点也是右孩子，此时即 RR 不平衡
<ul>
<li>让父亲变黑:black_circle:，为了保证这颗子树黑色不变，将祖父变成红:red_circle:，但叔叔子树少了一个黑色</li>
<li>祖父左旋，补齐一个黑色给叔叔，父亲旋转上去取代祖父，由于它是黑色，不会再次触发红红相邻</li>
</ul>
</li>
<li>父亲为右孩子，插入节点是左孩子，此时即 RL 不平衡
<ul>
<li>父亲右旋，变成 RR 情况，按 3. 来后续处理</li>
</ul>
</li>
</ol>
<h4 id="删除情况">
  删除情况
  <a class="anchor" href="#%e5%88%a0%e9%99%a4%e6%83%85%e5%86%b5">#</a>
</h4>
<p>case0：如果删除节点有两个孩子</p>
<ul>
<li>交换删除节点和后继节点的 key，value，递归删除后继节点，直到该节点没有孩子或只剩一个孩子</li>
</ul>
<p>如果删除节点没有孩子或只剩一个孩子</p>
<p>case 1：删的是根节点</p>
<ul>
<li>删完了，直接将 root = null</li>
<li>用剩余节点替换了根节点的 key，value，根节点孩子 = null，颜色保持黑色:black_circle:不变</li>
</ul>
<p>删黑色会失衡，删红色不会失衡，但删黑色有一种简单情况</p>
<p>case 2：删的是黑:black_circle:，剩下的是红:red_circle:，剩下这个红节点变黑:black_circle:</p>
<p>删除节点和剩下节点都是黑:black_circle:，触发双黑，双黑意思是，<strong>少了一个黑</strong></p>
<p>case 3：被调整节点的兄弟为红:red_circle:，此时两个侄子定为黑 :black_circle:</p>
<ul>
<li>删除节点是左孩子，父亲左旋</li>
<li>删除节点是右孩子，父亲右旋</li>
<li>父亲和兄弟要变色，保证旋转后颜色平衡</li>
<li>旋转的目的是让黑侄子变为删除节点的黑兄弟，对删除节点再次递归，进入 case 4 或 case 5</li>
</ul>
<p>case 4：被调整节点的兄弟为黑:black_circle:，两个侄子都为黑 :black_circle:</p>
<ul>
<li>将兄弟变红:red_circle:，目的是将删除节点和兄弟那边的黑色高度同时减少 1</li>
<li>如果父亲是红:red_circle:，则需将父亲变为黑，避免红红，此时路径黑节点数目不变</li>
<li>如果父亲是黑:black_circle:，说明这条路径还是少黑，再次让父节点触发双黑</li>
</ul>
<p>case 5：被调整节点的兄弟为黑:black_circle:，至少一个红:red_circle:侄子</p>
<ul>
<li>如果兄弟是左孩子，左侄子是红:red_circle:，LL 不平衡
<ul>
<li>将来删除节点这边少个黑，所以最后旋转过来的父亲需要变成黑:black_circle:，平衡起见，左侄子也是黑:black_circle:</li>
<li>原来兄弟要成为父亲，需要保留父亲颜色</li>
</ul>
</li>
<li>如果兄弟是左孩子，右侄子是红:red_circle:，LR 不平衡
<ul>
<li>将来删除节点这边少个黑，所以最后旋转过来的父亲需要变成黑:black_circle:</li>
<li>右侄子会取代原来父亲，因此它保留父亲颜色</li>
<li>兄弟已经是黑了:black_circle:，无需改变</li>
</ul>
</li>
<li>如果兄弟是右孩子，右侄子是红:red_circle:，RR 不平衡
<ul>
<li>将来删除节点这边少个黑，所以最后旋转过来的父亲需要变成黑:black_circle:，平衡起见，右侄子也是黑:black_circle:</li>
<li>原来兄弟要成为父亲，需要保留父亲颜色</li>
</ul>
</li>
<li>如果兄弟是右孩子，左侄子是红:red_circle:，RL 不平衡
<ul>
<li>将来删除节点这边少个黑，所以最后旋转过来的父亲需要变成黑:black_circle:</li>
<li>左侄子会取代原来父亲，因此它保留父亲颜色</li>
<li>兄弟已经是黑了:black_circle:，无需改变</li>
</ul>
</li>
</ul>
<h4 id="完整代码">
  完整代码
  <a class="anchor" href="#%e5%ae%8c%e6%95%b4%e4%bb%a3%e7%a0%81">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.itheima.datastructure.redblacktree<span style="color:#f92672">;</span>

<span style="color:#f92672">import static</span> com.itheima.datastructure.redblacktree.RedBlackTree.Color.BLACK<span style="color:#f92672">;</span>
<span style="color:#f92672">import static</span> com.itheima.datastructure.redblacktree.RedBlackTree.Color.RED<span style="color:#f92672">;</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * &lt;h3&gt;红黑树&lt;/h3&gt;
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RedBlackTree</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">enum</span> Color <span style="color:#f92672">{</span>
        RED<span style="color:#f92672">,</span> BLACK<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    Node root<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> key<span style="color:#f92672">;</span>
        Object value<span style="color:#f92672">;</span>
        Node left<span style="color:#f92672">;</span>
        Node right<span style="color:#f92672">;</span>
        Node parent<span style="color:#f92672">;</span>        <span style="color:#75715e">// 父节点
</span><span style="color:#75715e"></span>        Color color <span style="color:#f92672">=</span> RED<span style="color:#f92672">;</span>  <span style="color:#75715e">// 颜色
</span><span style="color:#75715e"></span>
        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Color color<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> color<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Color color<span style="color:#f92672">,</span> Node left<span style="color:#f92672">,</span> Node right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> color<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                left<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>right <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                right<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// 是否是左孩子
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> parent <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// 叔叔
</span><span style="color:#75715e"></span>        Node <span style="color:#a6e22e">uncle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span><span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span><span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// 兄弟
</span><span style="color:#75715e"></span>        Node <span style="color:#a6e22e">sibling</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 判断红
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isRed</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> node <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">==</span> RED<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 判断黑
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isBlack</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
<span style="color:#75715e">//        return !isRed(node);
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">==</span> BLACK<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 右旋 1. parent 的处理 2. 旋转后新根的父子关系
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">rightRotate</span><span style="color:#f92672">(</span>Node pink<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node parent <span style="color:#f92672">=</span> pink<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span><span style="color:#f92672">;</span>
        Node yellow <span style="color:#f92672">=</span> pink<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        Node green <span style="color:#f92672">=</span> yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>green <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            green<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> pink<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> pink<span style="color:#f92672">;</span>
        yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        pink<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> green<span style="color:#f92672">;</span>
        pink<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> yellow<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            root <span style="color:#f92672">=</span> yellow<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> pink<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> yellow<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> yellow<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 左旋
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">leftRotate</span><span style="color:#f92672">(</span>Node pink<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node parent <span style="color:#f92672">=</span> pink<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span><span style="color:#f92672">;</span>
        Node yellow <span style="color:#f92672">=</span> pink<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        Node green <span style="color:#f92672">=</span> yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>green <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            green<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> pink<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> pink<span style="color:#f92672">;</span>
        yellow<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        pink<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> green<span style="color:#f92672">;</span>
        pink<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> yellow<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            root <span style="color:#f92672">=</span> yellow<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> pink<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> yellow<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> yellow<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 新增或更新
</span><span style="color:#75715e">     * &lt;br&gt;
</span><span style="color:#75715e">     * 正常增、遇到红红不平衡进行调整
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param key   键
</span><span style="color:#75715e">     * @param value 值
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
        Node parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            parent <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span> <span style="color:#75715e">// 更新
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        Node inserted <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            root <span style="color:#f92672">=</span> inserted<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> inserted<span style="color:#f92672">;</span>
            inserted<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> inserted<span style="color:#f92672">;</span>
            inserted<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        fixRedRed<span style="color:#f92672">(</span>inserted<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fixRedRed</span><span style="color:#f92672">(</span>Node x<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// case 1 插入节点是根节点，变黑即可
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>x <span style="color:#f92672">==</span> root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            x<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// case 2 插入节点父亲是黑色，无需调整
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isBlack<span style="color:#f92672">(</span>x<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/* case 3 当红红相邻，叔叔为红时
</span><span style="color:#75715e">            需要将父亲、叔叔变黑、祖父变红，然后对祖父做递归处理
</span><span style="color:#75715e">        */</span>
        Node parent <span style="color:#f92672">=</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span><span style="color:#f92672">;</span>
        Node uncle <span style="color:#f92672">=</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">uncle</span><span style="color:#f92672">();</span>
        Node grandparent <span style="color:#f92672">=</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isRed<span style="color:#f92672">(</span>uncle<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
            uncle<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
            grandparent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> RED<span style="color:#f92672">;</span>
            fixRedRed<span style="color:#f92672">(</span>grandparent<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// case 4 当红红相邻，叔叔为黑时
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// LL
</span><span style="color:#75715e"></span>            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
            grandparent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> RED<span style="color:#f92672">;</span>
            rightRotate<span style="color:#f92672">(</span>grandparent<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// LR
</span><span style="color:#75715e"></span>            leftRotate<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
            x<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
            grandparent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> RED<span style="color:#f92672">;</span>
            rightRotate<span style="color:#f92672">(</span>grandparent<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>x<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// RR
</span><span style="color:#75715e"></span>            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
            grandparent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> RED<span style="color:#f92672">;</span>
            leftRotate<span style="color:#f92672">(</span>grandparent<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// RL
</span><span style="color:#75715e"></span>            rightRotate<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
            x<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
            grandparent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> RED<span style="color:#f92672">;</span>
            leftRotate<span style="color:#f92672">(</span>grandparent<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 删除
</span><span style="color:#75715e">     * &lt;br&gt;
</span><span style="color:#75715e">     * 正常删、会用到李代桃僵技巧、遇到黑黑不平衡进行调整
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param key 键
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node deleted <span style="color:#f92672">=</span> find<span style="color:#f92672">(</span>key<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        doRemove<span style="color:#f92672">(</span>deleted<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> find<span style="color:#f92672">(</span>key<span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 查找删除节点
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> Node <span style="color:#a6e22e">find</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 查找剩余节点
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> Node <span style="color:#a6e22e">findReplaced</span><span style="color:#f92672">(</span>Node deleted<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node s <span style="color:#f92672">=</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            s <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> s<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 处理双黑 (case3、case4、case5)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fixDoubleBlack</span><span style="color:#f92672">(</span>Node x<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>x <span style="color:#f92672">==</span> root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node parent <span style="color:#f92672">=</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span><span style="color:#f92672">;</span>
        Node sibling <span style="color:#f92672">=</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">sibling</span><span style="color:#f92672">();</span>
        <span style="color:#75715e">// case 3 兄弟节点是红色
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isRed<span style="color:#f92672">(</span>sibling<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>x<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                leftRotate<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                rightRotate<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> RED<span style="color:#f92672">;</span>
            sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
            fixDoubleBlack<span style="color:#f92672">(</span>x<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sibling <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// case 4 兄弟是黑色, 两个侄子也是黑色
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isBlack<span style="color:#f92672">(</span>sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> isBlack<span style="color:#f92672">(</span>sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> RED<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isRed<span style="color:#f92672">(</span>parent<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                    parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    fixDoubleBlack<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            <span style="color:#75715e">// case 5 兄弟是黑色, 侄子有红色
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// LL
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> isRed<span style="color:#f92672">(</span>sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                    rightRotate<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
                    sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
                    sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#75715e">// LR
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> isRed<span style="color:#f92672">(</span>sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                    sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">;</span>
                    leftRotate<span style="color:#f92672">(</span>sibling<span style="color:#f92672">);</span>
                    rightRotate<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                <span style="color:#75715e">// RL
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> isRed<span style="color:#f92672">(</span>sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                    sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">;</span>
                    rightRotate<span style="color:#f92672">(</span>sibling<span style="color:#f92672">);</span>
                    leftRotate<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                <span style="color:#75715e">// RR
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    leftRotate<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
                    sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
                    sibling<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                parent<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// @TODO 实际也不会出现，触发双黑后，兄弟节点不会为 null
</span><span style="color:#75715e"></span>            fixDoubleBlack<span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doRemove</span><span style="color:#f92672">(</span>Node deleted<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node replaced <span style="color:#f92672">=</span> findReplaced<span style="color:#f92672">(</span>deleted<span style="color:#f92672">);</span>
        Node parent <span style="color:#f92672">=</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">// 没有孩子
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>replaced <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// case 1 删除的是根节点
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted <span style="color:#f92672">==</span> root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                root <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isBlack<span style="color:#f92672">(</span>deleted<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                    <span style="color:#75715e">// 双黑调整
</span><span style="color:#75715e"></span>                    fixDoubleBlack<span style="color:#f92672">(</span>deleted<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    <span style="color:#75715e">// 红色叶子, 无需任何处理
</span><span style="color:#75715e"></span>                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                    parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    parent<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 有一个孩子
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// case 1 删除的是根节点
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted <span style="color:#f92672">==</span> root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                root<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> replaced<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">;</span>
                root<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> replaced<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
                root<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> root<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">isLeftChild</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                    parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> replaced<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    parent<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> replaced<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                replaced<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
                deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isBlack<span style="color:#f92672">(</span>deleted<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> isBlack<span style="color:#f92672">(</span>replaced<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                    <span style="color:#75715e">// @TODO 实际不会有这种情况 因为只有一个孩子时 被删除节点是黑色 那么剩余节点只能是红色不会触发双黑
</span><span style="color:#75715e"></span>                    fixDoubleBlack<span style="color:#f92672">(</span>replaced<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    <span style="color:#75715e">// case 2 删除是黑，剩下是红
</span><span style="color:#75715e"></span>                    replaced<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> BLACK<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// case 0 有两个孩子 =&gt; 有一个孩子 或 没有孩子
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">;</span>
        deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> replaced<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">;</span>
        replaced<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>

        Object v <span style="color:#f92672">=</span> deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
        deleted<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> replaced<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
        replaced<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> v<span style="color:#f92672">;</span>
        doRemove<span style="color:#f92672">(</span>replaced<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>以上代码中的 TODO 未作改正</li>
</ul>
<h4 id="小结-3">
  小结
  <a class="anchor" href="#%e5%b0%8f%e7%bb%93-3">#</a>
</h4>
<table>
<thead>
<tr>
<th>维度</th>
<th>普通二叉搜索树</th>
<th>AVL树</th>
<th>红黑树</th>
</tr>
</thead>
<tbody>
<tr>
<td>查询</td>
<td>平均O(logn)，最坏O(n)</td>
<td>O(logn)</td>
<td>O(logn)</td>
</tr>
<tr>
<td>插入</td>
<td>平均O(logn)，最坏O(n)</td>
<td>O(logn)</td>
<td>O(logn)</td>
</tr>
<tr>
<td>删除</td>
<td>平均O(logn)，最坏O(n)</td>
<td>O(logn)</td>
<td>O(logn)</td>
</tr>
<tr>
<td>平衡性</td>
<td>不平衡</td>
<td>严格平衡</td>
<td>近似平衡</td>
</tr>
<tr>
<td>结构</td>
<td>二叉树</td>
<td>自平衡的二叉树</td>
<td>具有红黑性质的自平衡二叉树</td>
</tr>
<tr>
<td>查找效率</td>
<td>低</td>
<td>高</td>
<td>高</td>
</tr>
<tr>
<td>插入删除效率</td>
<td>低</td>
<td>中等</td>
<td>高</td>
</tr>
</tbody>
</table>
<p>普通二叉搜索树插入、删除、查询的时间复杂度与树的高度相关，因此在最坏情况下，时间复杂度为O(n)，而且容易退化成链表，查找效率低。</p>
<p>AVL树是一种高度平衡的二叉搜索树，其左右子树的高度差不超过1。因此，它能够在logn的平均时间内完成插入、删除、查询操作，但是在维护平衡的过程中，需要频繁地进行旋转操作，导致插入删除效率较低。</p>
<p>红黑树是一种近似平衡的二叉搜索树，它在保持高度平衡的同时，又能够保持较高的插入删除效率。红黑树通过节点着色和旋转操作来维护平衡。红黑树在维护平衡的过程中，能够进行较少的节点旋转操作，因此插入删除效率较高，并且查询效率也较高。</p>
<p>综上所述，红黑树具有较高的综合性能，是一种广泛应用的数据结构。</p>
<h3 id="4-b-树">
  4) B 树
  <a class="anchor" href="#4-b-%e6%a0%91">#</a>
</h3>
<p>ai 问题列表</p>
<p>请用中文回答：B-树历史</p>
<p>请用中文回答：100万的数据使用 avl 树来存储，树高是多少?</p>
<p>请用中文回答：100万的数据，如果存储到B-树(最小度数是500)，那么树高大约是多少?</p>
<p>请用中文回答：B-树的特性有哪些？</p>
<h4 id="历史-3">
  历史
  <a class="anchor" href="#%e5%8e%86%e5%8f%b2-3">#</a>
</h4>
<blockquote>
<p>B树（B-Tree）结构是一种高效存储和查询数据的方法，它的历史可以追溯到1970年代早期。B树的发明人Rudolf Bayer和Edward M. McCreight分别发表了一篇论文介绍了B树。这篇论文是1972年发表于《ACM Transactions on Database Systems》中的，题目为&quot;Organization and Maintenance of Large Ordered Indexes&quot;。</p>
<p>这篇论文提出了一种能够高效地维护大型有序索引的方法，这种方法的主要思想是将每个节点扩展成多个子节点，以减少查找所需的次数。B树结构非常适合应用于磁盘等大型存储器的高效操作，被广泛应用于关系数据库和文件系统中。</p>
<p>B树结构有很多变种和升级版，例如B+树，B*树和SB树等。这些变种和升级版本都基于B树的核心思想，通过调整B树的参数和结构，提高了B树在不同场景下的性能表现。</p>
<p>总的来说，B树结构是一个非常重要的数据结构，为高效存储和查询大量数据提供了可靠的方法。它的历史可以追溯到上个世纪70年代，而且在今天仍然被广泛应用于各种场景。</p>
</blockquote>
<h4 id="b-的含义">
  B 的含义
  <a class="anchor" href="#b-%e7%9a%84%e5%90%ab%e4%b9%89">#</a>
</h4>
<blockquote>
<p>B-树的名称是由其发明者Rudolf  Bayer提出的。Bayer和McCreight从未解释B代表什么，人们提出了许多可能的解释，比如Boeing、balanced、between、broad、bushy和Bayer等。但McCreight表示，越是思考B-trees中的B代表什么，就越能更好地理解B-trees</p>
</blockquote>
<h4 id="特性-1">
  特性
  <a class="anchor" href="#%e7%89%b9%e6%80%a7-1">#</a>
</h4>
<p>一棵 B-树具有以下性质</p>
<p>特性1：每个节点 x 具有</p>
<ul>
<li>属性 n，表示节点 x 中 key 的个数</li>
<li>属性 leaf，表示节点是否是叶子节点</li>
<li>节点 key 可以有多个，以升序存储</li>
</ul>
<p>特性2：每个非叶子节点中的孩子数是 n + 1、叶子节点没有孩子</p>
<p>特性3：最小度数t（节点的孩子数称为度）和节点中键数量的关系如下：</p>
<table>
<thead>
<tr>
<th>最小度数t</th>
<th>键数量范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>1 ~ 3</td>
</tr>
<tr>
<td>3</td>
<td>2 ~ 5</td>
</tr>
<tr>
<td>4</td>
<td>3 ~ 7</td>
</tr>
<tr>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
<tr>
<td>n</td>
<td>(n-1) ~ (2n-1)</td>
</tr>
</tbody>
</table>
<p>其中，当节点中键数量达到其最大值时，即 3、5、7 &hellip; 2n-1，需要分裂</p>
<p>特性4：叶子节点的深度都相同</p>
<blockquote>
<p>问：</p>
<p>B-树为什么有最小度数的限制？</p>
<p>答：</p>
<p>B树中有最小度数的限制是为了保证B树的平衡特性。</p>
<p>在B树中，每个节点都可以有多个子节点，这使得B树可以存储大量的键值，但也带来了一些问题。如果节点的子节点数量太少，那么就可能导致B树的高度过高，从而降低了B树的效率。此外，如果节点的子节点数量太多，那么就可能导致节点的搜索、插入和删除操作变得复杂和低效。</p>
<p>最小度数的限制通过限制节点的子节点数量，来平衡这些问题。在B树中，每个节点的子节点数量都必须在一定的范围内，即t到2t之间（其中t为最小度数）</p>
</blockquote>
<h4 id="定义节点-1">
  定义节点
  <a class="anchor" href="#%e5%ae%9a%e4%b9%89%e8%8a%82%e7%82%b9-1">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">boolean</span> leaf <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> keyNumber<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> t<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> keys<span style="color:#f92672">;</span>
    Node<span style="color:#f92672">[]</span> children<span style="color:#f92672">;</span>    

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">t</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>2 <span style="color:#f92672">*</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">children</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">[</span>2 <span style="color:#f92672">*</span> t<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>keys<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> keyNumber<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>leaf 表示是否为叶子节点</li>
<li>keyNumber 为 keys 中有效 key 数目</li>
<li>t 为最小度数，它决定了节点中key 的最小、最大数目，分别是 t-1 和 2t-1</li>
<li>keys 存储此节点的 key</li>
<li>children 存储此节点的 child</li>
<li>toString 只是为了方便调试和测试，非必须</li>
</ul>
<blockquote>
<p>实际 keys 应当改为 entries 以便同时保存 key 和 value，刚开始简化实现</p>
</blockquote>
<h4 id="多路查找">
  多路查找
  <a class="anchor" href="#%e5%a4%9a%e8%b7%af%e6%9f%a5%e6%89%be">#</a>
</h4>
<p>为上面节点类添加 get 方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Node <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> keyNumber <span style="color:#f92672">&amp;&amp;</span> keys<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        i<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> keyNumber <span style="color:#f92672">&amp;&amp;</span> keys<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>leaf<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> children<span style="color:#f92672">[</span>i<span style="color:#f92672">].</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>key<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="插入-key-和-child">
  插入 key 和 child
  <a class="anchor" href="#%e6%8f%92%e5%85%a5-key-%e5%92%8c-child">#</a>
</h4>
<p>为上面节点类添加 insertKey 和 insertChild 方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insertKey</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>keys<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> keys<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> keyNumber <span style="color:#f92672">-</span> index<span style="color:#f92672">);</span>
    keys<span style="color:#f92672">[</span>index<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
    keyNumber<span style="color:#f92672">++;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insertChild</span><span style="color:#f92672">(</span>Node child<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>children<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> children<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> keyNumber <span style="color:#f92672">-</span> index<span style="color:#f92672">);</span>
    children<span style="color:#f92672">[</span>index<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> child<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>作用是向 keys 数组或 children 数组指定 index 处插入新数据，注意</p>
<ul>
<li>由于使用了静态数组，并且不会在新增或删除时改变它的大小，因此需要额外的 keyNumber 来指定数组内有效 key 的数目
<ul>
<li>插入时 keyNumber++</li>
<li>删除时减少  keyNumber 的值即可</li>
</ul>
</li>
<li>children 不会单独维护数目，它比 keys 多一个</li>
<li>如果这两个方法同时调用，注意它们的先后顺序，insertChild 后调用，因为它计算复制元素个数时用到了 keyNumber</li>
</ul>
<h4 id="定义树">
  定义树
  <a class="anchor" href="#%e5%ae%9a%e4%b9%89%e6%a0%91">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BTree</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> t<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> MIN_KEY_NUMBER<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> MAX_KEY_NUMBER<span style="color:#f92672">;</span>
    Node root<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BTree</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">(</span>2<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BTree</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">t</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
        MIN_KEY_NUMBER <span style="color:#f92672">=</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        MAX_KEY_NUMBER <span style="color:#f92672">=</span> 2 <span style="color:#f92672">*</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>t<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="插入">
  插入
  <a class="anchor" href="#%e6%8f%92%e5%85%a5">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    doPut<span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> root<span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doPut</span><span style="color:#f92672">(</span>Node parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> Node node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">&amp;&amp;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        i<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">&amp;&amp;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">insertKey</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        doPut<span style="color:#f92672">(</span>node<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>i<span style="color:#f92672">],</span> key<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">(</span>node<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
        split<span style="color:#f92672">(</span>parent<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> node<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>首先查找本节点中的插入位置 i，如果没有空位（key 被找到），应该走更新的逻辑，目前什么没做</li>
<li>接下来分两种情况
<ul>
<li>如果节点是叶子节点，可以直接插入了</li>
<li>如果节点是非叶子节点，需要继续在 children[i] 处继续递归插入</li>
</ul>
</li>
<li>无论哪种情况，插入完成后都可能超过节点 keys 数目限制，此时应当执行节点分裂
<ul>
<li>参数中的 parent 和 index 都是给分裂方法用的，代表当前节点父节点，和分裂节点是第几个孩子</li>
</ul>
</li>
</ul>
<p>判断依据为：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">==</span> MAX_KEY_NUMBER<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="分裂">
  分裂
  <a class="anchor" href="#%e5%88%86%e8%a3%82">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">split</span><span style="color:#f92672">(</span>Node parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index <span style="color:#f92672">,</span> Node left<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node newRoot <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">t</span><span style="color:#f92672">);</span>
        newRoot<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        newRoot<span style="color:#f92672">.</span><span style="color:#a6e22e">insertChild</span><span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> 0<span style="color:#f92672">);</span>
        root <span style="color:#f92672">=</span> newRoot<span style="color:#f92672">;</span>
        parent <span style="color:#f92672">=</span> newRoot<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    Node right <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">t</span><span style="color:#f92672">);</span>
    right<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span> <span style="color:#f92672">=</span> left<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">;</span>
    right<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">=</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">,</span> t<span style="color:#f92672">,</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">,</span> t<span style="color:#f92672">,</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> t<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    left<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">=</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> mid <span style="color:#f92672">=</span> left<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>t <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
    parent<span style="color:#f92672">.</span><span style="color:#a6e22e">insertKey</span><span style="color:#f92672">(</span>mid<span style="color:#f92672">,</span> index<span style="color:#f92672">);</span>
    parent<span style="color:#f92672">.</span><span style="color:#a6e22e">insertChild</span><span style="color:#f92672">(</span>right<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>分两种情况：</p>
<ul>
<li>如果 parent == null 表示要分裂的是根节点，此时需要创建新根，原来的根节点作为新根的 0 孩子</li>
<li>否则
<ul>
<li>创建 right 节点（分裂后大于当前 left 节点的），把 t 以后的 key 和 child 都拷贝过去</li>
<li>t-1 处的 key 插入到 parent 的 index 处，index 指 left 作为孩子时的索引</li>
<li>right 节点作为 parent 的孩子插入到 index + 1 处</li>
</ul>
</li>
</ul>
<h4 id="删除-2">
  删除
  <a class="anchor" href="#%e5%88%a0%e9%99%a4-2">#</a>
</h4>
<p>case 1：当前节点是叶子节点，没找到</p>
<p>case 2：当前节点是叶子节点，找到了</p>
<p>case 3：当前节点是非叶子节点，没找到</p>
<p>case 4：当前节点是非叶子节点，找到了</p>
<p>case 5：删除后 key 数目 &lt; 下限（不平衡）</p>
<p>case 6：根节点</p>
<h4 id="完整代码-1">
  完整代码
  <a class="anchor" href="#%e5%ae%8c%e6%95%b4%e4%bb%a3%e7%a0%81-1">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.itheima.algorithm.btree<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.Arrays<span style="color:#f92672">;</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * &lt;h3&gt;B-树&lt;/h3&gt;
</span><span style="color:#75715e"> */</span>
<span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;all&#34;</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BTree</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> keys<span style="color:#f92672">;</span> <span style="color:#75715e">// 关键字
</span><span style="color:#75715e"></span>        Node<span style="color:#f92672">[]</span> children<span style="color:#f92672">;</span> <span style="color:#75715e">// 孩子
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> keyNumber<span style="color:#f92672">;</span> <span style="color:#75715e">// 有效关键字数目
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">boolean</span> leaf <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 是否是叶子节点
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> t<span style="color:#f92672">;</span> <span style="color:#75715e">// 最小度数 (最小孩子数)
</span><span style="color:#75715e"></span>
        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// t&gt;=2
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">t</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">children</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">[</span>2 <span style="color:#f92672">*</span> t<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>2 <span style="color:#f92672">*</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> keys<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span> <span style="color:#f92672">=</span> keys<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#a6e22e">@Override</span>
        <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>keys<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> keyNumber<span style="color:#f92672">));</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// 多路查找
</span><span style="color:#75715e"></span>        Node <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> keyNumber<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>keys<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>keys<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                i<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#75715e">// 执行到此时 keys[i]&gt;key 或 i==keyNumber
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>leaf<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#75715e">// 非叶子情况
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> children<span style="color:#f92672">[</span>i<span style="color:#f92672">].</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>key<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// 向 keys 指定索引处插入 key
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insertKey</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>keys<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> keys<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> keyNumber <span style="color:#f92672">-</span> index<span style="color:#f92672">);</span>
            keys<span style="color:#f92672">[</span>index<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            keyNumber<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// 向 children 指定索引处插入 child
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insertChild</span><span style="color:#f92672">(</span>Node child<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>children<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> children<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> keyNumber <span style="color:#f92672">-</span> index<span style="color:#f92672">);</span>
            children<span style="color:#f92672">[</span>index<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> child<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">removeKey</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> keys<span style="color:#f92672">[</span>index<span style="color:#f92672">];</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>keys<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> keys<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> <span style="color:#f92672">--</span>keyNumber <span style="color:#f92672">-</span> index<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">return</span> t<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">removeLeftmostKey</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> removeKey<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">removeRightmostKey</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> removeKey<span style="color:#f92672">(</span>keyNumber <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        Node <span style="color:#a6e22e">removeChild</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            Node t <span style="color:#f92672">=</span> children<span style="color:#f92672">[</span>index<span style="color:#f92672">];</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>children<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> children<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> keyNumber <span style="color:#f92672">-</span> index<span style="color:#f92672">);</span>
            children<span style="color:#f92672">[</span>keyNumber<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">return</span> t<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        Node <span style="color:#a6e22e">removeLeftmostChild</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> removeChild<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        Node <span style="color:#a6e22e">removeRightmostChild</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> removeChild<span style="color:#f92672">(</span>keyNumber<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">moveToLeft</span><span style="color:#f92672">(</span>Node left<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> start <span style="color:#f92672">=</span> left<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>leaf<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;=</span> keyNumber<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
                    left<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>start <span style="color:#f92672">+</span> i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> children<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> keyNumber<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
                left<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span><span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> keys<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

        Node <span style="color:#a6e22e">leftSibling</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> index <span style="color:#f92672">&gt;</span> 0 <span style="color:#f92672">?</span> children<span style="color:#f92672">[</span>index <span style="color:#f92672">-</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        Node <span style="color:#a6e22e">rightSibling</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> index <span style="color:#f92672">==</span> keyNumber <span style="color:#f92672">?</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">:</span> children<span style="color:#f92672">[</span>index <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    Node root<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">int</span> t<span style="color:#f92672">;</span> <span style="color:#75715e">// 树中节点最小度数
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> MIN_KEY_NUMBER<span style="color:#f92672">;</span> <span style="color:#75715e">// 最小key数目
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> MAX_KEY_NUMBER<span style="color:#f92672">;</span> <span style="color:#75715e">// 最大key数目
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BTree</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">(</span>2<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BTree</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">t</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
        root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>t<span style="color:#f92672">);</span>
        MAX_KEY_NUMBER <span style="color:#f92672">=</span> 2 <span style="color:#f92672">*</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        MIN_KEY_NUMBER <span style="color:#f92672">=</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 1. 是否存在
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> root<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>key<span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 2. 新增
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        doPut<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> 0<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doPut</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Node parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 更新
</span><span style="color:#75715e"></span>            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 找到了插入位置，即为此时的 i
</span><span style="color:#75715e"></span>            <span style="color:#f92672">}</span>
            i<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">insertKey</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            doPut<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>i<span style="color:#f92672">],</span> key<span style="color:#f92672">,</span> node<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">==</span> MAX_KEY_NUMBER<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            split<span style="color:#f92672">(</span>node<span style="color:#f92672">,</span> parent<span style="color:#f92672">,</span> index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * &lt;h3&gt;分裂方法&lt;/h3&gt;
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param left   要分裂的节点
</span><span style="color:#75715e">     * @param parent 分裂节点的父节点
</span><span style="color:#75715e">     * @param index  分裂节点是第几个孩子
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">split</span><span style="color:#f92672">(</span>Node left<span style="color:#f92672">,</span> Node parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 分裂的是根节点
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            Node newRoot <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>t<span style="color:#f92672">);</span>
            newRoot<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
            newRoot<span style="color:#f92672">.</span><span style="color:#a6e22e">insertChild</span><span style="color:#f92672">(</span>left<span style="color:#f92672">,</span> 0<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">root</span> <span style="color:#f92672">=</span> newRoot<span style="color:#f92672">;</span>
            parent <span style="color:#f92672">=</span> newRoot<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 1. 创建 right 节点，把 left 中 t 之后的 key 和 child 移动过去
</span><span style="color:#75715e"></span>        Node right <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>t<span style="color:#f92672">);</span>
        right<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span> <span style="color:#f92672">=</span> left<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">;</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">,</span> t<span style="color:#f92672">,</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#75715e">// 分裂节点是非叶子的情况
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">,</span> t<span style="color:#f92672">,</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> t<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;=</span> left<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
                left<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        right<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">=</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        left<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">=</span> t <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#75715e">// 2. 中间的 key （t-1 处）插入到父节点
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> mid <span style="color:#f92672">=</span> left<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>t <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
        parent<span style="color:#f92672">.</span><span style="color:#a6e22e">insertKey</span><span style="color:#f92672">(</span>mid<span style="color:#f92672">,</span> index<span style="color:#f92672">);</span>
        <span style="color:#75715e">// 3. right 节点作为父节点的孩子
</span><span style="color:#75715e"></span>        parent<span style="color:#f92672">.</span><span style="color:#a6e22e">insertChild</span><span style="color:#f92672">(</span>right<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 3. 删除
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        doRemove<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> 0<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doRemove</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> Node parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;=</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            i<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>notFound<span style="color:#f92672">(</span>node<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> i<span style="color:#f92672">))</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// case 1
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">removeKey</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>  <span style="color:#75715e">// case 2
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>notFound<span style="color:#f92672">(</span>node<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> i<span style="color:#f92672">))</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// case 3
</span><span style="color:#75715e"></span>                doRemove<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>i<span style="color:#f92672">],</span> key<span style="color:#f92672">,</span> node<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// case 4
</span><span style="color:#75715e"></span>                Node s <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
                <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    s <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
                node<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> k<span style="color:#f92672">;</span>
                doRemove<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">],</span> k<span style="color:#f92672">,</span> node<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">&lt;</span> MIN_KEY_NUMBER<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// case 5
</span><span style="color:#75715e"></span>            balance<span style="color:#f92672">(</span>node<span style="color:#f92672">,</span> parent<span style="color:#f92672">,</span> index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">notFound</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> i <span style="color:#f92672">&gt;=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">||</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">&amp;&amp;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">!=</span> key<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">balance</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">,</span> Node parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>root<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">==</span> 0 <span style="color:#f92672">&amp;&amp;</span> root<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                root <span style="color:#f92672">=</span> root<span style="color:#f92672">.</span><span style="color:#a6e22e">children</span><span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node leftSibling <span style="color:#f92672">=</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">leftSibling</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        Node rightSibling <span style="color:#f92672">=</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">rightSibling</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>leftSibling <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> leftSibling<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">&gt;</span> MIN_KEY_NUMBER<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            rightRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">,</span> leftSibling<span style="color:#f92672">,</span> parent<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>rightSibling <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> rightSibling<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">&gt;</span> MIN_KEY_NUMBER<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            leftRotate<span style="color:#f92672">(</span>node<span style="color:#f92672">,</span> rightSibling<span style="color:#f92672">,</span> parent<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>leftSibling <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            mergeToLeft<span style="color:#f92672">(</span>leftSibling<span style="color:#f92672">,</span> parent<span style="color:#f92672">,</span> i <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            mergeToLeft<span style="color:#f92672">(</span>node<span style="color:#f92672">,</span> parent<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>


    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mergeToLeft</span><span style="color:#f92672">(</span>Node left<span style="color:#f92672">,</span> Node parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node right <span style="color:#f92672">=</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">removeChild</span><span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        left<span style="color:#f92672">.</span><span style="color:#a6e22e">insertKey</span><span style="color:#f92672">(</span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">removeKey</span><span style="color:#f92672">(</span>i<span style="color:#f92672">),</span> left<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span><span style="color:#f92672">);</span>
        right<span style="color:#f92672">.</span><span style="color:#a6e22e">moveToLeft</span><span style="color:#f92672">(</span>left<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">rightRotate</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">,</span> Node leftSibling<span style="color:#f92672">,</span> Node parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">insertKey</span><span style="color:#f92672">(</span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">],</span> 0<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>leftSibling<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">insertChild</span><span style="color:#f92672">(</span>leftSibling<span style="color:#f92672">.</span><span style="color:#a6e22e">removeRightmostChild</span><span style="color:#f92672">(),</span> 0<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        parent<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> leftSibling<span style="color:#f92672">.</span><span style="color:#a6e22e">removeRightmostKey</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">leftRotate</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">,</span> Node rightSibling<span style="color:#f92672">,</span> Node parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">insertKey</span><span style="color:#f92672">(</span>parent<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i<span style="color:#f92672">],</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>rightSibling<span style="color:#f92672">.</span><span style="color:#a6e22e">leaf</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">insertChild</span><span style="color:#f92672">(</span>rightSibling<span style="color:#f92672">.</span><span style="color:#a6e22e">removeLeftmostChild</span><span style="color:#f92672">(),</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">keyNumber</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        parent<span style="color:#f92672">.</span><span style="color:#a6e22e">keys</span><span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> rightSibling<span style="color:#f92672">.</span><span style="color:#a6e22e">removeLeftmostKey</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="b-树与-2-3-树2-3-4-树的关系">
  B-树与 2-3 树、2-3-4 树的关系
  <a class="anchor" href="#b-%e6%a0%91%e4%b8%8e-2-3-%e6%a0%912-3-4-%e6%a0%91%e7%9a%84%e5%85%b3%e7%b3%bb">#</a>
</h4>
<p>可以这样总结它们之间的关系：</p>
<ol>
<li>2-3树是最小度数为2的B树，其中每个节点可以包含2个或3个子节点。</li>
<li>2-3-4树是最小度数为2的B树的一种特殊情况，其中每个节点可以包含2个、3个或4个子节点。</li>
<li>B树是一种更加一般化的平衡树，可以适应不同的应用场景，其节点可以包含任意数量的键值，节点的度数取决于最小度数t的设定。</li>
</ol>
<h3 id="5-哈希表">
  5) 哈希表
  <a class="anchor" href="#5-%e5%93%88%e5%b8%8c%e8%a1%a8">#</a>
</h3>
<h4 id="第一版">
  第一版
  <a class="anchor" href="#%e7%ac%ac%e4%b8%80%e7%89%88">#</a>
</h4>
<p>未考虑 hash 码的生成，假定该 hash 码由我们提供</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HashTable</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">// 节点类
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Entry</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> hash<span style="color:#f92672">;</span> <span style="color:#75715e">// 哈希码
</span><span style="color:#75715e"></span>        Object key<span style="color:#f92672">;</span> <span style="color:#75715e">// 键
</span><span style="color:#75715e"></span>        Object value<span style="color:#f92672">;</span> <span style="color:#75715e">// 值
</span><span style="color:#75715e"></span>        Entry next<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Entry</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> hash<span style="color:#f92672">,</span> Object key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">hash</span> <span style="color:#f92672">=</span> hash<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    Entry<span style="color:#f92672">[]</span> table <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Entry<span style="color:#f92672">[</span>16<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> <span style="color:#75715e">// 元素个数
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">float</span> loadFactor <span style="color:#f92672">=</span> 0<span style="color:#f92672">.</span><span style="color:#a6e22e">75f</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 12 阈值
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> threshold <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>loadFactor <span style="color:#f92672">*</span> table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>

    <span style="color:#75715e">/* 求模运算替换为位运算
</span><span style="color:#75715e">        - 前提：数组长度是 2 的 n 次方
</span><span style="color:#75715e">        - hash % 数组长度 等价于 hash &amp; (数组长度-1)
</span><span style="color:#75715e">     */</span>

    <span style="color:#75715e">// 根据 hash 码获取 value
</span><span style="color:#75715e"></span>    Object <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> hash<span style="color:#f92672">,</span> Object key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> idx <span style="color:#f92672">=</span> hash <span style="color:#f92672">&amp;</span> <span style="color:#f92672">(</span>table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>table<span style="color:#f92672">[</span>idx<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Entry p <span style="color:#f92672">=</span> table<span style="color:#f92672">[</span>idx<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>key<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 向 hash 表存入新 key value，如果 key 重复，则更新 value
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> hash<span style="color:#f92672">,</span> Object key<span style="color:#f92672">,</span> Object value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> idx <span style="color:#f92672">=</span> hash <span style="color:#f92672">&amp;</span> <span style="color:#f92672">(</span>table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>table<span style="color:#f92672">[</span>idx<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 1. idx 处有空位, 直接新增
</span><span style="color:#75715e"></span>            table<span style="color:#f92672">[</span>idx<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Entry<span style="color:#f92672">(</span>hash<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 2. idx 处无空位, 沿链表查找 有重复key更新，否则新增
</span><span style="color:#75715e"></span>            Entry p <span style="color:#f92672">=</span> table<span style="color:#f92672">[</span>idx<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>key<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                    p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span> <span style="color:#75715e">// 更新
</span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Entry<span style="color:#f92672">(</span>hash<span style="color:#f92672">,</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span> <span style="color:#75715e">// 新增
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
        size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">&gt;</span> threshold<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            resize<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">resize</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Entry<span style="color:#f92672">[]</span> newTable <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Entry<span style="color:#f92672">[</span>table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&lt;&lt;</span> 1<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            Entry p <span style="color:#f92672">=</span> table<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span> <span style="color:#75715e">// 拿到每个链表头
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">/*
</span><span style="color:#75715e">                拆分链表，移动到新数组，拆分规律
</span><span style="color:#75715e">                * 一个链表最多拆成两个
</span><span style="color:#75715e">                * hash &amp; table.length == 0 的一组
</span><span style="color:#75715e">                * hash &amp; table.length != 0 的一组
</span><span style="color:#75715e">                                          p
</span><span style="color:#75715e">                0-&gt;8-&gt;16-&gt;24-&gt;32-&gt;40-&gt;48-&gt;null
</span><span style="color:#75715e">                            a
</span><span style="color:#75715e">                0-&gt;16-&gt;32-&gt;48-&gt;null
</span><span style="color:#75715e">                        b
</span><span style="color:#75715e">                8-&gt;24-&gt;40-&gt;null
</span><span style="color:#75715e">             */</span>
                Entry a <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                Entry b <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                Entry aHead <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                Entry bHead <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">if</span> <span style="color:#f92672">((</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">hash</span> <span style="color:#f92672">&amp;</span> table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                            a<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                            aHead <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                        a <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span> <span style="color:#75715e">// 分配到a
</span><span style="color:#75715e"></span>                    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>b <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                            b<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                            bHead <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                        b <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span> <span style="color:#75715e">// 分配到b
</span><span style="color:#75715e"></span>                    <span style="color:#f92672">}</span>
                    p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#75715e">// 规律： a 链表保持索引位置不变，b 链表索引位置+table.length
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    a<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                    newTable<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> aHead<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>b <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    b<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                    newTable<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> bHead<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        table <span style="color:#f92672">=</span> newTable<span style="color:#f92672">;</span>
        threshold <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> <span style="color:#f92672">(</span>loadFactor <span style="color:#f92672">*</span> table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 根据 hash 码删除，返回删除的 value
</span><span style="color:#75715e"></span>    Object <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> hash<span style="color:#f92672">,</span> Object key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> idx <span style="color:#f92672">=</span> hash <span style="color:#f92672">&amp;</span> <span style="color:#f92672">(</span>table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>table<span style="color:#f92672">[</span>idx<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Entry p <span style="color:#f92672">=</span> table<span style="color:#f92672">[</span>idx<span style="color:#f92672">];</span>
        Entry prev <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>key<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// 找到了, 删除
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>prev <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 链表头
</span><span style="color:#75715e"></span>                    table<span style="color:#f92672">[</span>idx<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 非链表头
</span><span style="color:#75715e"></span>                    prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                size<span style="color:#f92672">--;</span>
                <span style="color:#66d9ef">return</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            prev <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="生成-hashcode">
  生成 hashCode
  <a class="anchor" href="#%e7%94%9f%e6%88%90-hashcode">#</a>
</h4>
<p><img src="../imgs/image-20230424083655435.png" alt="image-20230424083655435" /></p>
<p>hash 算法是将任意对象，分配一个<strong>编号</strong>的过程，其中编号是一个有限范围内的数字（如 int 范围内）</p>
<p><img src="../imgs/image-20230424090603325.png" alt="image-20230424090603325" /></p>
<p><strong>Object.hashCode</strong></p>
<ul>
<li>Object 的 hashCode 方法默认是生成随机数作为 hash 值（会缓存在对象头当中）</li>
<li>缺点是包含相同<strong>值</strong>的不同对象，他们的 hashCode 不一样，不能够用 hash 值来反映对象的<strong>值</strong>特征，因此诸多子类都会重写 hashCode 方法</li>
</ul>
<p><strong>String.hashCode</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bac&#34;</span><span style="color:#f92672">;</span>                     
    String s2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;abc&#34;</span><span style="color:#f92672">);</span>         

    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s1<span style="color:#f92672">.</span><span style="color:#a6e22e">hashCode</span><span style="color:#f92672">());</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s2<span style="color:#f92672">.</span><span style="color:#a6e22e">hashCode</span><span style="color:#f92672">());</span>

    <span style="color:#75715e">// 原则：值相同的字符串生成相同的 hash 码, 尽量让值不同的字符串生成不同的 hash 码
</span><span style="color:#75715e"></span>    <span style="color:#75715e">/*
</span><span style="color:#75715e">    对于 abc  a * 100 + b * 10 + c
</span><span style="color:#75715e">    对于 bac  b * 100 + a * 10 + c
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">int</span> hash <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> s1<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">char</span> c <span style="color:#f92672">=</span> s1<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">((</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> c<span style="color:#f92672">);</span>
        <span style="color:#75715e">// (a*10 + b)*10 + c  ==&gt;  a*100 + b*10 + c  2^5
</span><span style="color:#75715e"></span>        hash <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>hash <span style="color:#f92672">&lt;&lt;</span> 5<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> hash <span style="color:#f92672">+</span> c<span style="color:#f92672">;</span>     
    <span style="color:#f92672">}</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>hash<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>经验表明如果每次乘的是较大质数，可以有更好地降低 hash 冲突，因此改【乘 10】为【乘 31】</li>
<li>【乘 31】可以等价为【乘 32 - hash】，进一步可以转为更高效地【左移5位 - hash】</li>
</ul>
<p><strong>检查 hash 表的分散性</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> sum <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> table<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        Entry p <span style="color:#f92672">=</span> table<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            sum<span style="color:#f92672">[</span>i<span style="color:#f92672">]++;</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>sum<span style="color:#f92672">));</span>

    Map<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">,</span> Long<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">(</span>sum<span style="color:#f92672">).</span><span style="color:#a6e22e">boxed</span><span style="color:#f92672">()</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">collect</span><span style="color:#f92672">(</span>Collectors<span style="color:#f92672">.</span><span style="color:#a6e22e">groupingBy</span><span style="color:#f92672">(</span>s <span style="color:#f92672">-&gt;</span> s<span style="color:#f92672">,</span> Collectors<span style="color:#f92672">.</span><span style="color:#a6e22e">counting</span><span style="color:#f92672">()));</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>result<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>测试</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 测试 Object.hashCode
</span><span style="color:#75715e"></span>    HashTable table <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashTable<span style="color:#f92672">();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> 200000<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        Object obj <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">();</span>
        table<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>obj<span style="color:#f92672">,</span> obj<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    table<span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">();</span>
    
    <span style="color:#75715e">// 测试 String.hashCode
</span><span style="color:#75715e"></span>    table <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashTable<span style="color:#f92672">();</span>
    List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> strings <span style="color:#f92672">=</span> Files<span style="color:#f92672">.</span><span style="color:#a6e22e">readAllLines</span><span style="color:#f92672">(</span>Path<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;words&#34;</span><span style="color:#f92672">));</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String string <span style="color:#f92672">:</span> strings<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        table<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>string<span style="color:#f92672">,</span> string<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    table<span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>MurmurHash</strong></p>
<p><img src="../imgs/image-20230425084247888.png" alt="image-20230425084247888" /></p>
<h4 id="思考">
  思考
  <a class="anchor" href="#%e6%80%9d%e8%80%83">#</a>
</h4>
<ol>
<li>我们的代码里使用了尾插法，如果改成头插法呢？</li>
<li>JDK 的 HashMap 中采用了将对象 hashCode 高低位相互异或的方式减少冲突，怎么理解</li>
<li>我们的 HashTable 中表格容量是 2 的 n 次方，很多优化都是基于这个前提，能否不用 2 的 n 次方作为表格容量？</li>
<li>JDK 的 HashMap 在链表长度过长会转换成红黑树，对此你怎么看</li>
</ol>
<h2 id="3-基于比较的排序算法">
  3. 基于比较的排序算法
  <a class="anchor" href="#3-%e5%9f%ba%e4%ba%8e%e6%af%94%e8%be%83%e7%9a%84%e6%8e%92%e5%ba%8f%e7%ae%97%e6%b3%95">#</a>
</h2>
<table>
<thead>
<tr>
<th style="text-align:center">算法</th>
<th style="text-align:center">最好</th>
<th style="text-align:center">最坏</th>
<th style="text-align:center">平均</th>
<th style="text-align:center">空间</th>
<th style="text-align:center">稳定</th>
<th style="text-align:center">思想</th>
<th style="text-align:center">注意事项</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">冒泡</td>
<td style="text-align:center">O(n)</td>
<td style="text-align:center">O($n^2$)</td>
<td style="text-align:center">O($n^2$)</td>
<td style="text-align:center">O(1)</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">比较</td>
<td style="text-align:center">最好情况需要额外判断</td>
</tr>
<tr>
<td style="text-align:center">选择</td>
<td style="text-align:center">O($n^2$)</td>
<td style="text-align:center">O($n^2$)</td>
<td style="text-align:center">O($n^2$)</td>
<td style="text-align:center">O(1)</td>
<td style="text-align:center">N</td>
<td style="text-align:center">比较</td>
<td style="text-align:center">交换次数一般少于冒泡</td>
</tr>
<tr>
<td style="text-align:center">堆</td>
<td style="text-align:center">O($nlogn$)</td>
<td style="text-align:center">O($nlogn$)</td>
<td style="text-align:center">O($nlogn$)</td>
<td style="text-align:center">O(1)</td>
<td style="text-align:center">N</td>
<td style="text-align:center">选择</td>
<td style="text-align:center">堆排序的辅助性较强，理解前先理解堆的数据结构</td>
</tr>
<tr>
<td style="text-align:center">插入</td>
<td style="text-align:center">O(n)</td>
<td style="text-align:center">O($n^2$)</td>
<td style="text-align:center">O($n^2$)</td>
<td style="text-align:center">O(1)</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">比较</td>
<td style="text-align:center">插入排序对于近乎有序的数据处理速度比较快，复杂度有所下降，可以提前结束</td>
</tr>
<tr>
<td style="text-align:center">希尔</td>
<td style="text-align:center">O(nlogn)</td>
<td style="text-align:center">O($n^2$)</td>
<td style="text-align:center">O($nlogn$)</td>
<td style="text-align:center">O(1)</td>
<td style="text-align:center">N</td>
<td style="text-align:center">插入</td>
<td style="text-align:center">gap序列的构造有多种方式，不同方式处理的数据复杂度可能不同</td>
</tr>
<tr>
<td style="text-align:center">归并</td>
<td style="text-align:center">O($nlogn$)</td>
<td style="text-align:center">O($nlogn$)</td>
<td style="text-align:center">O($nlogn$)</td>
<td style="text-align:center">O(n)</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">分治</td>
<td style="text-align:center">需要额外的O(n)的存储空间</td>
</tr>
<tr>
<td style="text-align:center">快速</td>
<td style="text-align:center">O($nlogn$)</td>
<td style="text-align:center">O($n^2$)</td>
<td style="text-align:center">O($nlogn$)</td>
<td style="text-align:center">O(logn)</td>
<td style="text-align:center">N</td>
<td style="text-align:center">分治</td>
<td style="text-align:center">快排可能存在最坏情况，需要把枢轴值选取得尽量随机化来缓解最坏情况下的时间复杂度</td>
</tr>
</tbody>
</table>
<h3 id="稳定-vs-不稳定">
  稳定 vs 不稳定
  <a class="anchor" href="#%e7%a8%b3%e5%ae%9a-vs-%e4%b8%8d%e7%a8%b3%e5%ae%9a">#</a>
</h3>
<p><img src="../imgs/stability_playing_cards.svg.png" alt="stability_playing_cards.svg" /></p>
<h3 id="1-冒泡排序">
  1) 冒泡排序
  <a class="anchor" href="#1-%e5%86%92%e6%b3%a1%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>要点</p>
<ul>
<li>每轮冒泡不断地比较<strong>相邻</strong>的两个元素，如果它们是逆序的，则交换它们的位置</li>
<li>下一轮冒泡，可以调整未排序的右边界，减少不必要比较</li>
</ul>
<p>以数组 3、2、1 的冒泡排序为例，第一轮冒泡</p>
<p><img src="../imgs/image-20230504153631958.png" alt="image-20230504153631958" /></p>
<p>第二轮冒泡</p>
<p><img src="../imgs/image-20230504154044402.png" alt="image-20230504154044402" /></p>
<p>未排序区域内就剩一个元素，结束</p>
<p><img src="../imgs/image-20230504154213239.png" alt="image-20230504154213239" /></p>
<p>优化手段：每次循环时，若能确定<strong>更合适的</strong>右边界，则可以减少冒泡轮数</p>
<p>以数组 3、2、1、4、5 为例，第一轮结束后记录的 x，即为右边界</p>
<p><img src="../imgs/image-20230504161136854.png" alt="image-20230504161136854" /></p>
<p>非递归版代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BubbleSort</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">bubble</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> j<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
                    a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
                    a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
                    x <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            j <span style="color:#f92672">=</span> x<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>6<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 1<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        bubble<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="2-选择排序">
  2) 选择排序
  <a class="anchor" href="#2-%e9%80%89%e6%8b%a9%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>要点</p>
<ul>
<li>每一轮选择，找出最大（最小）的元素，并把它交换到合适的位置</li>
</ul>
<p>以下面的数组选择最大值为例</p>
<p><img src="../imgs/image-20230507112728513.png" alt="image-20230507112728513" /></p>
<p>非递归实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SelectionSort</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 1. 选择轮数 a.length - 1
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// 2. 交换的索引位置(right) 初始 a.length - 1, 每次递减
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> right <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> right <span style="color:#f92672">&gt;</span> 0 <span style="color:#f92672">;</span> right<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> right<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> a<span style="color:#f92672">[</span>max<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                    max <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>max <span style="color:#f92672">!=</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> max<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>6<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 1<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="3-堆排序">
  3) 堆排序
  <a class="anchor" href="#3-%e5%a0%86%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>要点：</p>
<ul>
<li>建立大顶堆</li>
<li>每次将堆顶元素（最大值）交换到末尾，调整堆顶元素，让它重新符合大顶堆特性</li>
</ul>
<p>建堆</p>
<p><img src="../imgs/image-20230508080820117.png" alt="image-20230508080820117" /></p>
<p>交换，下潜调整</p>
<p><img src="../imgs/image-20230508080912944.png" alt="image-20230508080912944" /></p>
<p><img src="../imgs/image-20230508080959301.png" alt="image-20230508080959301" /></p>
<p><img src="../imgs/image-20230508081052055.png" alt="image-20230508081052055" /></p>
<p><img src="../imgs/image-20230508081220301.png" alt="image-20230508081220301" /></p>
<p><img src="../imgs/image-20230508081315265.png" alt="image-20230508081315265" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HeapSort</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        heapify<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> right <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> right <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">;</span> right<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
            swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
            down<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 建堆 O(n)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">heapify</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> size<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> size <span style="color:#f92672">/</span> 2 <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> 0<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
            down<span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> size<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 下潜
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// leetcode 上数组排序题目用堆排序求解，非递归实现比递归实现大约快 6ms
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">down</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> parent<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> size<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> left <span style="color:#f92672">=</span> parent <span style="color:#f92672">*</span> 2 <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">int</span> right <span style="color:#f92672">=</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>left<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>max<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                max <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>right <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>right<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>max<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                max <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">==</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 没找到更大的孩子
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            swap<span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> max<span style="color:#f92672">,</span> parent<span style="color:#f92672">);</span>
            parent <span style="color:#f92672">=</span> max<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 交换
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>2<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 5<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="4-插入排序">
  4) 插入排序
  <a class="anchor" href="#4-%e6%8f%92%e5%85%a5%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>要点</p>
<ul>
<li><em>将数组分为两部分</em> <em>[0 .. low-1]  [low .. a.length-1]</em>
<ul>
<li><em>左边</em> <em>[0 .. low-1]</em> <em>是已排序部分</em></li>
<li><em>右边</em> <em>[low .. a.length-1]</em> <em>是未排序部分</em></li>
</ul>
</li>
<li><em>每次从未排序区域取出</em> <em>low</em> <em>位置的元素</em>, <em>插入到已排序区域</em></li>
</ul>
<p>例</p>
<p><img src="../imgs/image-20230513150750673.png" alt="image-20230513150750673" /></p>
<p><img src="../imgs/image-20230513150907333.png" alt="image-20230513150907333" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">InsertionSort</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> low <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> low <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> low<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 将 low 位置的元素插入至 [0..low-1] 的已排序区域
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>low<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> low <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> <span style="color:#75715e">// 已排序区域指针
</span><span style="color:#75715e"></span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;=</span> 0 <span style="color:#f92672">&amp;&amp;</span> t <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">])</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 没有找到插入位置
</span><span style="color:#75715e"></span>                a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span> <span style="color:#75715e">// 空出插入位置
</span><span style="color:#75715e"></span>                i<span style="color:#f92672">--;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#75715e">// 找到插入位置
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">!=</span> low <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>9<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 8<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 4<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="5-希尔排序">
  5) 希尔排序
  <a class="anchor" href="#5-%e5%b8%8c%e5%b0%94%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>要点</p>
<ul>
<li>简单的说，就是分组实现插入，每组元素间隙称为 gap</li>
<li>每轮排序后 gap 逐渐变小，直至 gap 为 1 完成排序</li>
<li>对插入排序的优化，让元素更快速地交换到最终位置</li>
</ul>
<p>下图演示了 gap = 4，gap = 2，gap = 1 的三轮排序前后比较</p>
<p><img src="../imgs/image-20230508182439075.png" alt="image-20230508182439075" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ShellSort</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> gap <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">&gt;&gt;</span>1<span style="color:#f92672">;</span> gap <span style="color:#f92672">&gt;</span>0 <span style="color:#f92672">;</span> gap<span style="color:#f92672">=</span>gap<span style="color:#f92672">&gt;&gt;</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> low <span style="color:#f92672">=</span> gap<span style="color:#f92672">;</span> low <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> low <span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// 将 low 位置的元素插入至 [0..low-1] 的已排序区域
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>low<span style="color:#f92672">];</span>
                <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> low <span style="color:#f92672">-</span> gap<span style="color:#f92672">;</span> <span style="color:#75715e">// 已排序区域指针
</span><span style="color:#75715e"></span>
                <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;=</span> 0 <span style="color:#f92672">&amp;&amp;</span> t <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">])</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 没有找到插入位置
</span><span style="color:#75715e"></span>                    a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> gap<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span> <span style="color:#75715e">// 空出插入位置
</span><span style="color:#75715e"></span>                    i <span style="color:#f92672">-=</span> gap<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>

                <span style="color:#75715e">// 找到插入位置
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">!=</span> low <span style="color:#f92672">-</span> gap<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> gap<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>            
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>9<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 8<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 4<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
		System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="6-归并排序">
  6) 归并排序
  <a class="anchor" href="#6-%e5%bd%92%e5%b9%b6%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>要点</p>
<ul>
<li>分 - 每次从中间切一刀，处理的数据少一半</li>
<li>治 - 当数据仅剩一个时可以认为有序</li>
<li>合 - 两个有序的结果，可以进行合并排序（参见数组练习 E01. 合并有序数组）</li>
</ul>
<p><img src="../imgs/image-20230513143854887.png" alt="image-20230513143854887" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MergeSortTopDown</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/*
</span><span style="color:#75715e">        a1 原始数组
</span><span style="color:#75715e">        i~iEnd 第一个有序范围
</span><span style="color:#75715e">        j~jEnd 第二个有序范围
</span><span style="color:#75715e">        a2 临时数组
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">merge</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> iEnd<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> jEnd<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> iEnd <span style="color:#f92672">&amp;&amp;</span> j <span style="color:#f92672">&lt;=</span> jEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a1<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
                i<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
                j<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span>
            k<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;</span> iEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> j<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> jEnd <span style="color:#f92672">-</span> j <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">&gt;</span> jEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> iEnd <span style="color:#f92672">-</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>a1<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
        split<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a1<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> right <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
<span style="color:#75715e">//        System.out.println(Arrays.toString(array));
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// 2. 治
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">==</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 1. 分
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">+</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        split<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> m<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>                 <span style="color:#75715e">// left = 0 m = 0  9
</span><span style="color:#75715e"></span>        split<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> right<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>       <span style="color:#75715e">// m+1 = 1 right = 1  3
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// 3. 合
</span><span style="color:#75715e"></span>        merge<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> m<span style="color:#f92672">,</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> right<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a2<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> a1<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> right <span style="color:#f92672">-</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>9<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 8<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 4<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>非递归实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MergeSortBottomUp</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/*
</span><span style="color:#75715e">        a1 原始数组
</span><span style="color:#75715e">        i~iEnd 第一个有序范围
</span><span style="color:#75715e">        j~jEnd 第二个有序范围
</span><span style="color:#75715e">        a2 临时数组
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">merge</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> iEnd<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> jEnd<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> iEnd <span style="color:#f92672">&amp;&amp;</span> j <span style="color:#f92672">&lt;=</span> jEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a1<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
                i<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
                j<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span>
            k<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;</span> iEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> j<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> jEnd <span style="color:#f92672">-</span> j <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">&gt;</span> jEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> iEnd <span style="color:#f92672">-</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> a1<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>n<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> width <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> width <span style="color:#f92672">&lt;</span> n<span style="color:#f92672">;</span> width <span style="color:#f92672">*=</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> n<span style="color:#f92672">;</span> i <span style="color:#f92672">+=</span> 2 <span style="color:#f92672">*</span> width<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">min</span><span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> width <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> n <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
                <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">min</span><span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 2 <span style="color:#f92672">*</span> width <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> n <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> m <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> j<span style="color:#f92672">);</span>
                merge<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> m<span style="color:#f92672">,</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> j<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a2<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a1<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> n<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>9<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 8<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 4<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="7-归并插入">
  7) 归并+插入
  <a class="anchor" href="#7-%e5%bd%92%e5%b9%b6%e6%8f%92%e5%85%a5">#</a>
</h3>
<ul>
<li>小数据量且有序度高时，插入排序效果高</li>
<li>大数据量用归并效果好</li>
<li>可以结合二者</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MergeInsertionSort</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insertion</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> low <span style="color:#f92672">=</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span> low <span style="color:#f92672">&lt;=</span> right<span style="color:#f92672">;</span> low<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>low<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> low <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;=</span> left <span style="color:#f92672">&amp;&amp;</span> t <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
                i<span style="color:#f92672">--;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">!=</span> low <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/*
</span><span style="color:#75715e">        a1 原始数组
</span><span style="color:#75715e">        i~iEnd 第一个有序范围
</span><span style="color:#75715e">        j~jEnd 第二个有序范围
</span><span style="color:#75715e">        a2 临时数组
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">merge</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> iEnd<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> jEnd<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> iEnd <span style="color:#f92672">&amp;&amp;</span> j <span style="color:#f92672">&lt;=</span> jEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a1<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
                i<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
                j<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span>
            k<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;</span> iEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> j<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> jEnd <span style="color:#f92672">-</span> j <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">&gt;</span> jEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> iEnd <span style="color:#f92672">-</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>a1<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
        split<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a1<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
<span style="color:#75715e">//        int[] array = Arrays.copyOfRange(a1, left, right + 1);
</span><span style="color:#75715e">//        System.out.println(Arrays.toString(array));
</span><span style="color:#75715e"></span>
        <span style="color:#75715e">// 2. 治
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>right <span style="color:#f92672">==</span> left<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>right <span style="color:#f92672">-</span> left <span style="color:#f92672">&lt;=</span> 32<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            insertion<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;insert...&#34;</span> <span style="color:#f92672">+</span> left <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> right <span style="color:#f92672">+</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">+</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">));</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 1. 分
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">+</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        split<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> m<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>                 <span style="color:#75715e">// left = 0 m = 0  9
</span><span style="color:#75715e"></span>        split<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> right<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>       <span style="color:#75715e">// m+1 = 1 right = 1  3
</span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>left <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> right <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">+</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">));</span>
        <span style="color:#75715e">// 3. 合
</span><span style="color:#75715e"></span>        merge<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> m<span style="color:#f92672">,</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> right<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a2<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> a1<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> right <span style="color:#f92672">-</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>9<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 8<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 4<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="8-快速排序">
  8) 快速排序
  <a class="anchor" href="#8-%e5%bf%ab%e9%80%9f%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>单边循环（lomuto分区）要点</p>
<ul>
<li>选择最右侧元素作为基准点</li>
<li>j 找比基准点小的，i 找比基准点大的，一旦找到，二者进行交换
<ul>
<li>交换时机：j 找到小的，且与 i 不相等</li>
<li>i 找到 &gt;= 基准点元素后，不应自增</li>
</ul>
</li>
<li>最后基准点与 i 交换，i 即为基准点最终索引</li>
</ul>
<p>例：</p>
<p>i 和 j 都从左边出发向右查找，i 找到比基准点4大的5，j找到比基准点小的2，停下来交换</p>
<p><img src="../imgs/image-20230513145045085.png" alt="image-20230513145045085" /></p>
<p>i 找到了比基准点大的5，j 找到比基准点小的3，停下来交换</p>
<p><img src="../imgs/image-20230513145259217.png" alt="image-20230513145259217" /></p>
<p>j 到达right 处结束，right 与 i 交换，一轮分区结束</p>
<p><img src="../imgs/image-20230513145454772.png" alt="image-20230513145454772" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">QuickSortLomuto</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        quick<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">quick</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">&gt;=</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> partition<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span> <span style="color:#75715e">// p代表基准点元素索引
</span><span style="color:#75715e"></span>        quick<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> p <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        quick<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> p <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">partition</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> pv <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>right<span style="color:#f92672">];</span> <span style="color:#75715e">// 基准点元素值
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">&lt;</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> pv<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// j 找到比基准点小的了, 没找到大的
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">!=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                i<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span>
            j<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
        swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> i<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>5<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 9<span style="color:#f92672">,</span> 8<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 4<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>双边循环要点</p>
<ul>
<li>选择最左侧元素作为基准点</li>
<li>j 找比基准点小的，i 找比基准点大的，一旦找到，二者进行交换
<ul>
<li>i 从左向右</li>
<li>j 从右向左</li>
</ul>
</li>
<li>最后基准点与 i 交换，i 即为基准点最终索引</li>
</ul>
<p>例：</p>
<p>i 找到比基准点大的5停下来，j 找到比基准点小的1停下来（包含等于），二者交换</p>
<p><img src="../imgs/image-20230513145918612.png" alt="image-20230513145918612" /></p>
<p>i 找到8，j 找到3，二者交换，i 找到7，j 找到2，二者交换</p>
<p><img src="../imgs/image-20230513150158220.png" alt="image-20230513150158220" /></p>
<p>i == j，退出循环，基准点与 i 交换</p>
<p><img src="../imgs/image-20230513150351115.png" alt="image-20230513150351115" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">QuickSortHoare</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        quick<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">quick</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">&gt;=</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> partition<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
        quick<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> p <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        quick<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> p <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">partition</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> pv <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>left<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> j <span style="color:#f92672">&amp;&amp;</span> a<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> pv<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                j<span style="color:#f92672">--;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> j <span style="color:#f92672">&amp;&amp;</span> pv <span style="color:#f92672">&gt;=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                i<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span>
            swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> j<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>9<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 8<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 4<span style="color:#f92672">};</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="随机基准点">
  随机基准点
  <a class="anchor" href="#%e9%9a%8f%e6%9c%ba%e5%9f%ba%e5%87%86%e7%82%b9">#</a>
</h4>
<p>使用随机数作为基准点，避免万一最大值或最小值作为基准点导致的分区不均衡</p>
<p>例</p>
<p><img src="../imgs/image-20230513152038090.png" alt="image-20230513152038090" /></p>
<p>改进代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span> idx <span style="color:#f92672">=</span> ThreadLocalRandom<span style="color:#f92672">.</span><span style="color:#a6e22e">current</span><span style="color:#f92672">().</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>right <span style="color:#f92672">-</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> left<span style="color:#f92672">;</span>
swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> idx<span style="color:#f92672">,</span> left<span style="color:#f92672">);</span>
</code></pre></div><h4 id="处理重复值">
  处理重复值
  <a class="anchor" href="#%e5%a4%84%e7%90%86%e9%87%8d%e5%a4%8d%e5%80%bc">#</a>
</h4>
<p>如果重复值较多，则原来算法中的分区效果也不好，如下图中左侧所示，需要想办法改为右侧的分区效果</p>
<p><img src="../imgs/image-20230513151851103.png" alt="image-20230513151851103" /></p>
<p>改进代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">QuickSortHandleDuplicate</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        quick<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">quick</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">&gt;=</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> partition<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
        quick<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> p <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        quick<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> p <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> right<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/*
</span><span style="color:#75715e">        循环内
</span><span style="color:#75715e">            i 从 left + 1 开始，从左向右找大的或相等的
</span><span style="color:#75715e">            j 从 right 开始，从右向左找小的或相等的
</span><span style="color:#75715e">            交换，i++ j--
</span><span style="color:#75715e">
</span><span style="color:#75715e">        循环外 j 和 基准点交换，j 即为分区位置
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">partition</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> idx <span style="color:#f92672">=</span> ThreadLocalRandom<span style="color:#f92672">.</span><span style="color:#a6e22e">current</span><span style="color:#f92672">().</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>right <span style="color:#f92672">-</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> left<span style="color:#f92672">;</span>
        swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> left<span style="color:#f92672">,</span> idx<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">int</span> pv <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>left<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// i 从左向右找大的或者相等的
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j <span style="color:#f92672">&amp;&amp;</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> pv<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                i<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#75715e">// j 从右向左找小的或者相等的
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j <span style="color:#f92672">&amp;&amp;</span> a<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> pv<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                j<span style="color:#f92672">--;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
                i<span style="color:#f92672">++;</span>
                j<span style="color:#f92672">--;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> j<span style="color:#f92672">,</span> left<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> j<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        a<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
<span style="color:#75715e">//        int[] a = {4, 2, 1, 3, 2, 4}; // 最外层循环 = 要加
</span><span style="color:#75715e">//        int[] a = {2, 1, 3, 2}; // 内层循环 = 要加
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>2<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 2<span style="color:#f92672">};</span> <span style="color:#75715e">// 内层if要加
</span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>
<p>核心思想是</p>
<ul>
<li>改进前，i 只找大于的，j 会找小于等于的。一个不找等于、一个找等于，势必导致等于的值分布不平衡</li>
<li>改进后，二者都会找等于的交换，等于的值会平衡分布在基准点两边</li>
</ul>
</li>
<li>
<p>细节：</p>
<ul>
<li>因为一开始 i 就可能等于 j，因此外层循环需要加等于条件保证至少进入一次，让 j 能减到正确位置</li>
<li>内层 while 循环中 i &lt;= j 的 = 也不能去掉，因为 i == j 时也要做一次与基准点的判断，好让 i 及 j 正确</li>
<li>i == j 时，也要做一次 i++ 和 j&ndash; 使下次循环二者不等才能退出</li>
<li>因为最后退出循环时 i 会大于 j，因此最终与基准点交换的是 j</li>
</ul>
</li>
<li>
<p>内层两个 while 循环的先后顺序不再重要</p>
</li>
</ul>
<h3 id="leetcode-912-题---排序数组">
  Leetcode 912 题 - 排序数组
  <a class="anchor" href="#leetcode-912-%e9%a2%98---%e6%8e%92%e5%ba%8f%e6%95%b0%e7%bb%84">#</a>
</h3>
<h3 id="leetcode-148-题---排序链表">
  Leetcode 148 题 - 排序链表
  <a class="anchor" href="#leetcode-148-%e9%a2%98---%e6%8e%92%e5%ba%8f%e9%93%be%e8%a1%a8">#</a>
</h3>
<h2 id="4-非比较排序算法">
  4. 非比较排序算法
  <a class="anchor" href="#4-%e9%9d%9e%e6%af%94%e8%be%83%e6%8e%92%e5%ba%8f%e7%ae%97%e6%b3%95">#</a>
</h2>
<table>
<thead>
<tr>
<th>非比较排序算法</th>
<th>时间复杂度</th>
<th>空间复杂度</th>
<th>稳定性</th>
</tr>
</thead>
<tbody>
<tr>
<td>计数排序</td>
<td>O(n+k)</td>
<td>O(n+k)</td>
<td>稳定</td>
</tr>
<tr>
<td>桶排序</td>
<td>O(n+k)</td>
<td>O(n+k)</td>
<td>稳定</td>
</tr>
<tr>
<td>基数排序</td>
<td>O(d*(n+k))</td>
<td>O(n+k)</td>
<td>稳定</td>
</tr>
</tbody>
</table>
<p>其中</p>
<ul>
<li>n 是数组长度</li>
<li>k 是桶长度</li>
<li>d 是基数位数</li>
</ul>
<h3 id="1-计数排序">
  1) 计数排序
  <a class="anchor" href="#1-%e8%ae%a1%e6%95%b0%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>方法1（简化后的计数排序）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            min <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> counting <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>max <span style="color:#f92672">-</span> min <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        counting<span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> min<span style="color:#f92672">]++;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> counting<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>counting<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            a<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> i <span style="color:#f92672">+</span> min<span style="color:#f92672">;</span>
            counting<span style="color:#f92672">[</span>i<span style="color:#f92672">]--;</span>
            k<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>针对 byte []，因为数据范围已知，省去了求最大、最小值的过程，java 中对 char[]、short[]、byte[] 的排序都可能采用 counting 排序</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> counting <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>256<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        counting<span style="color:#f92672">[</span>i <span style="color:#f92672">&amp;</span> 0xFF<span style="color:#f92672">]++;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 128 <span style="color:#f92672">+</span> 256<span style="color:#f92672">;</span> k <span style="color:#f92672">&gt;=</span> 0<span style="color:#f92672">;</span> <span style="color:#f92672">)</span> <span style="color:#f92672">{</span>            
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>counting<span style="color:#f92672">[--</span>i <span style="color:#f92672">&amp;</span> 0xFF<span style="color:#f92672">]</span> <span style="color:#f92672">==</span>0<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">int</span> v <span style="color:#f92672">=</span> i <span style="color:#f92672">&amp;</span> 0xFF<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> c <span style="color:#f92672">=</span> counting<span style="color:#f92672">[</span>i <span style="color:#f92672">&amp;</span> 0xFF<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> j <span style="color:#f92672">&lt;</span> c<span style="color:#f92672">;</span> j<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            a<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">byte</span><span style="color:#f92672">)</span> v<span style="color:#f92672">;</span>
            k<span style="color:#f92672">--;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>稳定计数排序</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort2</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            min <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> counting <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>max <span style="color:#f92672">-</span> min <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        counting<span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> min<span style="color:#f92672">]++;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> counting<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        counting<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> counting<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">+</span> counting<span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> b <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> 0<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">-</span> min<span style="color:#f92672">;</span>
        counting<span style="color:#f92672">[</span>j<span style="color:#f92672">]--;</span>
        b<span style="color:#f92672">[</span>counting<span style="color:#f92672">[</span>j<span style="color:#f92672">]]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>b<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="2-桶排序">
  2) 桶排序
  <a class="anchor" href="#2-%e6%a1%b6%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>初步实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BucketSort</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> ages <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>20<span style="color:#f92672">,</span> 18<span style="color:#f92672">,</span> 66<span style="color:#f92672">,</span> 25<span style="color:#f92672">,</span> 67<span style="color:#f92672">,</span> 30<span style="color:#f92672">};</span> <span style="color:#75715e">// 假设人类年龄 1~99 那么分为10个桶
</span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>ages<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>ages<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>ages<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        DynamicArray<span style="color:#f92672">[]</span> buckets <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicArray<span style="color:#f92672">[</span>10<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> buckets<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            buckets<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicArray<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> v <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            DynamicArray bucket <span style="color:#f92672">=</span> buckets<span style="color:#f92672">[</span>v <span style="color:#f92672">/</span> 10<span style="color:#f92672">];</span>
            bucket<span style="color:#f92672">.</span><span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span>v<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>DynamicArray bucket <span style="color:#f92672">:</span> buckets<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>bucket<span style="color:#f92672">.</span><span style="color:#a6e22e">array</span><span style="color:#f92672">()));</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>DynamicArray bucket <span style="color:#f92672">:</span> buckets<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> bucket<span style="color:#f92672">.</span><span style="color:#a6e22e">array</span><span style="color:#f92672">();</span>
            InsertionSort<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>array<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> v <span style="color:#f92672">:</span> array<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                a<span style="color:#f92672">[</span>k<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> v<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>通用</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BucketSortGeneric</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> ages <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>20<span style="color:#f92672">,</span> 10<span style="color:#f92672">,</span> 28<span style="color:#f92672">,</span> 66<span style="color:#f92672">,</span> 25<span style="color:#f92672">,</span> 31<span style="color:#f92672">,</span> 67<span style="color:#f92672">,</span> 30<span style="color:#f92672">,</span> 70<span style="color:#f92672">};</span> <span style="color:#75715e">// 假设人类年龄 1~99
</span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>ages<span style="color:#f92672">));</span>
        sort<span style="color:#f92672">(</span>ages<span style="color:#f92672">,</span> 20<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>ages<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> range<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                max <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                min <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 1. 准备桶
</span><span style="color:#75715e"></span>        DynamicArray<span style="color:#f92672">[]</span> buckets <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicArray<span style="color:#f92672">[(</span>max <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> range <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>buckets<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> buckets<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            buckets<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicArray<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 2. 放入年龄数据
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> age <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            buckets<span style="color:#f92672">[(</span>age <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> range<span style="color:#f92672">].</span><span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span>age<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>DynamicArray bucket <span style="color:#f92672">:</span> buckets<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 3. 排序桶内元素
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> bucket<span style="color:#f92672">.</span><span style="color:#a6e22e">array</span><span style="color:#f92672">();</span>
            InsertionSort<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>array<span style="color:#f92672">);</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>array<span style="color:#f92672">));</span>
            <span style="color:#75715e">// 4. 把每个桶排序好的内容，依次放入原始数组
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> v <span style="color:#f92672">:</span> array<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                a<span style="color:#f92672">[</span>k<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> v<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="3-基数排序">
  3) 基数排序
  <a class="anchor" href="#3-%e5%9f%ba%e6%95%b0%e6%8e%92%e5%ba%8f">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RadixSort</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">radixSort</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> length<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ArrayList<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;[]</span> buckets <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">[</span>128<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> buckets<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            buckets<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> length <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> 0 <span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String s <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                buckets<span style="color:#f92672">[</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)].</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>s<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>ArrayList<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> bucket <span style="color:#f92672">:</span> buckets<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String s <span style="color:#f92672">:</span> bucket<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    a<span style="color:#f92672">[</span>k<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> s<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                bucket<span style="color:#f92672">.</span><span style="color:#a6e22e">clear</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">/*String[] phoneNumbers = new String[10];
</span><span style="color:#75715e">        phoneNumbers[0] = &#34;13812345678&#34;;
</span><span style="color:#75715e">        phoneNumbers[1] = &#34;13912345678&#34;;
</span><span style="color:#75715e">        phoneNumbers[2] = &#34;13612345678&#34;;
</span><span style="color:#75715e">        phoneNumbers[3] = &#34;13712345678&#34;;
</span><span style="color:#75715e">        phoneNumbers[4] = &#34;13512345678&#34;;
</span><span style="color:#75715e">        phoneNumbers[5] = &#34;13412345678&#34;;
</span><span style="color:#75715e">        phoneNumbers[6] = &#34;15012345678&#34;;
</span><span style="color:#75715e">        phoneNumbers[7] = &#34;15112345678&#34;;
</span><span style="color:#75715e">        phoneNumbers[8] = &#34;15212345678&#34;;
</span><span style="color:#75715e">        phoneNumbers[9] = &#34;15712345678&#34;;*/</span>

        String<span style="color:#f92672">[]</span> phoneNumbers <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[</span>10<span style="color:#f92672">];</span>
        phoneNumbers<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;138&#34;</span><span style="color:#f92672">;</span>
        phoneNumbers<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;139&#34;</span><span style="color:#f92672">;</span>
        phoneNumbers<span style="color:#f92672">[</span>2<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;136&#34;</span><span style="color:#f92672">;</span>
        phoneNumbers<span style="color:#f92672">[</span>3<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;137&#34;</span><span style="color:#f92672">;</span>
        phoneNumbers<span style="color:#f92672">[</span>4<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;135&#34;</span><span style="color:#f92672">;</span>
        phoneNumbers<span style="color:#f92672">[</span>5<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;134&#34;</span><span style="color:#f92672">;</span>
        phoneNumbers<span style="color:#f92672">[</span>6<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;150&#34;</span><span style="color:#f92672">;</span>
        phoneNumbers<span style="color:#f92672">[</span>7<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;151&#34;</span><span style="color:#f92672">;</span>
        phoneNumbers<span style="color:#f92672">[</span>8<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;152&#34;</span><span style="color:#f92672">;</span>
        phoneNumbers<span style="color:#f92672">[</span>9<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;157&#34;</span><span style="color:#f92672">;</span>
        RadixSort<span style="color:#f92672">.</span><span style="color:#a6e22e">radixSort</span><span style="color:#f92672">(</span>phoneNumbers<span style="color:#f92672">,</span> 3<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String phoneNumber <span style="color:#f92672">:</span> phoneNumbers<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>phoneNumber<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>基数排序是稳定排序，因此先排个位、再排十位，十位的排序不会打乱个位取值相等的元素顺序</p>
<h2 id="5-java-中的排序">
  5. Java 中的排序
  <a class="anchor" href="#5-java-%e4%b8%ad%e7%9a%84%e6%8e%92%e5%ba%8f">#</a>
</h2>
<p>Arrays.sort</p>
<p>JDK 7~13 中的排序实现</p>
<table>
<thead>
<tr>
<th>排序目标</th>
<th>条件</th>
<th>采用算法</th>
</tr>
</thead>
<tbody>
<tr>
<td>int[] long[] float[] double[]</td>
<td>size &lt; 47</td>
<td>混合插入排序 (pair)</td>
</tr>
<tr>
<td></td>
<td>size &lt; 286</td>
<td>双基准点快排</td>
</tr>
<tr>
<td></td>
<td>有序度高</td>
<td>归并排序</td>
</tr>
<tr>
<td></td>
<td>有序度低</td>
<td>双基准点快排</td>
</tr>
<tr>
<td>byte[]</td>
<td>size &gt; 29</td>
<td>计数排序</td>
</tr>
<tr>
<td></td>
<td>size &lt;= 29</td>
<td>插入排序</td>
</tr>
<tr>
<td>char[] short[]</td>
<td>size &gt; 3200</td>
<td>计数排序</td>
</tr>
<tr>
<td></td>
<td>size &lt; 47</td>
<td>插入排序</td>
</tr>
<tr>
<td></td>
<td>size &lt; 286</td>
<td>双基准点快排</td>
</tr>
<tr>
<td></td>
<td>有序度高</td>
<td>归并排序</td>
</tr>
<tr>
<td></td>
<td>有序度低</td>
<td>双基准点快排</td>
</tr>
<tr>
<td>Object[]</td>
<td>-Djava.util.Arrays.useLegacyMergeSort=true</td>
<td>传统归并排序</td>
</tr>
<tr>
<td></td>
<td></td>
<td>TimSort</td>
</tr>
</tbody>
</table>
<p>JDK 14~20 中的排序实现</p>
<table>
<thead>
<tr>
<th>排序目标</th>
<th>条件</th>
<th>采用算法</th>
</tr>
</thead>
<tbody>
<tr>
<td>int[] long[] float[] double[]</td>
<td>size &lt; 65 并不是最左侧</td>
<td>混合插入排序 (pin)</td>
</tr>
<tr>
<td></td>
<td>size &lt; 44 并位于最左侧</td>
<td>插入排序</td>
</tr>
<tr>
<td></td>
<td>递归次数超过 384</td>
<td>堆排序</td>
</tr>
<tr>
<td></td>
<td>对于整个数组或非最左侧 size &gt; 4096，有序度高</td>
<td>归并排序</td>
</tr>
<tr>
<td></td>
<td>有序度低</td>
<td>双基准点快排</td>
</tr>
<tr>
<td>byte[]</td>
<td>size &gt; 64</td>
<td>计数排序</td>
</tr>
<tr>
<td></td>
<td>size &lt;= 64</td>
<td>插入排序</td>
</tr>
<tr>
<td>char[] short[]</td>
<td>size &gt; 1750</td>
<td>计数排序</td>
</tr>
<tr>
<td></td>
<td>size &lt; 44</td>
<td>插入排序</td>
</tr>
<tr>
<td></td>
<td>递归次数超过 384</td>
<td>计数排序</td>
</tr>
<tr>
<td></td>
<td>不是上面情况</td>
<td>双基准点快排</td>
</tr>
<tr>
<td>Object[]</td>
<td>-Djava.util.Arrays.useLegacyMergeSort=true</td>
<td>传统归并排序</td>
</tr>
<tr>
<td></td>
<td></td>
<td>TimSort</td>
</tr>
</tbody>
</table>
<ul>
<li>其中 TimSort 是用归并+二分插入排序的混合排序算法</li>
<li>值得注意的是从 JDK 8 开始支持 Arrays.parallelSort 并行排序</li>
<li>根据最新的提交记录来看 JDK 21 可能会引入基数排序等优化</li>
</ul>
<h2 id="6-外部排序">
  6. 外部排序
  <a class="anchor" href="#6-%e5%a4%96%e9%83%a8%e6%8e%92%e5%ba%8f">#</a>
</h2>
<h1 id="二-题目">
  二. 题目
  <a class="anchor" href="#%e4%ba%8c-%e9%a2%98%e7%9b%ae">#</a>
</h1>
<h2 id="1-二叉搜索树-1">
  1. 二叉搜索树
  <a class="anchor" href="#1-%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91-1">#</a>
</h2>
<h3 id="e01-删除节点-力扣-450-题">
  E01. 删除节点-力扣 450 题
  <a class="anchor" href="#e01-%e5%88%a0%e9%99%a4%e8%8a%82%e7%82%b9-%e5%8a%9b%e6%89%a3-450-%e9%a2%98">#</a>
</h3>
<p>例题已经讲过，用非递归和递归均可实现，这里只给出递归参考代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">deleteNode</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>key <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> deleteNode<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> deleteNode<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> key<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 情况1 - 只有右孩子
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 情况2 - 只有左孩子
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    TreeNode s <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 情况3 - 有两个孩子
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        s <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    s<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> deleteNode<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">);</span>
    s<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> s<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>
<p>树节点 TreeNode 相当于例题中的 BSTNode</p>
<ul>
<li>TreeNode  有属性：val, left, right，并未区分键值</li>
<li>BSTNode 有属性：key, value, left, right，区分了键值</li>
</ul>
</li>
<li>
<p>它的 TreeNode 没有 key，比较用的是 TreeNode.val 属性与待删除 key 进行比较</p>
</li>
</ul>
<h3 id="e02-新增节点-力扣-701-题">
  E02. 新增节点-力扣 701 题
  <a class="anchor" href="#e02-%e6%96%b0%e5%a2%9e%e8%8a%82%e7%82%b9-%e5%8a%9b%e6%89%a3-701-%e9%a2%98">#</a>
</h3>
<p>例题也讲过了（put），下面给出递归实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">insertIntoBST</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>val<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>val <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> insertIntoBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> insertIntoBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>注意事项与上题相同，不再赘述</li>
<li>题目提示输入的 val 一定与树中节点不同，因此只需考虑<strong>新增</strong>情况，不会出现<strong>更新</strong>情况</li>
</ul>
<h3 id="e03-查询节点-力扣-700-题">
  E03. 查询节点-力扣 700 题
  <a class="anchor" href="#e03-%e6%9f%a5%e8%af%a2%e8%8a%82%e7%82%b9-%e5%8a%9b%e6%89%a3-700-%e9%a2%98">#</a>
</h3>
<p>例题讲过，下面给出递归实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">searchBST</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>val <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> searchBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> searchBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e04-验证二叉搜索树-力扣-98-题">
  E04. 验证二叉搜索树-力扣 98 题
  <a class="anchor" href="#e04-%e9%aa%8c%e8%af%81%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91-%e5%8a%9b%e6%89%a3-98-%e9%a2%98">#</a>
</h3>
<p><strong>中序非递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isValidBST</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    TreeNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    LinkedList<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">long</span> prev <span style="color:#f92672">=</span> Long<span style="color:#f92672">.</span><span style="color:#a6e22e">MIN_VALUE</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            TreeNode pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>prev <span style="color:#f92672">&gt;=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            prev <span style="color:#f92672">=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">;</span>
            p <span style="color:#f92672">=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>记录 prev 需要用 long，否则若测试用例中最小的节点为 Integer.MIN_VALUE 则测试会失败</li>
<li>注意，如果相邻两个节点相等，也不应当通过测试，例如，下面的树也是不合法的</li>
</ul>
<pre><code>	2
   / 
  2 
</code></pre><p><strong>中序递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isValidBST</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>root <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> doValid<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> AtomicLong<span style="color:#f92672">(</span>Long<span style="color:#f92672">.</span><span style="color:#a6e22e">MIN_VALUE</span><span style="color:#f92672">),</span>root<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">doValid</span><span style="color:#f92672">(</span>AtomicLong prev<span style="color:#f92672">,</span> TreeNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">boolean</span> a <span style="color:#f92672">=</span> doValid<span style="color:#f92672">(</span>prev<span style="color:#f92672">,</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>prev<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    prev<span style="color:#f92672">.</span><span style="color:#a6e22e">set</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">boolean</span> b <span style="color:#f92672">=</span> doValid<span style="color:#f92672">(</span>prev<span style="color:#f92672">,</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">&amp;&amp;</span> b<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>
<p>为何不能用 Long 或 long？因为它们都是局部变量且不可变，因此每次赋值时，并不会改变其它方法调用时的 prev</p>
</li>
<li>
<p>要么把 prev 设置为 AtomicLong，要么把 prev 设置为全局变量，而不要采用方法参数这样的局部变量</p>
</li>
<li>
<p>上述代码并不是最有效率的，分析过程见视频讲解</p>
</li>
</ul>
<p><strong>上下限递归</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isValidBST</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> doValid<span style="color:#f92672">(</span>node<span style="color:#f92672">,</span> Long<span style="color:#f92672">.</span><span style="color:#a6e22e">MIN_VALUE</span><span style="color:#f92672">,</span> Long<span style="color:#f92672">.</span><span style="color:#a6e22e">MAX_VALUE</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">doValid</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">long</span> min<span style="color:#f92672">,</span> <span style="color:#66d9ef">long</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;=</span> min <span style="color:#f92672">||</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&gt;=</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> doValid<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> min<span style="color:#f92672">,</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> doValid<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">,</span> max<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>设每个节点必须在一个范围内：$(min, max)$，不包含边界，若节点值超过这个范围，则返回 false</li>
<li>对于 node.left 范围肯定是 $(min, node.val)$</li>
<li>对于 node.right 范围肯定是 $(node.val, max)$</li>
<li>一开始不知道 min，max 则取 java 中长整数的最小、最大值</li>
<li>本质是前序遍历 + 剪枝</li>
</ul>
<h3 id="e05-求范围和-力扣-938-题">
  E05. 求范围和-力扣 938 题
  <a class="anchor" href="#e05-%e6%b1%82%e8%8c%83%e5%9b%b4%e5%92%8c-%e5%8a%9b%e6%89%a3-938-%e9%a2%98">#</a>
</h3>
<p><strong>中序递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">rangeSumBST</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> low<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> rangeSumBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> low<span style="color:#f92672">,</span> high<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&gt;=</span> low <span style="color:#f92672">&amp;&amp;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;=</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        b <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span> b <span style="color:#f92672">+</span> rangeSumBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> low<span style="color:#f92672">,</span> high<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>中序非递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">rangeSumBST</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> low<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    TreeNode p <span style="color:#f92672">=</span> node<span style="color:#f92672">;</span>
    LinkedList<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">int</span> sum <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span><span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            TreeNode pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&gt;</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>pop<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&gt;=</span> low<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                sum <span style="color:#f92672">+=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            p <span style="color:#f92672">=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> sum<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>leedcode 执行耗时 4ms</li>
</ul>
<p><strong>上下限递归实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">rangeSumBST</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> low<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> low<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> rangeSumBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> low<span style="color:#f92672">,</span> high<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> 
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&gt;</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> rangeSumBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> low<span style="color:#f92672">,</span> high<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">+</span> 
        rangeSumBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> low<span style="color:#f92672">,</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 
        rangeSumBST<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> low<span style="color:#f92672">,</span> high<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>leetcode 执行耗时 0 ms</li>
<li>node.val &lt; low 只需考虑它右子树的累加结果</li>
<li>node.val &gt; high 只需考虑它左子树的累加结果</li>
<li>node.val 在范围内，需要把当前节点的值加上其左右子树的累加结果</li>
</ul>
<h3 id="e06-根据前序遍历结果构造二叉搜索树-力扣-1008-题">
  E06. 根据前序遍历结果构造二叉搜索树-力扣 1008 题
  <a class="anchor" href="#e06-%e6%a0%b9%e6%8d%ae%e5%89%8d%e5%ba%8f%e9%81%8d%e5%8e%86%e7%bb%93%e6%9e%9c%e6%9e%84%e9%80%a0%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91-%e5%8a%9b%e6%89%a3-1008-%e9%a2%98">#</a>
</h3>
<p><strong>直接插入</strong></p>
<p>注意：根据前序遍历的结果，可以唯一地构造出一个二叉搜索树</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">bstFromPreorder</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preorder<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    TreeNode root <span style="color:#f92672">=</span> insert<span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> preorder<span style="color:#f92672">[</span>0<span style="color:#f92672">]);</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> preorder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        insert<span style="color:#f92672">(</span>root<span style="color:#f92672">,</span> preorder<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> root<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> TreeNode <span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>val<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>val <span style="color:#f92672">&lt;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> insert<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> val<span style="color:#f92672">){</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> insert<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>上限法</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">bstFromPreorder</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preorder<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> insert<span style="color:#f92672">(</span>preorder<span style="color:#f92672">,</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">MAX_VALUE</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
<span style="color:#66d9ef">private</span> TreeNode <span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preorder<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">==</span> preorder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> val <span style="color:#f92672">=</span> preorder<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>val <span style="color:#f92672">+</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;[%d]&#34;</span><span style="color:#f92672">,</span> max<span style="color:#f92672">));</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>val <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    TreeNode node <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>val<span style="color:#f92672">);</span>
    i<span style="color:#f92672">++;</span>
    node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> insert<span style="color:#f92672">(</span>preorder<span style="color:#f92672">,</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">);</span> 
    node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> insert<span style="color:#f92672">(</span>preorder<span style="color:#f92672">,</span> max<span style="color:#f92672">);</span>     
    <span style="color:#66d9ef">return</span> node<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>依次处理 prevorder 中每个值, 返回创建好的节点或 null 作为上个节点的孩子</p>
<ol>
<li>如果超过上限, 返回 null</li>
<li>如果没超过上限, 创建节点, 并将其左右孩子设置完整后返回
<ul>
<li>i++ 需要放在设置左右孩子之前，意思是从剩下的元素中挑选左右孩子</li>
</ul>
</li>
</ol>
<p><strong>分治法</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">bstFromPreorder</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preorder<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> partition<span style="color:#f92672">(</span>preorder<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> preorder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> TreeNode <span style="color:#a6e22e">partition</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preorder<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> start<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> end<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>start <span style="color:#f92672">&gt;</span> end<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    TreeNode root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>preorder<span style="color:#f92672">[</span>start<span style="color:#f92672">]);</span>
    <span style="color:#66d9ef">int</span> index <span style="color:#f92672">=</span> start <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">&lt;=</span> end<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>preorder<span style="color:#f92672">[</span>index<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> preorder<span style="color:#f92672">[</span>start<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        index<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// index 就是右子树的起点
</span><span style="color:#75715e"></span>    root<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> partition<span style="color:#f92672">(</span>preorder<span style="color:#f92672">,</span> start <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> index <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    root<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> partition<span style="color:#f92672">(</span>preorder<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> end<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> root<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>刚开始 8, 5, 1, 7, 10, 12，方法每次执行，确定本次的根节点和左右子树的分界线</li>
<li>第一次确定根节点为 8，左子树 5, 1, 7，右子树 10, 12</li>
<li>对 5, 1, 7 做递归操作，确定根节点是 5， 左子树是 1， 右子树是 7</li>
<li>对 1 做递归操作，确定根节点是 1，左右子树为 null</li>
<li>对 7 做递归操作，确定根节点是 7，左右子树为 null</li>
<li>对 10, 12 做递归操作，确定根节点是 10，左子树为 null，右子树为 12</li>
<li>对 12 做递归操作，确定根节点是 12，左右子树为 null</li>
<li>递归结束，返回本范围内的根节点</li>
</ul>
<h3 id="e07-二叉搜索树的最近公共祖先-力扣-235-题">
  E07. 二叉搜索树的最近公共祖先-力扣 235 题
  <a class="anchor" href="#e07-%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91%e7%9a%84%e6%9c%80%e8%bf%91%e5%85%ac%e5%85%b1%e7%a5%96%e5%85%88-%e5%8a%9b%e6%89%a3-235-%e9%a2%98">#</a>
</h3>
<p>要点：若 p，q 在 ancestor 的两侧，则 ancestor 就是它们的最近公共祖先</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">lowestCommonAncestor</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">,</span> TreeNode p<span style="color:#f92672">,</span> TreeNode q<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    TreeNode ancestor <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>ancestor<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&gt;</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&amp;&amp;</span> ancestor<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&gt;</span> q<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">||</span> 
           ancestor<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&amp;&amp;</span> ancestor<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> q<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ancestor<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&gt;</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            ancestor <span style="color:#f92672">=</span> ancestor<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            ancestor <span style="color:#f92672">=</span> ancestor<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> ancestor<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="二叉树的最近公共祖先-力扣-236-题">
  二叉树的最近公共祖先-力扣 236 题
  <a class="anchor" href="#%e4%ba%8c%e5%8f%89%e6%a0%91%e7%9a%84%e6%9c%80%e8%bf%91%e5%85%ac%e5%85%b1%e7%a5%96%e5%85%88-%e5%8a%9b%e6%89%a3-236-%e9%a2%98">#</a>
</h3>
<h3 id="二叉树展开为链表-力扣-114-题">
  二叉树展开为链表-力扣 114 题
  <a class="anchor" href="#%e4%ba%8c%e5%8f%89%e6%a0%91%e5%b1%95%e5%bc%80%e4%b8%ba%e9%93%be%e8%a1%a8-%e5%8a%9b%e6%89%a3-114-%e9%a2%98">#</a>
</h3>
<h3 id="有序数组构造平衡二叉搜索树-力扣-108-题">
  有序数组构造平衡二叉搜索树-力扣 108 题
  <a class="anchor" href="#%e6%9c%89%e5%ba%8f%e6%95%b0%e7%bb%84%e6%9e%84%e9%80%a0%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91-%e5%8a%9b%e6%89%a3-108-%e9%a2%98">#</a>
</h3>
<h3 id="二叉搜索树变为平衡-力扣--1382-题">
  二叉搜索树变为平衡-力扣  1382 题
  <a class="anchor" href="#%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91%e5%8f%98%e4%b8%ba%e5%b9%b3%e8%a1%a1-%e5%8a%9b%e6%89%a3--1382-%e9%a2%98">#</a>
</h3>
<h2 id="2-hash-表">
  2. hash 表
  <a class="anchor" href="#2-hash-%e8%a1%a8">#</a>
</h2>
<h3 id="e01-两数之和-力扣-1-题">
  E01. 两数之和-力扣 1 题
  <a class="anchor" href="#e01-%e4%b8%a4%e6%95%b0%e4%b9%8b%e5%92%8c-%e5%8a%9b%e6%89%a3-1-%e9%a2%98">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E01Leetcode1</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">twoSum</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        HashMap<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> target <span style="color:#f92672">-</span> nums<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>map<span style="color:#f92672">.</span><span style="color:#a6e22e">containsKey</span><span style="color:#f92672">(</span>k<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>i<span style="color:#f92672">,</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>k<span style="color:#f92672">)};</span>
            <span style="color:#f92672">}</span>
            map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>nums<span style="color:#f92672">[</span>i<span style="color:#f92672">],</span> i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 不会执行
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>注意：题目明确说明<strong>只会存在一个有效答案</strong>，因此不会执行到最后的 return null</li>
</ul>
<h3 id="e02-无重复字符的最长字串-力扣-3-题">
  E02. 无重复字符的最长字串-力扣 3 题
  <a class="anchor" href="#e02-%e6%97%a0%e9%87%8d%e5%a4%8d%e5%ad%97%e7%ac%a6%e7%9a%84%e6%9c%80%e9%95%bf%e5%ad%97%e4%b8%b2-%e5%8a%9b%e6%89%a3-3-%e9%a2%98">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">lengthOfLongestSubstring</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    HashMap<span style="color:#f92672">&lt;</span>Character<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">int</span> begin <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> maxLength <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> end <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> end <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> end<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">char</span> ch <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>end<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>map<span style="color:#f92672">.</span><span style="color:#a6e22e">containsKey</span><span style="color:#f92672">(</span>ch<span style="color:#f92672">))</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 重复时调整 begin
</span><span style="color:#75715e"></span>            begin <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>begin<span style="color:#f92672">,</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>ch<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
            map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>ch<span style="color:#f92672">,</span> end<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 不重复
</span><span style="color:#75715e"></span>            map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>ch<span style="color:#f92672">,</span> end<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span>begin<span style="color:#f92672">,</span> end <span style="color:#f92672">+</span> 1<span style="color:#f92672">));</span>
        maxLength <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>maxLength<span style="color:#f92672">,</span> end <span style="color:#f92672">-</span> begin <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> maxLength<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>begin 调整时的解释，遇到重复的 begin 应该向右调整，例如</p>
<pre><code>abca
</code></pre><ul>
<li>遇到重复的 a，这时 begin 应该调整到上个重复字符 a 索引加 1 处，即 map.get(&lsquo;a&rsquo;) + 1 = 1，</li>
</ul>
<p>但还有一种情况需要考虑，就是连续遇到两次重复，例如</p>
<pre><code>abba
</code></pre><ul>
<li>遇到重复的 b，这时 begin 应该调整到上个重复字符 b 索引加 1 处，即 map.get(&lsquo;b&rsquo;) + 1 = 2</li>
<li>不过接下来，又遇到了重复的 a，此时若还执行 map.get(&lsquo;a&rsquo;) + 1 = 1，则 begin 相当于向左退了，不对</li>
<li>应该是 Math.max(2, map.get(&lsquo;a&rsquo;) + 1)，即 begin 应该是两个重复字符索引中更靠右者</li>
</ul>
<p>题目中说明 s 由英文字母、数字、符号和空格组成，因此它的范围是有限的（在 0 ~127 之内），可以用数组来替代 HashMap 优化，如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">lengthOfLongestSubstring</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>128<span style="color:#f92672">];</span>
    Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">fill</span><span style="color:#f92672">(</span>map<span style="color:#f92672">,</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> begin <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> maxLength <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> end <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> end <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> end<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">char</span> ch <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>end<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>map<span style="color:#f92672">[</span>ch<span style="color:#f92672">]</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 重复时调整 begin
</span><span style="color:#75715e"></span>            begin <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>begin<span style="color:#f92672">,</span> map<span style="color:#f92672">[</span>ch<span style="color:#f92672">]</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
            map<span style="color:#f92672">[</span>ch<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> end<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 不重复
</span><span style="color:#75715e"></span>            map<span style="color:#f92672">[</span>ch<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> end<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span>begin<span style="color:#f92672">,</span> end <span style="color:#f92672">+</span> 1<span style="color:#f92672">));</span>
        maxLength <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>maxLength<span style="color:#f92672">,</span> end <span style="color:#f92672">-</span> begin <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> maxLength<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e03-字母异位词分组-力扣-49-题">
  E03. 字母异位词分组-力扣 49 题
  <a class="anchor" href="#e03-%e5%ad%97%e6%af%8d%e5%bc%82%e4%bd%8d%e8%af%8d%e5%88%86%e7%bb%84-%e5%8a%9b%e6%89%a3-49-%e9%a2%98">#</a>
</h3>
<p>解法1</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">groupAnagrams</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> strs<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    HashMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String str <span style="color:#f92672">:</span> strs<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> chars <span style="color:#f92672">=</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">toCharArray</span><span style="color:#f92672">();</span>
        Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>chars<span style="color:#f92672">);</span>
        String key <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>chars<span style="color:#f92672">);</span>
        List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> strings <span style="color:#f92672">=</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">computeIfAbsent</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> k <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;());</span>
        strings<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;(</span>map<span style="color:#f92672">.</span><span style="color:#a6e22e">values</span><span style="color:#f92672">());</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>解法2</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayKey</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> key <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>26<span style="color:#f92672">];</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayKey</span><span style="color:#f92672">(</span>String str<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">char</span> ch <span style="color:#f92672">=</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
            key<span style="color:#f92672">[</span>ch <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;a&#39;</span><span style="color:#f92672">]++;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>Object o<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span> <span style="color:#f92672">==</span> o<span style="color:#f92672">)</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>o <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> getClass<span style="color:#f92672">()</span> <span style="color:#f92672">!=</span> o<span style="color:#f92672">.</span><span style="color:#a6e22e">getClass</span><span style="color:#f92672">())</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>

        ArrayKey arrayKey <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>ArrayKey<span style="color:#f92672">)</span> o<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">return</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> arrayKey<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">hashCode</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">hashCode</span><span style="color:#f92672">(</span>key<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">groupAnagrams</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> strs<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    HashMap<span style="color:#f92672">&lt;</span>ArrayKey<span style="color:#f92672">,</span> List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String str <span style="color:#f92672">:</span> strs<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> strings <span style="color:#f92672">=</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">computeIfAbsent</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> ArrayKey<span style="color:#f92672">(</span>str<span style="color:#f92672">),</span> k <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;());</span>
        strings<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;(</span>map<span style="color:#f92672">.</span><span style="color:#a6e22e">values</span><span style="color:#f92672">());</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e04-判断有没有重复元素-力扣-217">
  E04. 判断有没有重复元素-力扣 217
  <a class="anchor" href="#e04-%e5%88%a4%e6%96%ad%e6%9c%89%e6%b2%a1%e6%9c%89%e9%87%8d%e5%a4%8d%e5%85%83%e7%b4%a0-%e5%8a%9b%e6%89%a3-217">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">containsDuplicate</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 5ms
</span><span style="color:#75715e"></span>    HashSet<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> set <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashSet<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key <span style="color:#f92672">:</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>set<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>key<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e05-找出出现一次的数字-力扣-136">
  E05. 找出出现一次的数字-力扣 136
  <a class="anchor" href="#e05-%e6%89%be%e5%87%ba%e5%87%ba%e7%8e%b0%e4%b8%80%e6%ac%a1%e7%9a%84%e6%95%b0%e5%ad%97-%e5%8a%9b%e6%89%a3-136">#</a>
</h3>
<p>解法1：用 HashSet</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">singleNumber</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    HashSet<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> set <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashSet<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> num <span style="color:#f92672">:</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>set<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>num<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            set<span style="color:#f92672">.</span><span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span>num<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> set<span style="color:#f92672">.</span><span style="color:#a6e22e">toArray</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Integer<span style="color:#f92672">[</span>0<span style="color:#f92672">])[</span>0<span style="color:#f92672">];</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>解法2：用 xor</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">singleNumber</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> num <span style="color:#f92672">=</span> nums<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        num <span style="color:#f92672">=</span> num <span style="color:#f92672">^</span> nums<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> num<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e06-判断字母异位词-力扣-242">
  E06. 判断字母异位词-力扣 242
  <a class="anchor" href="#e06-%e5%88%a4%e6%96%ad%e5%ad%97%e6%af%8d%e5%bc%82%e4%bd%8d%e8%af%8d-%e5%8a%9b%e6%89%a3-242">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isAnagram</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">,</span> String t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 1ms
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>getKey<span style="color:#f92672">(</span>s<span style="color:#f92672">),</span> getKey<span style="color:#f92672">(</span>t<span style="color:#f92672">));</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">getKey</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>26<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> chars <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">toCharArray</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">char</span> ch <span style="color:#f92672">:</span> chars<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array<span style="color:#f92672">[</span>ch <span style="color:#f92672">-</span> 97<span style="color:#f92672">]++;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> array<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>其中用 s.toCharArray() 性能明显高于用 s.charAt() 一个个获取字符</li>
</ul>
<h3 id="e07-第一个不重复字符-力扣-387">
  E07. 第一个不重复字符-力扣 387
  <a class="anchor" href="#e07-%e7%ac%ac%e4%b8%80%e4%b8%aa%e4%b8%8d%e9%87%8d%e5%a4%8d%e5%ad%97%e7%ac%a6-%e5%8a%9b%e6%89%a3-387">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">firstUniqChar</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>26<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> chars <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">toCharArray</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">char</span> ch <span style="color:#f92672">:</span> chars<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array<span style="color:#f92672">[</span>ch<span style="color:#f92672">-</span>97<span style="color:#f92672">]++;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> chars<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">char</span> ch <span style="color:#f92672">=</span> chars<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>ch <span style="color:#f92672">-</span> 97<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> i<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e08-出现次数最多的单词-力扣-819">
  E08. 出现次数最多的单词-力扣 819
  <a class="anchor" href="#e08-%e5%87%ba%e7%8e%b0%e6%ac%a1%e6%95%b0%e6%9c%80%e5%a4%9a%e7%9a%84%e5%8d%95%e8%af%8d-%e5%8a%9b%e6%89%a3-819">#</a>
</h3>
<p>简洁解法 14 ms</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">mostCommonWord</span><span style="color:#f92672">(</span>String paragraph<span style="color:#f92672">,</span> String<span style="color:#f92672">[]</span> banned<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    Set<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> banSet <span style="color:#f92672">=</span> Set<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>banned<span style="color:#f92672">);</span>
    HashMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
	String<span style="color:#f92672">[]</span> split <span style="color:#f92672">=</span> paragraph<span style="color:#f92672">.</span><span style="color:#a6e22e">toLowerCase</span><span style="color:#f92672">().</span><span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;[^A-Za-z]+&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String key <span style="color:#f92672">:</span> split<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>banSet<span style="color:#f92672">.</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span>key<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">continue</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        map<span style="color:#f92672">.</span><span style="color:#a6e22e">compute</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> v<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> v <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> v <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
	Optional<span style="color:#f92672">&lt;</span>Map<span style="color:#f92672">.</span><span style="color:#a6e22e">Entry</span><span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;&gt;</span> optional <span style="color:#f92672">=</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">entrySet</span><span style="color:#f92672">().</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">().</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>Map<span style="color:#f92672">.</span><span style="color:#a6e22e">Entry</span><span style="color:#f92672">.</span><span style="color:#a6e22e">comparingByValue</span><span style="color:#f92672">());</span>
    <span style="color:#66d9ef">return</span> optional<span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">(</span>Map<span style="color:#f92672">.</span><span style="color:#a6e22e">Entry</span><span style="color:#f92672">::</span>getKey<span style="color:#f92672">).</span><span style="color:#a6e22e">orElse</span><span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>后两行避免 lambda，12 ms</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">mostCommonWord</span><span style="color:#f92672">(</span>String paragraph<span style="color:#f92672">,</span> String<span style="color:#f92672">[]</span> banned<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    Set<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> banSet <span style="color:#f92672">=</span> Set<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>banned<span style="color:#f92672">);</span>
    String<span style="color:#f92672">[]</span> split <span style="color:#f92672">=</span> paragraph<span style="color:#f92672">.</span><span style="color:#a6e22e">toLowerCase</span><span style="color:#f92672">().</span><span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;[^A-Za-z]+&#34;</span><span style="color:#f92672">);</span>
    HashMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String key <span style="color:#f92672">:</span> split<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>banSet<span style="color:#f92672">.</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span>key<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">continue</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        map<span style="color:#f92672">.</span><span style="color:#a6e22e">compute</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> v<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> v <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> v <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    Integer max <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    String maxKey <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Map<span style="color:#f92672">.</span><span style="color:#a6e22e">Entry</span><span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> e <span style="color:#f92672">:</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">entrySet</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        Integer value <span style="color:#f92672">=</span> e<span style="color:#f92672">.</span><span style="color:#a6e22e">getValue</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>value <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            maxKey <span style="color:#f92672">=</span> e<span style="color:#f92672">.</span><span style="color:#a6e22e">getKey</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> maxKey<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>避免正则匹配 5ms</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">mostCommonWord</span><span style="color:#f92672">(</span>String paragraph<span style="color:#f92672">,</span> String<span style="color:#f92672">[]</span> banned<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    Set<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> banSet <span style="color:#f92672">=</span> Set<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>banned<span style="color:#f92672">);</span>
    HashMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> chars <span style="color:#f92672">=</span> paragraph<span style="color:#f92672">.</span><span style="color:#a6e22e">toLowerCase</span><span style="color:#f92672">().</span><span style="color:#a6e22e">toCharArray</span><span style="color:#f92672">();</span>
    StringBuilder sb <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringBuilder<span style="color:#f92672">();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">char</span> ch <span style="color:#f92672">:</span> chars<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ch <span style="color:#f92672">&gt;=</span> <span style="color:#e6db74">&#39;a&#39;</span> <span style="color:#f92672">&amp;&amp;</span> ch <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;z&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            sb<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>ch<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            put<span style="color:#f92672">(</span>banSet<span style="color:#f92672">,</span> map<span style="color:#f92672">,</span> sb<span style="color:#f92672">);</span>
            sb <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringBuilder<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    put<span style="color:#f92672">(</span>banSet<span style="color:#f92672">,</span> map<span style="color:#f92672">,</span> sb<span style="color:#f92672">);</span>

    Integer max <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    String maxKey <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Map<span style="color:#f92672">.</span><span style="color:#a6e22e">Entry</span><span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> e <span style="color:#f92672">:</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">entrySet</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        Integer value <span style="color:#f92672">=</span> e<span style="color:#f92672">.</span><span style="color:#a6e22e">getValue</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>value <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            maxKey <span style="color:#f92672">=</span> e<span style="color:#f92672">.</span><span style="color:#a6e22e">getKey</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> maxKey<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>Set<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> banSet<span style="color:#f92672">,</span> HashMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map<span style="color:#f92672">,</span> StringBuilder sb<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sb<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        String key <span style="color:#f92672">=</span> sb<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(!</span>banSet<span style="color:#f92672">.</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span>key<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            map<span style="color:#f92672">.</span><span style="color:#a6e22e">compute</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">,</span> v<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> v <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> v <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>sb 避免每次新建 4ms</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">sb<span style="color:#f92672">.</span><span style="color:#a6e22e">setLength</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
</code></pre></div><h3 id="e09-leetcode105improved">
  E09. Leetcode105Improved
  <a class="anchor" href="#e09-leetcode105improved">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E09Leetcode105Improved</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">//  用 hashmap 改善查找性能，其中 key 是 inOrder 值， value 是 inOrder 索引
</span><span style="color:#75715e"></span>    HashMap<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>

    <span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">buildTree</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preOrder<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inOrder<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>inOrder<span style="color:#f92672">[</span>i<span style="color:#f92672">],</span> i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> helper<span style="color:#f92672">(</span>preOrder<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// preBegin 决定了每次在 preOrder 中找到根元素
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// inBegin 和 inEnd 可以用来获取区间内元素个数，结束递归等
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> TreeNode <span style="color:#a6e22e">helper</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preOrder<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> preBegin<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> inBegin<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> inEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>inBegin <span style="color:#f92672">&gt;</span> inEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> rootValue <span style="color:#f92672">=</span> preOrder<span style="color:#f92672">[</span>preBegin<span style="color:#f92672">];</span>
        TreeNode root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>rootValue<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>rootValue<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">int</span> leftSize <span style="color:#f92672">=</span> i <span style="color:#f92672">-</span> inBegin<span style="color:#f92672">;</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;元素：&#34;</span> <span style="color:#f92672">+</span> rootValue <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; left[&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>preBegin <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;] inOrder 索引范围[&#34;</span> <span style="color:#f92672">+</span> inBegin <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;~&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;]&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;元素：&#34;</span> <span style="color:#f92672">+</span> rootValue <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; right[&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>preBegin <span style="color:#f92672">+</span> 1 <span style="color:#f92672">+</span> leftSize<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;] inOrder 索引范围[&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;~&#34;</span> <span style="color:#f92672">+</span> inEnd <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;]&#34;</span><span style="color:#f92672">);</span>
        root<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> helper<span style="color:#f92672">(</span>preOrder<span style="color:#f92672">,</span> preBegin <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> inBegin<span style="color:#f92672">,</span> i <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        root<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> helper<span style="color:#f92672">(</span>preOrder<span style="color:#f92672">,</span> preBegin <span style="color:#f92672">+</span> 1 <span style="color:#f92672">+</span> leftSize<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> inEnd<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> root<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preOrder <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>1<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 7<span style="color:#f92672">};</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inOrder <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>4<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 7<span style="color:#f92672">};</span>
        <span style="color:#75715e">/*
</span><span style="color:#75715e">        例如：
</span><span style="color:#75715e">        根据根节点[1] 到中序遍历数组中一分为2，首次递归
</span><span style="color:#75715e">            [1] 2  4  3  6  7  前
</span><span style="color:#75715e">            0   1  2  3  4  5  前索引
</span><span style="color:#75715e">
</span><span style="color:#75715e">            4  2  [1] 6  3  7  中
</span><span style="color:#75715e">            0  1  2   3  4  5  中索引
</span><span style="color:#75715e">
</span><span style="color:#75715e">            确定 preOrder 中 left 和 right 的递归起始索引，当然也要确定 inOrder 对应的两个索引位置
</span><span style="color:#75715e">                left    right
</span><span style="color:#75715e">            1   [2]  4  [3]  6  7  前
</span><span style="color:#75715e">            0   1    2  3    4  5  前索引
</span><span style="color:#75715e">            left  inOrder 索引范围： 0~1
</span><span style="color:#75715e">            right inOrder 索引范围： 3~5
</span><span style="color:#75715e">
</span><span style="color:#75715e">         */</span>
        TreeNode root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> E09Leetcode105Improved<span style="color:#f92672">().</span><span style="color:#a6e22e">buildTree</span><span style="color:#f92672">(</span>preOrder<span style="color:#f92672">,</span> inOrder<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e10-e10leetcode106improved">
  E10. E10Leetcode106Improved
  <a class="anchor" href="#e10-e10leetcode106improved">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E10Leetcode106Improved</span> <span style="color:#f92672">{</span>
    HashMap<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>

    <span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">buildTree</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inOrder<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> postOrder<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>inOrder<span style="color:#f92672">[</span>i<span style="color:#f92672">],</span> i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> helper<span style="color:#f92672">(</span>postOrder<span style="color:#f92672">,</span> postOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/*
</span><span style="color:#75715e">        inOrder = {4,2,1,6,3,7}
</span><span style="color:#75715e">        postOrder = {4,2,6,7,3,1}
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> TreeNode <span style="color:#a6e22e">helper</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> postOrder<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> postEnd<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> inBegin<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> inEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>inBegin <span style="color:#f92672">&gt;</span> inEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> rootValue <span style="color:#f92672">=</span> postOrder<span style="color:#f92672">[</span>postEnd<span style="color:#f92672">];</span>
        TreeNode root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>rootValue<span style="color:#f92672">);</span>
        Integer i <span style="color:#f92672">=</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>rootValue<span style="color:#f92672">);</span>
<span style="color:#75715e">//        int leftSize = i - inBegin;
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> rightSize <span style="color:#f92672">=</span> inEnd <span style="color:#f92672">-</span> i<span style="color:#f92672">;</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;元素：&#34;</span> <span style="color:#f92672">+</span> rootValue <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; left[&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>postEnd <span style="color:#f92672">-</span> 1 <span style="color:#f92672">-</span> rightSize<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;] inOrder 索引范围[&#34;</span> <span style="color:#f92672">+</span> inBegin <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;~&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;]&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;元素：&#34;</span> <span style="color:#f92672">+</span> rootValue <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; right[&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>postEnd <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;] inOrder 索引范围[&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;~&#34;</span> <span style="color:#f92672">+</span> inEnd <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;]&#34;</span><span style="color:#f92672">);</span>
        root<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> helper<span style="color:#f92672">(</span>postOrder<span style="color:#f92672">,</span> postEnd <span style="color:#f92672">-</span> 1 <span style="color:#f92672">-</span> rightSize<span style="color:#f92672">,</span> inBegin<span style="color:#f92672">,</span> i <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        root<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> helper<span style="color:#f92672">(</span>postOrder<span style="color:#f92672">,</span> postEnd <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> inEnd<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> root<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> postOrder <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>4<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 1<span style="color:#f92672">};</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inOrder <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>4<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 7<span style="color:#f92672">};</span>
        TreeNode root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> E10Leetcode106Improved<span style="color:#f92672">().</span><span style="color:#a6e22e">buildTree</span><span style="color:#f92672">(</span>inOrder<span style="color:#f92672">,</span> postOrder<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="3-排序">
  3. 排序
  <a class="anchor" href="#3-%e6%8e%92%e5%ba%8f">#</a>
</h2>
<table>
<thead>
<tr>
<th>题目编号</th>
<th>题目标题</th>
<th>排序算法类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>1122</td>
<td>数组的相对排序</td>
<td>计数排序</td>
</tr>
<tr>
<td>1636</td>
<td>按照频率将数组升序排序</td>
<td>计数排序</td>
</tr>
<tr>
<td>164</td>
<td>最大间距</td>
<td>基数排序、桶排序</td>
</tr>
<tr>
<td>315</td>
<td>计算右侧小于当前元素的个数</td>
<td>基数排序</td>
</tr>
<tr>
<td>347</td>
<td>前 K 个高频元素</td>
<td>桶排序</td>
</tr>
</tbody>
</table>
<h3 id="e01-根据另一个数组次序排序---力扣1122题">
  E01. 根据另一个数组次序排序 - 力扣1122题
  <a class="anchor" href="#e01-%e6%a0%b9%e6%8d%ae%e5%8f%a6%e4%b8%80%e4%b8%aa%e6%95%b0%e7%bb%84%e6%ac%a1%e5%ba%8f%e6%8e%92%e5%ba%8f---%e5%8a%9b%e6%89%a31122%e9%a2%98">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/*
</span><span style="color:#75715e">    前提
</span><span style="color:#75715e">    1. 元素值均 &gt;= 0
</span><span style="color:#75715e">    2. arr2 内元素唯一，且长度 &lt;= 1000
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E01Leetcode1122</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">relativeSortArray</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> arr1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> arr2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> count <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>1001<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> arr1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            count<span style="color:#f92672">[</span>i<span style="color:#f92672">]++;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>arr1<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> arr2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>count<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                result<span style="color:#f92672">[</span>k<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
                count<span style="color:#f92672">[</span>i<span style="color:#f92672">]--;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> count<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>count<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                result<span style="color:#f92672">[</span>k<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
                count<span style="color:#f92672">[</span>i<span style="color:#f92672">]--;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e02-按出现频率排序---力扣-1636">
  E02. 按出现频率排序 - 力扣 1636
  <a class="anchor" href="#e02-%e6%8c%89%e5%87%ba%e7%8e%b0%e9%a2%91%e7%8e%87%e6%8e%92%e5%ba%8f---%e5%8a%9b%e6%89%a3-1636">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E02Leetcode1636</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">frequencySort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> count <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>201<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            count<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 100<span style="color:#f92672">]++;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">return</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">(</span>nums<span style="color:#f92672">).</span><span style="color:#a6e22e">boxed</span><span style="color:#f92672">().</span><span style="color:#a6e22e">sorted</span><span style="color:#f92672">((</span>a<span style="color:#f92672">,</span> b<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> fa <span style="color:#f92672">=</span> count<span style="color:#f92672">[</span>a <span style="color:#f92672">+</span> 100<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">int</span> fb <span style="color:#f92672">=</span> count<span style="color:#f92672">[</span>b <span style="color:#f92672">+</span> 100<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>fa <span style="color:#f92672">==</span> fb<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">compare</span><span style="color:#f92672">(</span>b<span style="color:#f92672">,</span> a<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> fa <span style="color:#f92672">-</span> fb<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}).</span><span style="color:#a6e22e">mapToInt</span><span style="color:#f92672">(</span>Integer<span style="color:#f92672">::</span>intValue<span style="color:#f92672">).</span><span style="color:#a6e22e">toArray</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e03-最大间距---力扣-164">
  E03. 最大间距 - 力扣 164
  <a class="anchor" href="#e03-%e6%9c%80%e5%a4%a7%e9%97%b4%e8%b7%9d---%e5%8a%9b%e6%89%a3-164">#</a>
</h3>
<p>解法1：桶排序 - 超过<strong>内存</strong>限制</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E03Leetcode164_1</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maximumGap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">&lt;</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        sort<span style="color:#f92672">(</span>nums<span style="color:#f92672">,</span> 1<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">int</span> ret <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> n<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            ret <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>ret<span style="color:#f92672">,</span> nums<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">-</span> nums<span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">]);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> ret<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> range<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                max <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                min <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 1. 准备桶
</span><span style="color:#75715e"></span>        DynamicArray<span style="color:#f92672">[]</span> buckets <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicArray<span style="color:#f92672">[(</span>max <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> range <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> buckets<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            buckets<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicArray<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 2. 放入数据
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> age <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            buckets<span style="color:#f92672">[(</span>age <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> range<span style="color:#f92672">].</span><span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span>age<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>DynamicArray bucket <span style="color:#f92672">:</span> buckets<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 3. 排序桶内元素
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> bucket<span style="color:#f92672">.</span><span style="color:#a6e22e">array</span><span style="color:#f92672">();</span>
            InsertionSort<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>array<span style="color:#f92672">);</span>
            <span style="color:#75715e">// 4. 把每个桶排序好的内容，依次放入原始数组
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> v <span style="color:#f92672">:</span> array<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                a<span style="color:#f92672">[</span>k<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> v<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>13<span style="color:#f92672">,</span> 26<span style="color:#f92672">,</span> 16<span style="color:#f92672">,</span> 11<span style="color:#f92672">};</span>
        <span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> E03Leetcode164_1<span style="color:#f92672">().</span><span style="color:#a6e22e">maximumGap</span><span style="color:#f92672">(</span>nums<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>r<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>解法2：基数排序</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E03Leetcode164</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maximumGap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&lt;</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
                
        <span style="color:#75715e">// 计算最大值
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">],</span> max<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
		
        <span style="color:#75715e">// 准备10个桶
</span><span style="color:#75715e"></span>        ArrayList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;[]</span> buckets <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">[</span>10<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> buckets<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            buckets<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// 没超过最大值
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">long</span> exp <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">&gt;=</span> exp<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">:</span> a<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                buckets<span style="color:#f92672">[(</span>j <span style="color:#f92672">/</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)</span> exp<span style="color:#f92672">)</span> <span style="color:#f92672">%</span> 10<span style="color:#f92672">].</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>j<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>ArrayList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> bucket <span style="color:#f92672">:</span> buckets<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Integer i <span style="color:#f92672">:</span> bucket<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    a<span style="color:#f92672">[</span>k<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                bucket<span style="color:#f92672">.</span><span style="color:#a6e22e">clear</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            exp <span style="color:#f92672">*=</span> 10<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// 求最大间距
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            r <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>r<span style="color:#f92672">,</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">-</span> a<span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">]);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> r<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>3<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 16<span style="color:#f92672">,</span> 1<span style="color:#f92672">};</span>
        <span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> E03Leetcode164<span style="color:#f92672">().</span><span style="color:#a6e22e">maximumGap</span><span style="color:#f92672">(</span>nums<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>r<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>解法3：桶排序 - 合理化桶个数</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E03Leetcode164_3</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maximumGap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 1. 处理特殊情况
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&lt;</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 2. 桶排序
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> nums<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> nums<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i1 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i1 <span style="color:#f92672">&lt;</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i1<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>nums<span style="color:#f92672">[</span>i1<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                max <span style="color:#f92672">=</span> nums<span style="color:#f92672">[</span>i1<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>nums<span style="color:#f92672">[</span>i1<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                min <span style="color:#f92672">=</span> nums<span style="color:#f92672">[</span>i1<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 2.1 准备桶
</span><span style="color:#75715e"></span>        <span style="color:#75715e">/*
</span><span style="color:#75715e">            计算桶个数                   期望桶个数
</span><span style="color:#75715e">            (max - min) / range + 1 = nums.length
</span><span style="color:#75715e">            (max - min) / (nums.length - 1) = range
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">int</span> range <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">((</span>max <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> <span style="color:#f92672">(</span>nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">),</span> 1<span style="color:#f92672">);</span>
        DynamicArray<span style="color:#f92672">[]</span> buckets <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicArray<span style="color:#f92672">[(</span>max <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> range <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i1 <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i1 <span style="color:#f92672">&lt;</span> buckets<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i1<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            buckets<span style="color:#f92672">[</span>i1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicArray<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 2.2 放入数据
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> age <span style="color:#f92672">:</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            buckets<span style="color:#f92672">[(</span>age <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> range<span style="color:#f92672">].</span><span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span>age<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>DynamicArray bucket <span style="color:#f92672">:</span> buckets<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 2.3 排序桶内元素
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> bucket<span style="color:#f92672">.</span><span style="color:#a6e22e">array</span><span style="color:#f92672">();</span>
            InsertionSort<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>array<span style="color:#f92672">);</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>array<span style="color:#f92672">));</span>
            <span style="color:#75715e">// 2.4 把每个桶排序好的内容，依次放入原始数组
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> v <span style="color:#f92672">:</span> array<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                nums<span style="color:#f92672">[</span>k<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> v<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 3. 寻找最大差值
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            r <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>r<span style="color:#f92672">,</span> nums<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">-</span> nums<span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">]);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> r<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
<span style="color:#75715e">//        int[] nums = {1, 10000000};
</span><span style="color:#75715e">//        int[] nums = {9, 1, 3, 5};
</span><span style="color:#75715e">//        int[] nums = {1, 1, 1, 1};
</span><span style="color:#75715e">//        int[] nums = {1, 1, 1, 1, 1, 5, 5, 5, 5, 5};
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>15252<span style="color:#f92672">,</span> 16764<span style="color:#f92672">,</span> 27963<span style="color:#f92672">,</span> 7817<span style="color:#f92672">,</span> 26155<span style="color:#f92672">,</span> 20757<span style="color:#f92672">,</span> 3478<span style="color:#f92672">,</span> 22602<span style="color:#f92672">,</span> 20404<span style="color:#f92672">,</span> 6739<span style="color:#f92672">,</span> 16790<span style="color:#f92672">,</span> 10588<span style="color:#f92672">,</span> 16521<span style="color:#f92672">,</span> 6644<span style="color:#f92672">,</span> 20880<span style="color:#f92672">,</span> 15632<span style="color:#f92672">,</span> 27078<span style="color:#f92672">,</span> 25463<span style="color:#f92672">,</span> 20124<span style="color:#f92672">,</span> 15728<span style="color:#f92672">,</span> 30042<span style="color:#f92672">,</span> 16604<span style="color:#f92672">,</span> 17223<span style="color:#f92672">,</span> 4388<span style="color:#f92672">,</span> 23646<span style="color:#f92672">,</span> 32683<span style="color:#f92672">,</span> 23688<span style="color:#f92672">,</span> 12439<span style="color:#f92672">,</span> 30630<span style="color:#f92672">,</span> 3895<span style="color:#f92672">,</span> 7926<span style="color:#f92672">,</span> 22101<span style="color:#f92672">,</span> 32406<span style="color:#f92672">,</span> 21540<span style="color:#f92672">,</span> 31799<span style="color:#f92672">,</span> 3768<span style="color:#f92672">,</span> 26679<span style="color:#f92672">,</span> 21799<span style="color:#f92672">,</span> 23740<span style="color:#f92672">};</span>
        <span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> E03Leetcode164_3<span style="color:#f92672">().</span><span style="color:#a6e22e">maximumGap</span><span style="color:#f92672">(</span>nums<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>r<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>解法4：在解法3的基础上，只保留桶内最大最小值</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E03Leetcode164_4</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maximumGap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 1. 处理特殊情况
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&lt;</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 2. 桶排序
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// 桶个数 (max - min) / range + 1  期望桶个数 nums.length + 1
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// range = (max - min) / nums.length
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> nums<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> nums<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>nums<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                max <span style="color:#f92672">=</span> nums<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>nums<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                min <span style="color:#f92672">=</span> nums<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">==</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> range <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> range <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        Pair<span style="color:#f92672">[]</span> buckets <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Pair<span style="color:#f92672">[</span>size<span style="color:#f92672">];</span>
        <span style="color:#75715e">// 2. 放入数据
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> idx <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">-</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> range<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>buckets<span style="color:#f92672">[</span>idx<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                buckets<span style="color:#f92672">[</span>idx<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Pair<span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            buckets<span style="color:#f92672">[</span>idx<span style="color:#f92672">].</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>buckets<span style="color:#f92672">));</span>
        <span style="color:#75715e">// 3. 寻找最大差值
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> lastMax <span style="color:#f92672">=</span> buckets<span style="color:#f92672">[</span>0<span style="color:#f92672">].</span><span style="color:#a6e22e">max</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> buckets<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            Pair pair <span style="color:#f92672">=</span> buckets<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>pair <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                r <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>r<span style="color:#f92672">,</span> pair<span style="color:#f92672">.</span><span style="color:#a6e22e">min</span> <span style="color:#f92672">-</span> lastMax<span style="color:#f92672">);</span>
                lastMax <span style="color:#f92672">=</span> pair<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> r<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Pair</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> 1000_000_000<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> v<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>max<span style="color:#f92672">,</span> v<span style="color:#f92672">);</span>
            min <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">min</span><span style="color:#f92672">(</span>min<span style="color:#f92672">,</span> v<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#a6e22e">@Override</span>
        <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;[&#34;</span> <span style="color:#f92672">+</span> min <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;,&#34;</span> <span style="color:#f92672">+</span> max <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;]&#34;</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>9<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 5<span style="color:#f92672">};</span>
<span style="color:#75715e">//        int[] nums = {1, 10000000};
</span><span style="color:#75715e">//        int[] nums = {1, 1, 1, 1};
</span><span style="color:#75715e">//        int[] nums = {1, 1, 1, 1, 1, 5, 5, 5, 5, 5};
</span><span style="color:#75715e">//        int[] nums = {15252, 16764, 27963, 7817, 26155, 20757, 3478, 22602, 20404, 6739, 16790, 10588, 16521, 6644, 20880, 15632, 27078, 25463, 20124, 15728, 30042, 16604, 17223, 4388, 23646, 32683, 23688, 12439, 30630, 3895, 7926, 22101, 32406, 21540, 31799, 3768, 26679, 21799, 23740};
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> E03Leetcode164_4<span style="color:#f92672">().</span><span style="color:#a6e22e">maximumGap</span><span style="color:#f92672">(</span>nums<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>r<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><table>
<thead>
<tr>
<th>题目编号</th>
<th>题目标题</th>
<th>排序算法类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>75</td>
<td>颜色分类</td>
<td>三向切分快速排序</td>
</tr>
<tr>
<td>215</td>
<td>数组中的第K个最大元素</td>
<td>堆排序</td>
</tr>
<tr>
<td>493</td>
<td>翻转对</td>
<td>归并排序</td>
</tr>
<tr>
<td>493</td>
<td>翻转对</td>
<td>树状数组</td>
</tr>
<tr>
<td>524</td>
<td>通过删除字母匹配到字典里最长单词</td>
<td>循环排序</td>
</tr>
<tr>
<td>977</td>
<td>有序数组的平方</td>
<td>双指针法</td>
</tr>
</tbody>
</table>
</article>
 
      


<p id="inspirational_statement_content" style="color: red"></p>
<script>

    
    function randomNum(minNum,maxNum){
        switch(arguments.length){
            case 1:
                return parseInt(Math.random()*minNum+1,10);
                break;
            case 2:
                return parseInt(Math.random()*(maxNum-minNum+1)+minNum,10);
                break;
            default:
                return 0;
                break;
        }
    }

    var inspirational_statement_array = [] ;

    inspirational_statement_array.push('不奋斗，你的才华如何配得上你的任性。不奋斗，你的脚步如何赶得上父母老去的速度。不奋斗，世界这么大你靠什么去看看') ;
    inspirational_statement_array.push('开挂的人生，不是天生就有持续不断的鸡血，而是后天获得了从痛苦中给自己充电的能力。') ;
    inspirational_statement_array.push('如果你连工作挣钱都要别人开导你，都要人盯着，看着，哄着，鼓励着，劝你还是别干了，那你就应该穷！这是不是鸡汤，这是现实。') ;
    inspirational_statement_array.push('趁着梦想还有温度，人生还有转机，抓紧时间去奋斗，不要等到中年时，只能叹息自己的碌碌无为') ;
    inspirational_statement_array.push('世上所有的牛逼背后，都是一帮玩命的人') ;
    inspirational_statement_array.push('你可以一辈子不登山，但你心中一定要有座山。它使你总往高处爬，它使你总有个奋斗的方向，它使你任何一刻抬起头，都能看到自己的希望') ;
    inspirational_statement_array.push('我喜欢这个功利的世界，因为它承认每个人的努力，好看的姑娘能轻松几年，但会赚钱的姑娘才能过好一生') ;
    inspirational_statement_array.push('影响我们人生的绝不仅仅是环境，其实是心态在控制个人的行动和思想。同时，心态也决定了一个人的视野、事业和成就，甚至一生') ;
    inspirational_statement_array.push('第一眼就看上的衣服往往你买不起，第一眼就心动的人往往他不会喜欢你。你真正喜欢想要的，没有一样是可以轻易得到的。这就是努力的理由') ;
    inspirational_statement_array.push('愿你能把梦想放在心底，化为最坚定的力量。不管一路上多么坎坷和不安，那份坚持一直在；不管一路上多么坦途或荆棘，那份努力一直在') ;
    inspirational_statement_array.push('你所做的事情，也许暂时看不到成果，但不要灰心或焦虑，你不是没有成长，而是在扎根。') ;
    inspirational_statement_array.push('生活教会我们的第一件事就是——没有人可以宠你一辈子，要想走得精彩又坦荡，唯有独立坚强。新的一天开始了，替未来的你抱抱现在努力奋斗的自己') ;
    inspirational_statement_array.push('我终于相信，每一条走上来的路，都有它不得不那样跋涉的理由。每一条要走下去的路，都有它不得不那样选择的方向') ;
    inspirational_statement_array.push('人生，就要活得漂亮，走得铿锵。无论你是谁，宁可做拼搏的失败者，也不要做安于现状的平凡人') ;
    inspirational_statement_array.push('有梦想的人不做选择题，只做证明题，所以，年轻的你，可以犯错，可以跌倒，但千万不要怀疑自己，也不要放弃梦想。去想去的地方，做该做的事情，不迟疑，不徘徊') ;
    inspirational_statement_array.push('能力不在脸上，本事不在嘴上。要踏踏实实做实事，生活不会因为某个节点而变得与众不同，未来的幸运都是过往努力的积攒') ;
    inspirational_statement_array.push('当所有人都拿你当回事的时候，你不能太拿自己当回事；当所有人都不拿你当回事的时，你一定得瞧得上自己。这就是淡定，这就是从容') ;
    inspirational_statement_array.push('生活给你的很多难堪，不是在跟你过不去，而是要你不断提高生存的技能。你看别人干什么好像都是轻而易举，很容易成功，那是因为别人背后可能比你多付出了百倍的努力!') ;
    inspirational_statement_array.push('当一个人的心中有着更高的山峰想去攀登时，他就不会在意脚下的泥沼，他才可能用最平静的方式去面对一般人难以承受的痛苦。') ;
    inspirational_statement_array.push('这世间从来没有所谓的逆袭。如果有的话，也不过是日复一日自律和努力的结果。') ;
    inspirational_statement_array.push('人生就是一个磨练的过程，如果没有这些酸甜苦辣，你永远都不会成熟！所以，我们应该在阳光下灿烂，风雨中奔跑，泪水中成长，拼搏中展望，对自己说一声：昨天挺好，今天很好，明天会更好！') ;

    inspirational_statement_array.push('人生要用简单的心境，对待复杂的人生，最无情的不是人，是时间；最珍贵的不是金钱，是情感；最可怕的不是失恋，是心身不全；最舒适的不是酒店，是家里；最难听的不是脏话，是无言；最美好的不是未来，是今天。') ;

    inspirational_statement_array.push('在一切变好之前，我们总要经历一些不开心的日子，这段日子也许很长，也许只是一觉醒来。有时候，选择快乐，更需要勇气。') ;
    inspirational_statement_array.push('如果你的生活已处于低谷，那就，大胆走，因为你怎样走都是在向上。') ;
    inspirational_statement_array.push('你可以哭但不能输，你可以难过但不可以落魄，你不努力怎么会知道自己可以赢得多少掌声?如果你能每天呐喊遍“我用不着为这一点小事而烦恼”，你会发现，你心里有一种不可思议的力量，试试看，很管用的。') ;
    inspirational_statement_array.push('生活不是用来妥协的，你退缩得越多，能让你喘息的空间就越有限。日子不是用来将就的，你表现得越卑微，一些幸福的东西就会离你越远。') ;
    inspirational_statement_array.push('过去的事，就让它过去吧，我们错过了昨日的日落，再也不能错过今日的日出，保持平衡的心态，以最美好的心情来对待每一天，每一天都会充满阳光，洋溢着希望。') ;
    inspirational_statement_array.push('人生快不快乐看心情，幸不幸福看心态。漫长人生中，什么都不是一眼看到头的，一时的春风得意算不了什么，一时的失败也不能算数。') ;
    inspirational_statement_array.push('成功没有快车道，幸福没有高速路。所有的成功，都来自不倦的努力和奔跑；所有幸福，都来自平凡的奋斗和坚持。') ;
    inspirational_statement_array.push('每天都是一个起点，每天都有一点进步，每天都有一点收获!') ;
    inspirational_statement_array.push('眼泪不是我们的答案，拼搏才是我们的选择。') ;
    inspirational_statement_array.push('静下来，铸我实力；拼上去，亮我风采。') ;
    inspirational_statement_array.push('霸气盈胸，高山有顶我为峰；豪情壮志，乾坤朗朗我称雄。') ;
    inspirational_statement_array.push(' 宁可战死，不可吓死。今朝不搏，更待何时?') ;
    inspirational_statement_array.push('不论在何时开始，重要的是开始之后就不要停止；不论在何时，重要的是之后就不要悔恨。') ;
    inspirational_statement_array.push('明天是世上增值最快的一块土地，因它充满了希望。') ;
    inspirational_statement_array.push('越接近考试，往往越要在坚实上下功夫。') ;
    inspirational_statement_array.push('最弱的人，集中精力于单一目标，也能有所成就，最强的人，分心太多事务，可能一事无成。') ;
    inspirational_statement_array.push('你想活得更有质量更有层次更有品位吗?那就努力改变你的现状!') ;
    inspirational_statement_array.push('时间不等待，珍惜今天，把握现在!') ;
    inspirational_statement_array.push('以阳光和微笑示人，在逆境中燃起斗志!') ;
    inspirational_statement_array.push('苦想没盼头，苦干有奔头。') ;
    inspirational_statement_array.push('人的才华就如海绵的水，没有外力的挤压，它是绝对流不出来的。流出来后，海绵才能吸收新的源泉。') ;
    inspirational_statement_array.push('忍别人所不能忍的痛，吃别人所不能吃的苦，是为了收获得不到的收获。') ;
    inspirational_statement_array.push('人生如梦，一切皆有可能，只要你能想。') ;
    inspirational_statement_array.push('别想一下造出大海，必须先由小河川开始。') ;
    inspirational_statement_array.push('悲观些看成功，乐观些看失败。轻松些看自己，宽容些看别人。理智些看问题，纯真些看人生。') ;
    inspirational_statement_array.push('无须自卑，不要自负，坚持自信。') ;
    inspirational_statement_array.push('身体常动，内心常静。') ;
    inspirational_statement_array.push('学习与坐禅相似，须有一颗恒心。') ;

    window.onload = function () {
        var index = randomNum(0,inspirational_statement_array.length-1) ;
        var oldText = "" ;
        console.log(index);
        document.getElementById('inspirational_statement_content').innerText = oldText+""+inspirational_statement_array[index] ;
    } ;
</script>
<script>
    function hous(x,y,r,h,context){

        var gen3=Math.sqrt(3);
        var rs=0.5*r;
        switch(h)
        {
            case 1:
                context.fillText("1",x+rs,y-rs*gen3);
                break;
            case 2:
                context.fillText("2",x+gen3*rs,y-rs);
                break;
            case 3:
                context.fillText("3",x+2*rs,y);
                break;
            case 4:
                context.fillText("4",x+gen3*rs,y+rs);
                break;
            case 5:
                context.fillText("5",x+rs,y+gen3*rs);
                break;
            case 6:
                context.fillText("6",x,y+2*rs);
                break;
            case 7:
                context.fillText("7",x-rs,y+gen3*rs);
                break;
            case 8:
                context.fillText("8",x-gen3*rs,y+rs);
                break;
            case 9:
                context.fillText("9",x-2*rs,y);
                break;
            case 10:
                context.fillText("10",x-gen3*rs,y-rs);
                break;
            case 11:
                context.fillText("11",x-rs,y-gen3*rs);
                break;
            case 12:
                context.fillText("12",x,y-2*rs);
                break;
            default:
                alert("请输入正确的时间刻度！");
        }
    }



    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
</script>

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#1-常见查找算法">1. 常见查找算法</a>
      <ul>
        <li><a href="#线性查找">线性查找</a></li>
        <li><a href="#二分查找">二分查找</a></li>
        <li><a href="#哈希表查找">哈希表查找</a></li>
        <li><a href="#小结">小结</a></li>
      </ul>
    </li>
    <li><a href="#2-高效查找相关数据结构">2. 高效查找相关数据结构</a>
      <ul>
        <li><a href="#1-二叉搜索树">1) 二叉搜索树</a></li>
        <li><a href="#2-avl-树">2) AVL 树</a></li>
        <li><a href="#3-红黑树">3) 红黑树</a></li>
        <li><a href="#4-b-树">4) B 树</a></li>
        <li><a href="#5-哈希表">5) 哈希表</a></li>
      </ul>
    </li>
    <li><a href="#3-基于比较的排序算法">3. 基于比较的排序算法</a>
      <ul>
        <li><a href="#稳定-vs-不稳定">稳定 vs 不稳定</a></li>
        <li><a href="#1-冒泡排序">1) 冒泡排序</a></li>
        <li><a href="#2-选择排序">2) 选择排序</a></li>
        <li><a href="#3-堆排序">3) 堆排序</a></li>
        <li><a href="#4-插入排序">4) 插入排序</a></li>
        <li><a href="#5-希尔排序">5) 希尔排序</a></li>
        <li><a href="#6-归并排序">6) 归并排序</a></li>
        <li><a href="#7-归并插入">7) 归并+插入</a></li>
        <li><a href="#8-快速排序">8) 快速排序</a></li>
        <li><a href="#leetcode-912-题---排序数组">Leetcode 912 题 - 排序数组</a></li>
        <li><a href="#leetcode-148-题---排序链表">Leetcode 148 题 - 排序链表</a></li>
      </ul>
    </li>
    <li><a href="#4-非比较排序算法">4. 非比较排序算法</a>
      <ul>
        <li><a href="#1-计数排序">1) 计数排序</a></li>
        <li><a href="#2-桶排序">2) 桶排序</a></li>
        <li><a href="#3-基数排序">3) 基数排序</a></li>
      </ul>
    </li>
    <li><a href="#5-java-中的排序">5. Java 中的排序</a></li>
    <li><a href="#6-外部排序">6. 外部排序</a></li>
  </ul>

  <ul>
    <li><a href="#1-二叉搜索树-1">1. 二叉搜索树</a>
      <ul>
        <li><a href="#e01-删除节点-力扣-450-题">E01. 删除节点-力扣 450 题</a></li>
        <li><a href="#e02-新增节点-力扣-701-题">E02. 新增节点-力扣 701 题</a></li>
        <li><a href="#e03-查询节点-力扣-700-题">E03. 查询节点-力扣 700 题</a></li>
        <li><a href="#e04-验证二叉搜索树-力扣-98-题">E04. 验证二叉搜索树-力扣 98 题</a></li>
        <li><a href="#e05-求范围和-力扣-938-题">E05. 求范围和-力扣 938 题</a></li>
        <li><a href="#e06-根据前序遍历结果构造二叉搜索树-力扣-1008-题">E06. 根据前序遍历结果构造二叉搜索树-力扣 1008 题</a></li>
        <li><a href="#e07-二叉搜索树的最近公共祖先-力扣-235-题">E07. 二叉搜索树的最近公共祖先-力扣 235 题</a></li>
        <li><a href="#二叉树的最近公共祖先-力扣-236-题">二叉树的最近公共祖先-力扣 236 题</a></li>
        <li><a href="#二叉树展开为链表-力扣-114-题">二叉树展开为链表-力扣 114 题</a></li>
        <li><a href="#有序数组构造平衡二叉搜索树-力扣-108-题">有序数组构造平衡二叉搜索树-力扣 108 题</a></li>
        <li><a href="#二叉搜索树变为平衡-力扣--1382-题">二叉搜索树变为平衡-力扣  1382 题</a></li>
      </ul>
    </li>
    <li><a href="#2-hash-表">2. hash 表</a>
      <ul>
        <li><a href="#e01-两数之和-力扣-1-题">E01. 两数之和-力扣 1 题</a></li>
        <li><a href="#e02-无重复字符的最长字串-力扣-3-题">E02. 无重复字符的最长字串-力扣 3 题</a></li>
        <li><a href="#e03-字母异位词分组-力扣-49-题">E03. 字母异位词分组-力扣 49 题</a></li>
        <li><a href="#e04-判断有没有重复元素-力扣-217">E04. 判断有没有重复元素-力扣 217</a></li>
        <li><a href="#e05-找出出现一次的数字-力扣-136">E05. 找出出现一次的数字-力扣 136</a></li>
        <li><a href="#e06-判断字母异位词-力扣-242">E06. 判断字母异位词-力扣 242</a></li>
        <li><a href="#e07-第一个不重复字符-力扣-387">E07. 第一个不重复字符-力扣 387</a></li>
        <li><a href="#e08-出现次数最多的单词-力扣-819">E08. 出现次数最多的单词-力扣 819</a></li>
        <li><a href="#e09-leetcode105improved">E09. Leetcode105Improved</a></li>
        <li><a href="#e10-e10leetcode106improved">E10. E10Leetcode106Improved</a></li>
      </ul>
    </li>
    <li><a href="#3-排序">3. 排序</a>
      <ul>
        <li><a href="#e01-根据另一个数组次序排序---力扣1122题">E01. 根据另一个数组次序排序 - 力扣1122题</a></li>
        <li><a href="#e02-按出现频率排序---力扣-1636">E02. 按出现频率排序 - 力扣 1636</a></li>
        <li><a href="#e03-最大间距---力扣-164">E03. 最大间距 - 力扣 164</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












