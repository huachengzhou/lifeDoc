<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.83.1" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="一. 初识算法
#

1.1 什么是算法？
#

定义
在数学和计算机科学领域，算法是一系列有限的严谨指令，通常用于解决一类特定问题或执行计算
 In mathematics and computer science, an algorithm (/ˈælɡərɪðəm/) is a finite sequence of rigorous instructions, typically used to solve a class of specific problems or to perform a computation.1
 Introduction to Algorithm2
不正式的说，算法就是任何定义优良的计算过程：接收一些值作为输入，在有限的时间内，产生一些值作为输出。
 Informally, an algorithm is any well-defined computational procedure that takes some value, or set of values, as input and produces some value, or set of values, as output in a finite amount of time.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="初识算法" />
<meta property="og:description" content="一. 初识算法
#

1.1 什么是算法？
#

定义
在数学和计算机科学领域，算法是一系列有限的严谨指令，通常用于解决一类特定问题或执行计算
 In mathematics and computer science, an algorithm (/ˈælɡərɪðəm/) is a finite sequence of rigorous instructions, typically used to solve a class of specific problems or to perform a computation.1
 Introduction to Algorithm2
不正式的说，算法就是任何定义优良的计算过程：接收一些值作为输入，在有限的时间内，产生一些值作为输出。
 Informally, an algorithm is any well-defined computational procedure that takes some value, or set of values, as input and produces some value, or set of values, as output in a finite amount of time." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://huachengzhou.github.io/life/docs/algorithm/data-structure/black_horse/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%951/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2023-01-17T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2023-01-17T00:00:00&#43;00:00" />

<title>初识算法 | 所悟所想</title>
<link rel="manifest" href="./../../../../../manifest.json">
<link rel="icon" href="./../../../../../favicon.png" type="image/x-icon">
<link rel="stylesheet" href="./../../../../../book.min.2287b6f2871d6b78ee0a49069a42487d840f883445869f9883981ad861ebdaaa.css"  >
<script defer src="./../../../../../en.search.min.61fad7f72d925c80c97cf3ef0d234960548fd368ef76226f1aa80f6c7c6499e3.js"  ></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  

<script defer src="./../../../../../crypto-js/core.js"></script>
<script defer src="./../../../../../crypto-js/enc-base64.js"></script>
<script defer src="./../../../../../crypto-js/cipher-core.js"></script>
<script defer src="./../../../../../crypto-js/aes.js"></script>
<script defer src="./../../../../../crypto-js/enc-utf16.js"></script>
<script defer src="./../../../../../crypto-js/evpkdf.js"></script>
<script defer src="./../../../../../crypto-js/format-hex.js"></script>
<script defer src="./../../../../../crypto-js/hmac.js"></script>
<script defer src="./../../../../../crypto-js/lib-typedarrays.js"></script>
<script defer src="./../../../../../crypto-js/mode-cfb.js"></script>
<script defer src="./../../../../../crypto-js/pbkdf2.js"></script>
<script defer src="./../../../../../crypto-js/md5.js"></script>
<script defer src="./../../../../../crypto-js/mode-ecb.js"></script>
<script defer src="./../../../../../crypto-js/rabbit.js"></script>
<script defer src="./../../../../../crypto-js/rabbit-legacy.js"></script>
<script defer src="./../../../../../crypto-js/sha256.js"></script>








<script defer src="./../../../../../common-js/jquery-1.9.1.js"></script>

<script defer src="./../../../../../common-js/data.js"></script>
<script defer src="./../../../../../common-js/aesTool.js"></script>
<script defer src="./../../../../../common-js/myInfo.js"></script>


<link  href="./../../../../../layui/css/layui.css" rel="stylesheet" type="text/css">
<link  href="./../../../../../font-awesome-4.7.0/css/font-awesome.css" rel="stylesheet" type="text/css">
<script defer src="./../../../../../layui/layui.js"></script>

</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="./../../../../../"><span>所悟所想</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-dc4b37c6c16a6986655cb8a0614c536b" class="toggle"  />
    <label for="section-dc4b37c6c16a6986655cb8a0614c536b" class="flex justify-between">
      <a href="./../../../../../docs/computer_network/" class="">计算机网络 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/" class="">网络体系结构</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/1.1.1%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A6%82%E5%BF%B5-%E7%BB%84%E6%88%90-%E5%8A%9F%E8%83%BD-%E5%88%86%E7%B1%BB/" class="">计算机概念 组成 功能 分类 * </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/1.1.2%E6%A0%87%E5%87%86%E5%8C%96%E5%B7%A5%E4%BD%9C%E5%8F%8A%E7%9B%B8%E5%85%B3%E7%BB%84%E7%BB%87/" class="">标准的分类</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/1.1.3%E9%80%9F%E7%8E%87%E7%9B%B8%E5%85%B3%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/" class="">速率</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84/" class="">分层结构</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/%E5%88%86%E5%B1%82%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B/" class="">分层参考模型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/network_architecture/%E6%A8%A1%E5%9E%8B%E5%B1%82%E6%AC%A1%E8%AF%A6%E8%A7%A3/" class="">模型层次详解</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/physical_layer/" class="">物理层 </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/physical_layer/%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="">数据通信基础知识 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/computer_network/physical_layer/%E7%89%A9%E7%90%86%E5%B1%82%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" class="">物理层基本概念 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>数据链路层 </span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>网络层 </span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>传输层 </span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>应用层 </span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-520770a3f5ea08f8358bcf92838812da" class="toggle"  />
    <label for="section-520770a3f5ea08f8358bcf92838812da" class="flex justify-between">
      <a href="./../../../../../docs/c-plus/" class=""> c&#43;&#43;</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6fc49ad6722ad822609d4f02b81f6358" class="toggle"  />
    <label for="section-6fc49ad6722ad822609d4f02b81f6358" class="flex justify-between">
      <a href="./../../../../../docs/databases/" class=""> 数据库</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/" class="">mysql学习笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_basis/" class="">基本命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_data/" class="">数据准备</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_distinguish/" class="">MySQL分库分表原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_install/" class="">mysql安装</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_install_more/" class="">Win10一台电脑安装多个版本的Mysql</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_install_problem/" class="">windows下 Mysql安装的一些问题解决方法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_install_centos/" class="">centos7安装多个mysql</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%89%E8%8C%83%E5%BC%8F/" class="">mysql_数据库设计三范式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E4%BA%8B%E5%8A%A1/" class="">mysql事务</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E5%87%BD%E6%95%B0/" class="">mysql函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" class="">mysql存储引擎</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_procedure/" class="">mysql存储过程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_procedure_function/" class="">mysql存储函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_operation_maintenance/" class="">mysql运维</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" class="">数据库设计的规范</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E6%9F%A5%E8%AF%A2/" class="">mysql查询</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_regexp/" class="">mysql正则表达式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9D%83%E9%99%90/" class="">mysql用户与权限</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E7%B4%A2%E5%BC%95/" class="">mysql索引</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql%E6%95%B4%E7%90%86/" class="">mysql整理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysq_advanced_optimization/" class="">mysql优化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_select/" class="">mysql新查询</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/mysql_view/" class="">mysql视图</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql/triggers/" class="">mysql触发器</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/postgresql/" class="">postgresql学习笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/postgresql/postgresql_create%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9D%83%E9%99%90/" class="">权限</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/" class="">网易云课堂MySQL微专业学习笔记</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter1/" class="">MySQL数据库基础</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter2/" class="">MySQL数据库对象与应用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter3/" class="">MySQL事务与存储引擎</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter4/" class="">MySQL应用优化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/mysql_163%E8%AF%BE%E5%A0%82/%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82mysql_chapter5/" class="">MySQL运维实践</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/oracle/" class="">oracle</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/databases/sqlserver/create_table/" class="">sqlserver</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-dbec22d72f9c0b4ccf9d173e77fe928c" class="toggle"  />
    <label for="section-dbec22d72f9c0b4ccf9d173e77fe928c" class="flex justify-between">
      <a href="./../../../../../docs/python/" class=""> python</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-1eba4d3394916870dc9a66fd50843417" class="toggle"  />
    <label for="section-1eba4d3394916870dc9a66fd50843417" class="flex justify-between">
      <a href="./../../../../../docs/python/base/" class="">python 基础学习</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/remark/" class="">python 说明</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/pip/" class="">python pip</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/lambda_or_function/" class="">python 函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/set/" class="">python set</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/module/" class="">python 模块介绍</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/venv/" class="">python 环境变量</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/dictionary/" class="">python 字典</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/casting/" class="">python 类型转换</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/print/" class="">python print</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/tuple/" class="">python 元组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/string/" class="">python string</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/pipenv/" class="">python pipenv 包管理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python-object/" class="">python 面向对象</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/pathlib/" class="">python pathlib</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/file/" class="">python 文件</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/list/" class="">python list</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_datetime/" class="">python datetime</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_try_except/" class="">Python Try Except</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_regex/" class="">Python RegEx</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_json/" class="">Python JSON</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_string_formatting/" class="">Python 字符串格式化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/python_cmd_input/" class="">Python 命令行输入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/math/" class="">python math</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/annotation/" class="">Python 注解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/base/container/" class="">Python 容器问题</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5edfb103a0f74ef3d489bca94178c238" class="toggle"  />
    <label for="section-5edfb103a0f74ef3d489bca94178c238" class="flex justify-between">
      <a href="./../../../../../docs/python/install/" class="">python 插件学习</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyinstaller/" class="">python pyinstaller </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyecharts/" class="">python pyecharts  </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/numpy/" class="">python NumPy  </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyqt5/" class="">python pyqt5</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyqt5_note/" class="">python pyqt5 介绍</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyqt_layout/" class="">python pyqt5 layout</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/pyqt_resources/" class="">python pyqt5 皮肤和图标</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/python/install/python_ml_getting_started/" class="">python 机器学习  </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-426c24f586a1a31f40b6adbe7793c4e5" class="toggle"  />
    <label for="section-426c24f586a1a31f40b6adbe7793c4e5" class="flex justify-between">
      <a href="./../../../../../docs/math/" class="">数学</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/math/katex/" class="">KaTeX 使用指南</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-353f7a5578fa41dbc42c73ea30fe2255" class="toggle" checked />
    <label for="section-353f7a5578fa41dbc42c73ea30fe2255" class="flex justify-between">
      <a href="./../../../../../docs/algorithm/" class="">数据结构与算法</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-1ab1b97ced25a55e9af530a2afbb2e98" class="toggle"  />
    <label for="section-1ab1b97ced25a55e9af530a2afbb2e98" class="flex justify-between">
      <a href="./../../../../../docs/algorithm/alg-sort/" class="">常见排序算法知识体系</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/" class="">数据结构</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/array/" class="">数组</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="">数据结构(简单文字描述)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/linklist/" class="">链表</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/tree/" class="">树</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/stack/" class="">栈</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/queue/" class="">队列</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/heap/" class="">堆(优化队列)</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/hashtable/" class="">哈希</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/graph/" class="">图</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/adt/" class="">ADT</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/black_horse/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%951/" class=" active">初识算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/black_horse/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%952/" class="">基础算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/algorithm/data-structure/black_horse/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%953/" class="">进阶 - 算法设计</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-45dc11ee6178b60df0469def110149c5" class="toggle"  />
    <label for="section-45dc11ee6178b60df0469def110149c5" class="flex justify-between">
      <a href="./../../../../../docs/hugo%E5%AD%A6%E4%B9%A0/" class="">hugo教程</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/hugo%E5%AD%A6%E4%B9%A0/hugo_server_faile_-to_get_json/" class="">hugo教程 hugo server Failed to get JSON</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/hugo%E5%AD%A6%E4%B9%A0/hugo_tutorials1/" class="">hugo教程1</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/hugo%E5%AD%A6%E4%B9%A0/hugo_tutorials2/" class="">hugo教程2</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-63b4fdb949c68d1e40afa99db9f2025c" class="toggle"  />
    <label for="section-63b4fdb949c68d1e40afa99db9f2025c" class="flex justify-between">
      <a href="./../../../../../docs/javadir/" class=""> Java技术栈</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f59b4d30ba46bb091d0f0aa7c3266e10" class="toggle"  />
    <label for="section-f59b4d30ba46bb091d0f0aa7c3266e10" class="flex justify-between">
      <a href="./../../../../../docs/javadir/basedir/" class="">Java基础知识 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c62fda4779509a2bf52b7c12feccca28" class="toggle"  />
    <label for="section-c62fda4779509a2bf52b7c12feccca28" class="flex justify-between">
      <a href="./../../../../../docs/javadir/basedir/io/" class="">Java IO</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/io/java-basic-io-nio/" class="">nio</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ba9f37c30cbddfdede23d767e7034c30" class="toggle"  />
    <label for="section-ba9f37c30cbddfdede23d767e7034c30" class="flex justify-between">
      <a href="./../../../../../docs/javadir/basedir/jsp_dir/" class="">jsp 基础知识 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/java_%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6%E5%8E%9F%E7%90%86/" class="">java_监听事件原理 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/jsp_el%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" class="">EL基础教程 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/jsp_jstl_core%E6%A0%87%E7%AD%BE%E5%BA%93/" class="">jsp jstl core 标签库 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/jsp_jstl_session/" class="">jsp jstl session </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/jsp_dir/jsp_%E5%AD%97%E7%AC%A6%E4%B8%B2el%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="">字符串el表达式 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/dw7668daxw/" class="">java类型转换,构造,重要语法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/identityhashcode/" class="">Java中对象内存地址</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-exception/" class="">异常机制详解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-reflection/" class="">反射机制详解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-annotation/" class="">注解机制详解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-generic/" class="">泛型机制详解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-jdk8-stream/" class="">Java8 流式数据处理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-jdk8-stream_base/" class="">Java8 流式数据处理 短介绍</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/basedir/java-basic-x-spi/" class="">Java SPI机制详解</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e4f99824d06ea4abb1161f3046570d7f" class="toggle"  />
    <label for="section-e4f99824d06ea4abb1161f3046570d7f" class="flex justify-between">
      <a href="./../../../../../docs/javadir/thread/" class="">多线程与并发 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/glossary/" class="">名词解释</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/essential_glossary/" class="">关键名词解释</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/cas/" class="">cas</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a04d0f5c62b5bf3efb9caef3d57e52c6" class="toggle"  />
    <label for="section-a04d0f5c62b5bf3efb9caef3d57e52c6" class="flex justify-between">
      <a href="./../../../../../docs/javadir/thread/tool/" class="">并发工具 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/thread_local/" class="">ThreadLocal</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/semaphore_exchanger/" class="">Semaphore和Exchanger</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/countdownlatch_cyclicbarrier/" class="">CountDownLatch 和 CyclicBarrier</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/phaser/" class="">Phaser</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/executor/" class="">Executor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/future_callable/" class="">Future 和 callable</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/completionservice/" class="">CompletionService</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/executorservice/" class="">ExecutorService</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/fork_join/" class="">Fork-Join</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/tool/collection/" class="">并发集合框架</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/jol/" class="">JOL工具 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/unsafe/" class="">unsafe</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/reentrantlock/" class="">ReentrantLock</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/repeat_lock/" class="">java重复加锁</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/park/" class="">park</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/thread/practice/" class="">线程最佳实践</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d2bb26ee293a9741ecef2fb6f7d20b43" class="toggle"  />
    <label for="section-d2bb26ee293a9741ecef2fb6f7d20b43" class="flex justify-between">
      <a href="./../../../../../docs/javadir/groovy/" class="">groovy 学习与使用 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E5%AD%A6%E4%B9%A0/" class=""> Groovy 概述 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" class="">groovy 基本概念 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="">groovy 数据类型 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E5%8F%98%E9%87%8F%E5%92%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8A%A0%E5%BC%BA/" class=""> groovy变量和数据类型 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/%E5%A6%82%E4%BD%95%E5%9C%A8groovy%E4%B8%AD%E8%8E%B7%E5%8F%96%E4%BB%A5%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D%E7%9A%84%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC/" class=""> groovy变量值获取 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E4%B8%AD%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%AF%94%E8%BE%83%E4%BB%A5%E5%8F%8A%E9%9D%9E%E7%A9%BA%E5%88%A4%E6%96%AD/" class=""> groovy对象比较以及空判断 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/" class=""> groovy使用场景 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/groovy/groovy%E5%8F%98%E9%87%8F/" class="">Groovy变量</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3c751f376602d063da318fd2ace31d1e" class="toggle"  />
    <label for="section-3c751f376602d063da318fd2ace31d1e" class="flex justify-between">
      <a href="./../../../../../docs/javadir/tooldoc/" class="">Java公共库文档总结 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/apache-common%E5%B7%A5%E5%85%B7%E5%8C%85/" class="">Apache Commons 工具类介绍及简单使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/aspose/" class="">Aspose</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/commons_io/" class="">apache FilenameUtils 文件名称操作</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/dom4j/" class="">dom4j</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/guava-common/" class="">Guava 基于java1.6的类库集合的扩展项目</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/js_console%E7%94%A8%E6%B3%95/" class="">常用 Console 调试命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/jsoup/" class="">jsoup学习文档</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/spring%E5%B7%A5%E5%85%B7/" class="">spring工具类</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/tooldoc/spring%E5%B8%B8%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%E7%B1%BB/" class="">spring常用的工具类</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/" class="">中间件 </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/redis/" class="">Redis 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/nginx/" class="">Nginx 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/testng/" class="">testng 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/mycat/" class="">mycat 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/uml/" class="">uml 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/" class="">solr</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/adminui/" class="">AdminUI 简单使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/config/" class="">基本配置</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/javaapi/" class="">Java API SolrJ 的使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/core/" class="">创建索引和字段</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/solr/include_document/" class="">内嵌文档</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/" class="">rabbit-mq</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/simple_default_exchange/" class="">Hello-world</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/work-queues/" class="">work-queues</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/publish-subscribe/" class="">Publish/Subscribe</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/rounting/" class="">Routing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/rabbit-mq/ask/" class="">ask</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/" class="">Elasticsearch</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/ik/" class="">ik分词器(analysis)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/elasticsearch-cluster/" class="">(集群)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/elasticsearch_principle/" class="">elasticsearch 原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/lucene-data/" class="">lucene数据存储</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/elasticsearch_architecture/" class="">ElasticSearch进阶篇集群&#43;原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/javadir/middleware/elasticsearch/elasticsearch-api/" class="">ElasticSearch API</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bbe16af0cda0a52165d4874f0cea4ee0" class="toggle"  />
    <label for="section-bbe16af0cda0a52165d4874f0cea4ee0" class="flex justify-between">
      <a href="./../../../../../docs/operating_system/" class="">计算机操作系统</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-21040cf0ac2f33d55fbb5e091a34a3f0" class="toggle"  />
    <label for="section-21040cf0ac2f33d55fbb5e091a34a3f0" class="flex justify-between">
      <a href="./../../../../../docs/operating_system/linux/" class="">linux学习与使用 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/git_introduction/" class="">git学习</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/gitub_config/" class="">git配置</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/host%E6%98%A0%E5%B0%84/" class="">host映射</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/linux%E4%B8%8B%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%9F%A5%E7%9C%8B%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" class="">Linux下设置和查看环境变量</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/linux%E5%91%BD%E4%BB%A4/" class="">linux命令</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/nginx/" class="">nginx学习</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/notepad&#43;&#43;%E5%AE%89%E8%A3%85/" class="">Notepad&#43;&#43; 学习与使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/ubuntu16.04%E4%BF%AE%E6%94%B9hosts/" class="">Ubuntu 16.04修改hosts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/ubuntu%E5%AE%89%E8%A3%85chmsee/" class="">ubuntu安装chmsee</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/ubuntu%E6%B8%85%E7%90%86%E7%B3%BB%E7%BB%9F%E5%9E%83%E5%9C%BE/" class="">Ubuntu清理系统垃圾</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/linux/ubuntu%E8%BD%AF%E4%BB%B6%E5%8D%B8%E8%BD%BD/" class="">ubuntu软件卸载</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-806134514f2418a47efb34528bbe6d38" class="toggle"  />
    <label for="section-806134514f2418a47efb34528bbe6d38" class="flex justify-between">
      <a href="./../../../../../docs/operating_system/windows/" class="">windows学习与使用 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/dos_start/" class="">DOS命令 基本介绍 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/dos_basic/" class="">DOS基本命令 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/hksdjahjra/" class="">DOS基本命令 (新) </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/dos_file/" class="">DOS基本文件操作命令 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/dos_network/" class=""> DOS网络操作命令 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/ftp/" class=""> FTP </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/windows/windows_question/" class=""> windows 问题 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/" class="">第一章 操作系统概述 </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_1_/" class="">操作系统的概念、功能</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_2_/" class="">操作系统的特征</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_3_/" class=""> 操作系统的发展与分类 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_4_/" class=""> 操作系统的运行机制与体系结构 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_5_/" class=""> 中断和异常 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_6_/" class=""> 系统调用 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/one_chapter/1_7_/" class=""> 操作系统的体系结构 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/" class="">第二章 进程管理 </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_1/" class="">进程的概念、组成、特征</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_2/" class="">进程的状态与转换</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_3/" class="">进程控制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_4/" class="">进程通信</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_1_5/" class="">线程概念与多线程模型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_2_1/" class="">处理机调度的概念、层次</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_2_2/" class="">进程调度的时机、切换与过程、方式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/two_chapter/2_2_3/" class="">调度算法的评价指标</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/three_chapter/" class="">第三章 内存管理 </a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/four_chapter/" class="">第四章 文件管理 </a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/operating_system/five_chapter/" class="">第五章 输入，输出（I,O） </a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9caa6ae5221742cea46cb40ee3162cf1" class="toggle"  />
    <label for="section-9caa6ae5221742cea46cb40ee3162cf1" class="flex justify-between">
      <a href="./../../../../../docs/http/" class="">http知识 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/http/teywty5qnc/" class="">跨域问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/http/cdn/" class="">cdn</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/http/dns/" class="">DNS</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-350a13706fbef206280ee93f4ba7f7ab" class="toggle"  />
    <label for="section-350a13706fbef206280ee93f4ba7f7ab" class="flex justify-between">
      <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/" class="">脚本</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/nodejs/" class="">node js </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/npm%E6%A8%A1%E5%9D%97%E5%AE%89%E8%A3%85%E6%9C%BA%E5%88%B6%E7%AE%80%E4%BB%8B/" class="">node js - npm </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/uniapp%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="">uniapp基础知识 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack/" class="">webpack </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/simple-webpack/" class="">webpack simple</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack%E5%92%8Cnodejs%E5%85%B3%E7%B3%BB/" class="">webpack和nodejs关系 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack_loader/" class="">webpack loader</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/npm%E9%87%8D%E8%A6%81%E5%91%BD%E4%BB%A4/" class="">node js - npm 重要命令 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/npm%E9%83%A8%E5%88%86%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E9%97%AE%E9%A2%98/" class="">npm部分插件安装问题 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/my-plugins/" class="">webpack 应用自己插件 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack%E7%83%AD%E6%9B%B4%E6%96%B0/" class="">webpack 热更新 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/webpack-other-loader/" class="">webpack 其他 loader </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8A%80%E6%9C%AF%E5%8F%82%E8%80%83/" class="">小程序技术总结参考 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/vue%E8%84%9A%E6%89%8B%E6%9E%B6%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F/" class="">vue脚手架创建方式 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/javascript/" class="">javascript </a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/javascript/es6/" class="">ECMAScript 6</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%84%9A%E6%9C%AC/packing/" class="">uniapp打包</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-faf554f92b63c792eb1430dabc59780a" class="toggle"  />
    <label for="section-faf554f92b63c792eb1430dabc59780a" class="flex justify-between">
      <a href="./../../../../../docs/physics/" class="">physics</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9557cdd8ab7d0e4af192310fb091049c" class="toggle"  />
    <label for="section-9557cdd8ab7d0e4af192310fb091049c" class="flex justify-between">
      <a href="./../../../../../docs/plan/" class="">计划 </a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/plan/dir/jdkbatmmbr/" class="">任务分类法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/plan/dir/saxr6jwscz/" class="">2022-10-25计划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/plan/dir/cahh4sbqzx/" class="">2023-01-18待处理任务清单</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-67ac8dc39af58fa098ad94e784195ce8" class="toggle"  />
    <label for="section-67ac8dc39af58fa098ad94e784195ce8" class="flex justify-between">
      <a href="./../../../../../docs/english_study/" class="">英语学习</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/jkdy8dwywm/" class="">零基础如何开始着手学习英语</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/" class="">第二语言习得</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/stephen_d_krashen/" class="">Principles and Practice </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/%E6%96%AF%E8%92%82%E8%8A%ACd%E5%85%8B%E6%8B%89%E7%94%B3%E8%AE%BA%E6%96%87/" class="">斯蒂芬•D•克拉申论文 google学术</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/use/" class="">习得 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/%E6%95%B4%E7%90%86/" class="">习得  整理 </a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/second_language_acquisition/input/" class="">可理解的输入 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/word/" class="">单词记忆技巧</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/word/number/" class="">英语数字规则 </a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/maimemo/" class="">墨墨背单词</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/english_study/plan/" class="">英语学习计划</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2832180921bf769c2911c287eaf83c57" class="toggle"  />
    <label for="section-2832180921bf769c2911c287eaf83c57" class="flex justify-between">
      <a href="./../../../../../docs/car_study/" class="">汽车教学</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/car_study/one/" class="">科目一</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>科目二</span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/car_study/three/" class="">科目三</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0e7f05afbbf08a18bae4c61de4451b8c" class="toggle"  />
    <label for="section-0e7f05afbbf08a18bae4c61de4451b8c" class="flex justify-between">
      <a href="./../../../../../docs/codereview/" class="">编码</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/specification1/" class="">Code review</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/specification2/" class="">编码规范</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/specification3/" class="">编码规范3</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d9f4d4a59bf3da3f9cd63e830886c0db" class="toggle"  />
    <label for="section-d9f4d4a59bf3da3f9cd63e830886c0db" class="flex justify-between">
      <a href="./../../../../../docs/codereview/unit_test/" class="">单元测试</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3045abd0d0a9e601a62e500261c27583" class="toggle"  />
    <label for="section-3045abd0d0a9e601a62e500261c27583" class="flex justify-between">
      <a href="./../../../../../docs/codereview/tool_debug/" class="">开发工具调试</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7aeee6a584f60c55a36eb024eb3b6e4d" class="toggle"  />
    <label for="section-7aeee6a584f60c55a36eb024eb3b6e4d" class="flex justify-between">
      <a href="./../../../../../docs/codereview/hsxkx5kbbp/" class="">编写可读代码的艺术</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-1f139500688be553cf5b773cffee3b71" class="toggle"  />
    <label for="section-1f139500688be553cf5b773cffee3b71" class="flex justify-between">
      <a href="./../../../../../docs/codereview/design_pattern/" class="">设计模式</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/singleton_pattern/" class="">创建型 - 单例模式(Singleton pattern)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/simple_factory/" class="">创建型 - 简单工厂(Simple Factory)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/factory_method/" class="">创建型 - 工厂方法(Factory Method)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/abstract_factory/" class="">创建型 - 抽象工厂(Abstract Factory)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/builder/" class="">创建型 - 生成器(Builder)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/codereview/design_pattern/prototype/" class="">创建型 - 原型模式(Prototype)</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a023bf2e3ec39bd7c5b2c0195d2fbe3a" class="toggle"  />
    <label for="section-a023bf2e3ec39bd7c5b2c0195d2fbe3a" class="flex justify-between">
      <a href="./../../../../../docs/codereview/kedswrgngf/" class="">重构: 改善既有代码的设计</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4ae4278ffcaad5eddcb3add9757c83b1" class="toggle"  />
    <label for="section-4ae4278ffcaad5eddcb3add9757c83b1" class="flex justify-between">
      <a href="./../../../../../docs/compilation_principle/" class="">编译原理</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-75093b6572bead2615e3964d3a3f0832" class="toggle"  />
    <label for="section-75093b6572bead2615e3964d3a3f0832" class="flex justify-between">
      <a href="./../../../../../docs/computer_composition_principle/" class="">计算机组成原理</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f756f4cd712e8961a854d8f8077f32db" class="toggle"  />
    <label for="section-f756f4cd712e8961a854d8f8077f32db" class="flex justify-between">
      <a href="./../../../../../docs/life_and_life/" class="">生活就是生活</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/life_and_life/ga2s3gmf/" class="">下班后学习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2f5b73161d05cd7b2df2340845e1aedf" class="toggle"  />
    <label for="section-2f5b73161d05cd7b2df2340845e1aedf" class="flex justify-between">
      <a href="./../../../../../docs/memory/" class="">记忆技巧</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8dd86dd3ec154af9a3d0b2799e6c0025" class="toggle"  />
    <label for="section-8dd86dd3ec154af9a3d0b2799e6c0025" class="flex justify-between">
      <a href="./../../../../../docs/reduce_fat/" class="">减肥减脂技巧</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f18f7ebc1771c05dd41d9cebd3fc8a34" class="toggle"  />
    <label for="section-f18f7ebc1771c05dd41d9cebd3fc8a34" class="flex justify-between">
      <a href="./../../../../../docs/reduce_fat/%E6%97%A0%E6%B0%A7%E8%BF%90%E5%8A%A8/" class="">无氧运动</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c2f7e0d471b6591276e406b821a17fc1" class="toggle"  />
    <label for="section-c2f7e0d471b6591276e406b821a17fc1" class="flex justify-between">
      <a href="./../../../../../docs/reduce_fat/%E6%9C%89%E6%B0%A7%E8%BF%90%E5%8A%A8/" class="">有氧运动</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bdc0af4527c0abd9c5603b6e44774fa8" class="toggle"  />
    <label for="section-bdc0af4527c0abd9c5603b6e44774fa8" class="flex justify-between">
      <a href="./../../../../../docs/reduce_fat/%E8%85%B0%E9%83%A8%E5%87%8F%E8%82%A5/" class="">腰部减肥</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-850fe52dc88ed9f8f6a9ad0ad0cd5784" class="toggle"  />
    <label for="section-850fe52dc88ed9f8f6a9ad0ad0cd5784" class="flex justify-between">
      <a href="./../../../../../docs/%E7%94%B5%E8%A7%86%E5%89%A7%E6%95%B4%E7%90%86/" class="">电视剧整理</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-63739512f503c4ce8199d3b5d0c27b9d" class="toggle"  />
    <label for="section-63739512f503c4ce8199d3b5d0c27b9d" class="flex justify-between">
      <a href="./../../../../../docs/%E7%94%B5%E8%A7%86%E5%89%A7%E6%95%B4%E7%90%86/%E9%81%A5%E8%BF%9C%E7%9A%84%E6%95%91%E4%B8%96%E4%B8%BB/" class="">遥远的救世主</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-39658318a58e1bb764fe7a9650dde553" class="toggle"  />
    <label for="section-39658318a58e1bb764fe7a9650dde553" class="flex justify-between">
      <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/" class="">自我提升</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/2021-04%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" class="">学习计划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/gsmgajphs7/" class="">看书看到大脑疲劳以后，应如何快速恢复大脑状态</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/x5ws5dsp8a/" class="">男生 穿着 和 仪态</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/sstzyfd5je/" class="">社哲讲堂</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/" class="">人际剖析</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/fdhcmhstpw/" class="">什么叫魅力</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/j74dbsrtzw/" class="">我无所畏惧，因为</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/tbwyjex4gc/" class="">从此你不再受伤害</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/iqcs36rgjy/x8benctsak/" class="">关于爱情令人不解的一切</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/talk_theme/" class="">聊天话题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/talk_theme/girl/ytaerczr7w/" class="">追女生</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/talk_theme/girl/seiffjx8c7/" class="">和女孩聊天话题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/talk_theme/girl/dpa4wtnhf8/" class="">耍朋友</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/" class="">自信</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/confident/" class="">如何提升自信</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/ga2s3gmf/" class="">下班后学习</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/good_voice/" class="">如何说话好听</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/hw2jindwcd/" class="">100篇锻炼口才表达能力的绕口令（精选版）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/2bm8trpqzx/" class="">发声 具体训练方法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/idx4etcwwy/" class="">如何系统地训练口才</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/dmmsjbabmp/" class="">你到底想表达什么</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/awb8ggwzn2/" class="">生活中常用的客套话</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/hweaprcifa/" class="">高情商的聊天技巧</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/we4ycwfxb7/" class="">我自己理解的口才练习技巧</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/wwnrfnfjmb/" class="">自信相关理论</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/b3akcg3n8k/" class="">我自己理解的聊天技巧</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/6ngdcha8bk/" class="">使自己成熟稳重</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/swtj6fgd6s/" class="">复盘</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/8m3fmhf6t3/" class="">如何变得更加成熟</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/pqpys8speb/" class="">每天保持心情的5句话</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/esxjjecmn5/" class="">PDCA循环工作法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/h847ijsjzr/" class="">表达能力提高</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/ca7cqmh4j8/" class="">任务分类法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/em24ppenbm/" class="">如何保持积极乐观的心态</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/mm8cnxmzyz/" class="">社恐、性格闷、胆子小</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/nnefbyyxgr/" class="">逻辑推导</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/my_self/x5xdewmh5e/" class="">所有命运的馈赠，早已暗中标好了价格</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>获取金钱</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%8E%B7%E5%8F%96%E9%87%91%E9%92%B1/%E5%A6%82%E4%BD%95%E5%9C%A8%E6%B2%B9%E7%AE%A1youtube%E5%BC%80%E9%80%9A%E6%94%B6%E7%9B%8A%E8%B5%9A%E9%92%B1/" class="">如何在油管YouTube开通收益赚钱</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/" class="">解决问题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/git_andsower/" class="">git出现的问题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/git_andsower/git%E5%A4%84%E7%90%86/" class="">git处理网络和权限问题</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/idea/" class="">idea出现的问题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/idea/idea/" class="">idea 解决working directory 设置到 target</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/maven/" class="">maven出现的问题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/maven/idea%E8%A7%A3%E5%86%B3/" class="">idea 问题解决</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/visual_studio_code/" class="">visual_studio_code</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/visual_studio_code/visualstudiocode%E9%97%AE%E9%A2%98/" class="">Visual Studio Code 问题解决方案</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/dns%E6%B1%A1%E6%9F%93/" class="">DNS 污染</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/githubpages%E7%BB%91%E5%AE%9A%E6%9D%A5%E8%87%AA%E9%98%BF%E9%87%8C%E4%BA%91%E7%9A%84%E5%9F%9F%E5%90%8D/" class="">GitHubPages绑定来自阿里云的域名</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-51de35a74b957edd5bb9b26e3e2b8f41" class="toggle"  />
    <label for="section-51de35a74b957edd5bb9b26e3e2b8f41" class="flex justify-between">
      <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/" class="">沟通技巧</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case1/" class="">不羞不怯，直切要点</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case2/" class="">如何清晰明了的向他人介绍清楚这个问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case3/" class="">怎样把事情说清楚，清晰表达的能力</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case4/" class="">回复领导的问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/case5/" class="">程序员如何向同事说明自己的问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/dmmsjbabmp/" class="">你到底想表达什么</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/r2xcf5nxjq/" class="">国内咨询平台</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E8%AE%B0%E5%BF%86/" class="">记忆方法</a>
  

        </li>
      
    
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/%E5%86%A5%E6%83%B3/" class="">冥想</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/paragraph/" class="">适合分享的段子和笑话</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0dee305346a3ca3ab28150dce8272da0" class="toggle"  />
    <label for="section-0dee305346a3ca3ab28150dce8272da0" class="flex justify-between">
      <a href="./../../../../../docs/think/" class="">思维</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/think/criticalthinking/" class="">批判性思维</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/think/jinzita/" class="">金字塔原理</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/think/not_control/" class="">失控</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Shortcodes</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/buttons/" class="">Buttons</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/columns/" class="">Columns</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/details/" class="">Details</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/expand/" class="">Expand</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/hints/" class="">Hints</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/katex/" class="">Katex</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/mermaid/" class="">Mermaid</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d3fc1bf6d66cd84b896a0af9f40cb1d5" class="toggle"  />
    <label for="section-d3fc1bf6d66cd84b896a0af9f40cb1d5" class="flex justify-between">
      <a href="./../../../../../docs/shortcodes/section/" class="">Section</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/section/page1/" class="">Page1</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/section/page2/" class="">Page2</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="./../../../../../docs/shortcodes/tabs/" class="">Tabs</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="./../../../../../posts/" >
        Blog
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="./../../../../../svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>初识算法</strong>

  <label for="toc-control">
    
    <img src="./../../../../../svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#11-什么是算法">1.1 什么是算法？</a></li>
    <li><a href="#12-什么是数据结构">1.2 什么是数据结构？</a></li>
    <li><a href="#13-二分查找-3">1.3 二分查找 </a>
      <ul>
        <li><a href="#二分查找基础版">二分查找基础版</a></li>
        <li><a href="#二分查找改变版">二分查找改变版</a></li>
        <li><a href="#衡量算法好坏">衡量算法好坏</a></li>
        <li><a href="#二分查找平衡版">二分查找平衡版</a></li>
        <li><a href="#二分查找-java-版">二分查找 Java 版</a></li>
        <li><a href="#leftmost-与-rightmost">Leftmost 与 Rightmost</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#21-数组">2.1 数组</a>
      <ul>
        <li><a href="#概述">概述</a></li>
        <li><a href="#动态数组">动态数组</a></li>
        <li><a href="#二维数组">二维数组</a></li>
        <li><a href="#局部性原理">局部性原理</a></li>
        <li><a href="#越界检查">越界检查</a></li>
      </ul>
    </li>
    <li><a href="#22-链表">2.2 链表</a>
      <ul>
        <li><a href="#概述-1">概述</a></li>
        <li><a href="#单向链表">单向链表</a></li>
        <li><a href="#单向链表带哨兵">单向链表（带哨兵）</a></li>
        <li><a href="#双向链表带哨兵">双向链表（带哨兵）</a></li>
        <li><a href="#环形链表带哨兵">环形链表（带哨兵）</a></li>
      </ul>
    </li>
    <li><a href="#23-递归">2.3 递归</a>
      <ul>
        <li><a href="#概述-2">概述</a></li>
        <li><a href="#单路递归-single-recursion">单路递归 Single Recursion</a></li>
        <li><a href="#多路递归-multi-recursion">多路递归 Multi Recursion</a></li>
        <li><a href="#递归优化-记忆法">递归优化-记忆法</a></li>
        <li><a href="#递归优化-尾递归">递归优化-尾递归</a></li>
        <li><a href="#递归时间复杂度-master-theorem14">递归时间复杂度-Master theorem</a></li>
        <li><a href="#递归时间复杂度-展开求解">递归时间复杂度-展开求解</a></li>
      </ul>
    </li>
    <li><a href="#24-队列">2.4 队列</a>
      <ul>
        <li><a href="#概述-3">概述</a></li>
        <li><a href="#链表实现">链表实现</a></li>
        <li><a href="#环形数组实现">环形数组实现</a></li>
      </ul>
    </li>
    <li><a href="#25-栈">2.5 栈</a>
      <ul>
        <li><a href="#概述-4">概述</a></li>
        <li><a href="#链表实现-1">链表实现</a></li>
        <li><a href="#数组实现">数组实现</a></li>
        <li><a href="#应用">应用</a></li>
      </ul>
    </li>
    <li><a href="#26-双端队列">2.6 双端队列</a>
      <ul>
        <li><a href="#概述-5">概述</a></li>
        <li><a href="#链表实现-2">链表实现</a></li>
        <li><a href="#数组实现-1">数组实现</a></li>
      </ul>
    </li>
    <li><a href="#27-优先级队列">2.7 优先级队列</a>
      <ul>
        <li><a href="#无序数组实现">无序数组实现</a></li>
        <li><a href="#有序数组实现">有序数组实现</a></li>
        <li><a href="#堆实现">堆实现</a></li>
      </ul>
    </li>
    <li><a href="#28-阻塞队列">2.8 阻塞队列</a>
      <ul>
        <li><a href="#单锁实现">单锁实现</a></li>
        <li><a href="#双锁实现">双锁实现</a></li>
      </ul>
    </li>
    <li><a href="#29-堆">2.9 堆</a></li>
    <li><a href="#210-二叉树">2.10 二叉树</a>
      <ul>
        <li><a href="#存储">存储</a></li>
        <li><a href="#遍历">遍历</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#31-时间复杂度">3.1 时间复杂度</a></li>
    <li><a href="#32-二分查找">3.2 二分查找</a>
      <ul>
        <li><a href="#e01-二分查找-力扣-704-题">E01. 二分查找-力扣 704 题</a></li>
        <li><a href="#e02-搜索插入位置-力扣-35-题">E02. 搜索插入位置-力扣 35 题</a></li>
        <li><a href="#e03-搜索开始结束位置-力扣-34-题">E03. 搜索开始结束位置-力扣 34 题</a></li>
      </ul>
    </li>
    <li><a href="#33-递归---single-recursion">3.3 递归 - single recursion</a>
      <ul>
        <li><a href="#e03-二分查找">E03. 二分查找</a></li>
        <li><a href="#e04-冒泡排序">E04. 冒泡排序</a></li>
        <li><a href="#e05-插入排序">E05. 插入排序</a></li>
        <li><a href="#e06-约瑟夫问题16">E06. 约瑟夫问题</a></li>
      </ul>
    </li>
    <li><a href="#34-递归---multi-recursion">3.4 递归 - multi recursion</a>
      <ul>
        <li><a href="#e02-汉诺塔13">E02. 汉诺塔</a></li>
        <li><a href="#e03-杨辉三角6">E03. 杨辉三角</a></li>
      </ul>
    </li>
    <li><a href="#35-链表">3.5 链表</a>
      <ul>
        <li><a href="#e01-反转单向链表-力扣-206-题">E01. 反转单向链表-力扣 206 题</a></li>
        <li><a href="#e02-根据值删除节点-力扣-203-题">E02. 根据值删除节点-力扣 203 题</a></li>
        <li><a href="#e03--删除倒数节点-力扣-19-题">E03.  删除倒数节点-力扣 19 题</a></li>
        <li><a href="#e04-有序链表去重-力扣-83-题">E04. 有序链表去重-力扣 83 题</a></li>
        <li><a href="#e05-有序链表去重-力扣-82-题">E05. 有序链表去重-力扣 82 题</a></li>
        <li><a href="#e06-合并有序链表-力扣-21-题">E06. 合并有序链表-力扣 21 题</a></li>
        <li><a href="#e07-合并多个有序链表-力扣-23-题">E07. 合并多个有序链表-力扣 23 题</a></li>
        <li><a href="#e08-查找链表中间节点-力扣-876-题">E08. 查找链表中间节点-力扣 876 题</a></li>
        <li><a href="#e09-回文链表-力扣-234-题">E09. 回文链表-力扣 234 题</a></li>
        <li><a href="#e10-环形链表-力扣-141-题">E10. 环形链表-力扣 141 题</a></li>
        <li><a href="#e11-环形链表-力扣-142-题">E11. 环形链表-力扣 142 题</a></li>
        <li><a href="#ex1-删除节点-力扣-237-题">Ex1. 删除节点-力扣 237 题</a></li>
        <li><a href="#ex2-共尾链表-力扣-160-题">Ex2. 共尾链表-力扣 160 题</a></li>
      </ul>
    </li>
    <li><a href="#36-数组">3.6 数组</a>
      <ul>
        <li><a href="#e01-合并有序数组">E01. 合并有序数组</a></li>
      </ul>
    </li>
    <li><a href="#37-队列">3.7 队列</a>
      <ul>
        <li><a href="#e01-二叉树层序遍历-力扣-102-题">E01. 二叉树层序遍历-力扣 102 题</a></li>
        <li><a href="#ex1-设计队列-力扣-622-题">Ex1. 设计队列-力扣 622 题</a></li>
      </ul>
    </li>
    <li><a href="#38-栈">3.8 栈</a>
      <ul>
        <li><a href="#e01-有效的括号-力扣-20-题">E01. 有效的括号-力扣 20 题</a></li>
        <li><a href="#e02-后缀表达式求值-力扣-120-题">E02. 后缀表达式求值-力扣 120 题</a></li>
        <li><a href="#e03-中缀表达式转后缀">E03. 中缀表达式转后缀</a></li>
        <li><a href="#e04-双栈模拟队列-力扣-232-题">E04. 双栈模拟队列-力扣 232 题</a></li>
        <li><a href="#e05-单队列模拟栈-力扣-225-题">E05. 单队列模拟栈-力扣 225 题</a></li>
      </ul>
    </li>
    <li><a href="#39-双端队列">3.9 双端队列</a>
      <ul>
        <li><a href="#e01-二叉树-z-字层序遍历-力扣-103-题">E01. 二叉树 Z 字层序遍历-力扣 103 题</a></li>
        <li><a href="#ex1-设计双端队列-力扣-641-题">Ex1. 设计双端队列-力扣 641 题</a></li>
      </ul>
    </li>
    <li><a href="#310-优先级队列">3.10 优先级队列</a>
      <ul>
        <li><a href="#e01-合并多个有序链表-力扣-23-题">E01. 合并多个有序链表-力扣 23 题</a></li>
      </ul>
    </li>
    <li><a href="#311-堆">3.11 堆</a>
      <ul>
        <li><a href="#e01-堆排序">E01. 堆排序</a></li>
        <li><a href="#e02-数组中第k大元素-力扣-215-题">E02. 数组中第K大元素-力扣 215 题</a></li>
        <li><a href="#e03-数据流中第k大元素-力扣-703-题">E03. 数据流中第K大元素-力扣 703 题</a></li>
        <li><a href="#e04-数据流的中位数-力扣-295-题">E04. 数据流的中位数-力扣 295 题</a></li>
      </ul>
    </li>
    <li><a href="#312-二叉树">3.12 二叉树</a>
      <ul>
        <li><a href="#e04-对称二叉树-力扣-101-题">E04. 对称二叉树-力扣 101 题</a></li>
        <li><a href="#e05-二叉树最大深度-力扣-104-题">E05. 二叉树最大深度-力扣 104 题</a></li>
        <li><a href="#e06-二叉树最小深度-力扣-111-题">E06. 二叉树最小深度-力扣 111 题</a></li>
        <li><a href="#e07-翻转二叉树-力扣-226-题">E07. 翻转二叉树-力扣 226 题</a></li>
        <li><a href="#e08-后缀表达式转二叉树">E08. 后缀表达式转二叉树</a></li>
        <li><a href="#e09-根据前序与中序遍历结果构造二叉树-力扣-105-题">E09. 根据前序与中序遍历结果构造二叉树-力扣 105 题</a></li>
        <li><a href="#e10-根据中序与后序遍历结果构造二叉树-力扣-106-题">E10. 根据中序与后序遍历结果构造二叉树-力扣 106 题</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#参考文章">参考文章</a></li>
    <li><a href="#落选题目">落选题目</a>
      <ul>
        <li><a href="#反转字符数组">反转字符数组</a></li>
      </ul>
    </li>
    <li><a href="#力扣高评价题目列表">力扣高评价题目列表</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      



<ul class="ul_abc">
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/lifeDoc/docs/about">关于程序员</a></li>
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/lifeDoc/docs/compilation_principle">编译原理</a></li>
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/lifeDoc/docs/computer_composition_principle">计算机组成原理</a></li>
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/my-blog/">myBlog</a></li>
    <li class="li_abc"><a target="_blank"  href="https://huachengzhou.github.io/blog/">blog</a></li>
    <li class="li_abc"><button type="button" onclick="layer.alert('内容')">layer</button></li>
</ul>

      
  <article class="markdown"><h1 id="一-初识算法">
  一. 初识算法
  <a class="anchor" href="#%e4%b8%80-%e5%88%9d%e8%af%86%e7%ae%97%e6%b3%95">#</a>
</h1>
<h2 id="11-什么是算法">
  1.1 什么是算法？
  <a class="anchor" href="#11-%e4%bb%80%e4%b9%88%e6%98%af%e7%ae%97%e6%b3%95">#</a>
</h2>
<p><strong>定义</strong></p>
<p>在数学和计算机科学领域，算法是一系列有限的严谨指令，通常用于解决一类特定问题或执行计算</p>
<blockquote>
<p>In mathematics and computer science, an <strong>algorithm</strong> (/ˈælɡərɪðəm/) is a finite sequence of rigorous instructions, typically used to solve a class of specific problems or to perform a computation.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
</blockquote>
<p><strong>Introduction to Algorithm<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></strong></p>
<p>不正式的说，算法就是任何定义优良的计算过程：接收一些值作为输入，在有限的时间内，产生一些值作为输出。</p>
<blockquote>
<p>Informally, an algorithm is any well-defined computational procedure that takes some value, or set of values, as input and produces some value, or set of values, as output in a finite amount of time.</p>
</blockquote>
<h2 id="12-什么是数据结构">
  1.2 什么是数据结构？
  <a class="anchor" href="#12-%e4%bb%80%e4%b9%88%e6%98%af%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84">#</a>
</h2>
<p><strong>定义</strong></p>
<p>在计算机科学领域，数据结构是一种数据组织、管理和存储格式，通常被选择用来高效访问数据</p>
<blockquote>
<p>In computer science, a <strong>data structure</strong> is a data organization, management, and storage format that is usually chosen for efficient access to data</p>
</blockquote>
<p><strong>Introduction to Algorithm<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></strong></p>
<p>数据结构是一种存储和组织数据的方式，旨在便于访问和修改</p>
<blockquote>
<p>A data structure is a way to store and organize data in order to facilitate access and modifications</p>
</blockquote>
<p>接下来我们通过对一个非常著名的二分查找算法的讲解来认识一下算法</p>
<h2 id="13-二分查找-3">
  1.3 二分查找 <sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>
  <a class="anchor" href="#13-%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be-3">#</a>
</h2>
<p>二分查找算法也称折半查找，是一种非常高效的工作于有序数组的查找算法。后续的课程中还会学习更多的查找算法，但在此之前，不妨用它作为入门。</p>
<h3 id="二分查找基础版">
  二分查找基础版
  <a class="anchor" href="#%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be%e5%9f%ba%e7%a1%80%e7%89%88">#</a>
</h3>
<p>需求：在<strong>有序</strong>数组 $A$ 内，查找值 $target$</p>
<ul>
<li>如果找到返回索引</li>
<li>如果找不到返回 $-1$</li>
</ul>
<table>
<thead>
<tr>
<th>算法描述</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>前提</td>
<td>给定一个内含 $n$ 个元素的有序数组 $A$，满足 $A_{0}\leq A_{1}\leq A_{2}\leq \cdots \leq A_{n-1}$，一个待查值 $target$</td>
</tr>
<tr>
<td>1</td>
<td>设置 $i=0$，$j=n-1$</td>
</tr>
<tr>
<td>2</td>
<td>如果 $i \gt j$，结束查找，没找到</td>
</tr>
<tr>
<td>3</td>
<td>设置 $m = floor(\frac {i+j}{2})$ ，$m$ 为中间索引，$floor$ 是向下取整（$\leq \frac {i+j}{2}$ 的最小整数）</td>
</tr>
<tr>
<td>4</td>
<td>如果 $target &lt; A_{m}$ 设置 $j = m - 1$，跳到第2步</td>
</tr>
<tr>
<td>5</td>
<td>如果 $A_{m} &lt; target$ 设置 $i = m + 1$，跳到第2步</td>
</tr>
<tr>
<td>6</td>
<td>如果 $A_{m} = target$，结束查找，找到了</td>
</tr>
</tbody>
</table>
<p>java 实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearch</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>			<span style="color:#75715e">// 在左边
</span><span style="color:#75715e"></span>            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>		<span style="color:#75715e">// 在右边
</span><span style="color:#75715e"></span>            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>$i,j$ 对应着搜索区间 $[0,a.length-1]$（注意是闭合的区间），$i&lt;=j$ 意味着搜索区间内还有未比较的元素，$i,j$ 指向的元素也可能是比较的目标
<ul>
<li>思考：如果不加 $i==j$ 行不行？</li>
<li>回答：不行，因为这意味着 $i,j$ 指向的元素会漏过比较</li>
</ul>
</li>
<li>$m$ 对应着中间位置，中间位置左边和右边的元素可能不相等（差一个），不会影响结果</li>
<li>如果某次未找到，那么缩小后的区间内不包含 $m$</li>
</ul>
<h3 id="二分查找改变版">
  二分查找改变版
  <a class="anchor" href="#%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be%e6%94%b9%e5%8f%98%e7%89%88">#</a>
</h3>
<p>另一种写法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearch</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>			<span style="color:#75715e">// 在左边
</span><span style="color:#75715e"></span>            j <span style="color:#f92672">=</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>		<span style="color:#75715e">// 在右边
</span><span style="color:#75715e"></span>            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>$i,j$ 对应着搜索区间 $[0,a.length)$（注意是左闭右开的区间），$i&lt;j$ 意味着搜索区间内还有未比较的元素，$j$ 指向的<strong>一定不是</strong>查找目标
<ul>
<li>思考：为啥这次不加 $i==j$ 的条件了？</li>
<li>回答：这回 $j$ 指向的不是查找目标，如果还加 $i==j$ 条件，就意味着 $j$ 指向的还会再次比较，找不到时，会死循环</li>
</ul>
</li>
<li>如果某次要缩小右边界，那么 $j=m$，因为此时的 $m$ 已经<strong>不是</strong>查找目标了</li>
</ul>
<h3 id="衡量算法好坏">
  衡量算法好坏
  <a class="anchor" href="#%e8%a1%a1%e9%87%8f%e7%ae%97%e6%b3%95%e5%a5%bd%e5%9d%8f">#</a>
</h3>
<p><strong>时间复杂度</strong></p>
<p>下面的查找算法也能得出与之前二分查找一样的结果，那你能说出它差在哪里吗？</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">search</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        i <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
        i<span style="color:#f92672">++</span>
    <span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> i<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>考虑最坏情况下（没找到）例如 <code>[1,2,3,4]</code> 查找 5</p>
<ul>
<li><code>int i = 0</code> 只执行一次</li>
<li><code>i &lt; a.length</code> 受数组元素个数 $n$ 的影响，比较 $n+1$ 次</li>
<li><code>i++</code> 受数组元素个数 $n$ 的影响，自增 $n$ 次</li>
<li><code>a[i] == k</code> 受元素个数 $n$ 的影响，比较 $n$ 次</li>
<li><code>return -1</code>，执行一次</li>
</ul>
<p>粗略认为每行代码执行时间是 $t$，假设 $n=4$ 那么</p>
<ul>
<li>总执行时间是 $(1+4+1+4+4+1)*t = 15t$</li>
<li>可以推导出更一般地公式为，$T = (3*n+3)t$</li>
</ul>
<p>如果套用二分查找算法，还是 <code>[1,2,3,4]</code> 查找 5</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearch</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>			<span style="color:#75715e">// 在左边
</span><span style="color:#75715e"></span>            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>		<span style="color:#75715e">// 在右边
</span><span style="color:#75715e"></span>            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>
<p><code>int i = 0, j = a.length - 1</code> 各执行 1 次</p>
</li>
<li>
<p><code>i &lt;= j</code> 比较 $floor(\log_{2}(n)+1)$ 再加 1 次</p>
</li>
<li>
<p><code>(i + j) &gt;&gt;&gt; 1</code> 计算 $floor(\log_{2}(n)+1)$ 次</p>
</li>
<li>
<p>接下来 <code>if() else if() else</code> 会执行 $3* floor(\log_{2}(n)+1)$ 次，分别为</p>
<ul>
<li>if 比较</li>
<li>else if 比较</li>
<li>else if 比较成立后的赋值语句</li>
</ul>
</li>
<li>
<p><code>return -1</code>，执行一次</p>
</li>
</ul>
<p>结果：</p>
<ul>
<li>总执行时间为 $(2 + (1+3) + 3 + 3 * 3 +1)*t = 19t$</li>
<li>更一般地公式为 $(4 + 5 * floor(\log_{2}(n)+1))*t$</li>
</ul>
<blockquote>
<p><strong>注意：</strong></p>
<p>左侧未找到和右侧未找到结果不一样，这里不做分析</p>
</blockquote>
<p>两个算法比较，可以看到 $n$ 在较小的时候，二者花费的次数差不多
<img src="../imgs/image-20221108095747933.png" alt="" /></p>
<p>但随着 $n$ 越来越大，比如说 $n=1000$ 时，用二分查找算法（红色）也就是 $54t$，而蓝色算法则需要 $3003t$
<img src="../imgs/image-20221108100014451.png" alt="" /></p>
<blockquote>
<p>画图采用的是 <a href="https://www.desmos.com/calculator?lang=zh-CN">Desmos | 图形计算器</a></p>
</blockquote>
<p>计算机科学中，<strong>时间复杂度</strong>是用来衡量：一个算法的执行，随数据规模增大，而增长的时间成本</p>
<ul>
<li>不依赖于环境因素</li>
</ul>
<p>如何表示时间复杂度呢？</p>
<ul>
<li>
<p>假设算法要处理的数据规模是 $n$，代码总的执行行数用函数 $f(n)$ 来表示，例如：</p>
<ul>
<li>线性查找算法的函数 $f(n) = 3*n + 3$</li>
<li>二分查找算法的函数 $f(n) = (floor(log_2(n)) + 1) * 5 + 4$</li>
</ul>
</li>
<li>
<p>为了对 $f(n)$ 进行化简，应当抓住主要矛盾，找到一个变化趋势与之相近的表示法</p>
</li>
</ul>
<p><strong>大 $O$ 表示法<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup></strong></p>
<p><img src="../imgs/image-20221108103846566.png" alt="image-20221108103846566" /></p>
<p>其中</p>
<ul>
<li>$c, c_1, c_2$ 都为一个常数</li>
<li>$f(n)$ 是实际执行代码行数与 n 的函数</li>
<li>$g(n)$ 是经过化简，变化趋势与 $f(n)$ 一致的 n 的函数</li>
</ul>
<p><strong>渐进上界</strong></p>
<p>渐进上界（asymptotic upper bound）：从某个常数 $n_0$开始，$c*g(n)$ 总是位于 $f(n)$ 上方，那么记作 $O(g(n))$</p>
<ul>
<li>代表算法执行的最差情况</li>
</ul>
<p>例1</p>
<ul>
<li>$f(n) = 3*n+3$</li>
<li>$g(n) = n$</li>
<li>取 $c=4$，在$n_0=3$ 之后，$g(n)$ 可以作为 $f(n)$ 的渐进上界，因此表示法写作 $O(n)$</li>
</ul>
<p>例2</p>
<ul>
<li>$f(n) = 5*floor(log_2(n)) + 9$</li>
<li>$g(n) = log_2(n)$</li>
<li>$O(log_2(n))$</li>
</ul>
<p>已知 $f(n)$ 来说，求 $g(n)$</p>
<ul>
<li>表达式中相乘的常量，可以省略，如
<ul>
<li>$f(n) = 100*n^2$ 中的 $100$</li>
</ul>
</li>
<li>多项式中数量规模更小（低次项）的表达式，如
<ul>
<li>$f(n)=n^2+n$ 中的 $n$</li>
<li>$f(n) = n^3 + n^2$ 中的 $n^2$</li>
</ul>
</li>
<li>不同底数的对数，渐进上界可以用一个对数函数 $\log n$ 表示
<ul>
<li>例如：$log_2(n)$ 可以替换为 $log_{10}(n)$，因为 $log_2(n) = \frac{log_{10}(n)}{log_{10}(2)}$，相乘的常量 $\frac{1}{log_{10}(2)}$ 可以省略</li>
</ul>
</li>
<li>类似的，对数的常数次幂可省略
<ul>
<li>如：$log(n^c) = c * log(n)$</li>
</ul>
</li>
</ul>
<p><strong>常见大 $O$ 表示法</strong></p>
<p><img src="../imgs/image-20221108114915524.png" alt="image-20221108114915524" /></p>
<p>按时间复杂度从低到高</p>
<ul>
<li>黑色横线 $O(1)$，常量时间，意味着算法时间并不随数据规模而变化</li>
<li>绿色 $O(log(n))$，对数时间</li>
<li>蓝色 $O(n)$，线性时间，算法时间与数据规模成正比</li>
<li>橙色 $O(n*log(n))$，拟线性时间</li>
<li>红色 $O(n^2)$ 平方时间</li>
<li>黑色朝上 $O(2^n)$ 指数时间</li>
<li>没画出来的 $O(n!)$</li>
</ul>
<p><strong>渐进下界</strong></p>
<p>渐进下界（asymptotic lower bound）：从某个常数 $n_0$开始，$c*g(n)$ 总是位于 $f(n)$ 下方，那么记作 $\Omega(g(n))$</p>
<p><strong>渐进紧界</strong></p>
<p>渐进紧界（asymptotic tight bounds）：从某个常数 $n_0$开始，$f(n)$ 总是在 $c_1<em>g(n)$ 和 $c_2</em>g(n)$ 之间，那么记作 $\Theta(g(n))$</p>
<p><strong>空间复杂度</strong></p>
<p>与时间复杂度类似，一般也使用大 $O$ 表示法来衡量：一个算法执行随数据规模增大，而增长的<strong>额外</strong>空间成本</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearchBasic</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>    <span style="color:#75715e">// 设置指针和初值
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>                <span style="color:#75715e">// i~j 范围内有东西
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>         <span style="color:#75715e">// 目标在左边
</span><span style="color:#75715e"></span>            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 目标在右边
</span><span style="color:#75715e"></span>            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>                    <span style="color:#75715e">// 找到了
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>二分查找性能</strong></p>
<p>下面分析二分查找算法的性能</p>
<p>时间复杂度</p>
<ul>
<li>最坏情况：$O(\log n)$</li>
<li>最好情况：如果待查找元素恰好在数组中央，只需要循环一次 $O(1)$</li>
</ul>
<p>空间复杂度</p>
<ul>
<li>需要常数个指针 $i,j,m$，因此额外占用的空间是 $O(1)$</li>
</ul>
<h3 id="二分查找平衡版">
  二分查找平衡版
  <a class="anchor" href="#%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be%e5%b9%b3%e8%a1%a1%e7%89%88">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearchBalance</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>1 <span style="color:#f92672">&lt;</span> j <span style="color:#f92672">-</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">?</span> i <span style="color:#f92672">:</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>思想：</p>
<ol>
<li>左闭右开的区间，$i$ 指向的可能是目标，而 $j$ 指向的不是目标</li>
<li>不奢望循环内通过 $m$ 找出目标, 缩小区间直至剩 1 个, 剩下的这个可能就是要找的（通过 $i$）
<ul>
<li>$j - i &gt; 1$ 的含义是，在范围内待比较的元素个数 &gt; 1</li>
</ul>
</li>
<li>改变 $i$ 边界时，它指向的可能是目标，因此不能 $m+1$</li>
<li>循环内的平均比较次数减少了</li>
<li>时间复杂度 $\Theta(log(n))$</li>
</ol>
<h3 id="二分查找-java-版">
  二分查找 Java 版
  <a class="anchor" href="#%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be-java-%e7%89%88">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearch0</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> fromIndex<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> toIndex<span style="color:#f92672">,</span>
                                     <span style="color:#66d9ef">long</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> low <span style="color:#f92672">=</span> fromIndex<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> high <span style="color:#f92672">=</span> toIndex <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>low <span style="color:#f92672">&lt;=</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> mid <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>low <span style="color:#f92672">+</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">long</span> midVal <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>mid<span style="color:#f92672">];</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>midVal <span style="color:#f92672">&lt;</span> key<span style="color:#f92672">)</span>
            low <span style="color:#f92672">=</span> mid <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>midVal <span style="color:#f92672">&gt;</span> key<span style="color:#f92672">)</span>
            high <span style="color:#f92672">=</span> mid <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">else</span>
            <span style="color:#66d9ef">return</span> mid<span style="color:#f92672">;</span> <span style="color:#75715e">// key found
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-(</span>low <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>  <span style="color:#75715e">// key not found.
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>例如 $[1,3,5,6]$ 要插入 $2$ 那么就是找到一个位置，这个位置左侧元素都比它小
<ul>
<li>等循环结束，若没找到，low 左侧元素肯定都比 target 小，因此 low 即插入点</li>
</ul>
</li>
<li>插入点取负是为了与找到情况区分</li>
<li>-1 是为了把索引 0 位置的插入点与找到的情况进行区分</li>
</ul>
<h3 id="leftmost-与-rightmost">
  Leftmost 与 Rightmost
  <a class="anchor" href="#leftmost-%e4%b8%8e-rightmost">#</a>
</h3>
<p>有时我们希望返回的是最左侧的重复元素，如果用 Basic 二分查找</p>
<ul>
<li>
<p>对于数组 $[1, 2, 3, 4, 4, 5, 6, 7]$，查找元素4，结果是索引3</p>
</li>
<li>
<p>对于数组 $[1, 2, 4, 4, 4, 5, 6, 7]$，查找元素4，结果也是索引3，并不是最左侧的元素</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearchLeftmost1</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> candidate <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            candidate <span style="color:#f92672">=</span> m<span style="color:#f92672">;</span> <span style="color:#75715e">// 记录候选位置
</span><span style="color:#75715e"></span>            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>     <span style="color:#75715e">// 继续向左
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> candidate<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>如果希望返回的是最右侧元素</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearchRightmost1</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> candidate <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            candidate <span style="color:#f92672">=</span> m<span style="color:#f92672">;</span> <span style="color:#75715e">// 记录候选位置
</span><span style="color:#75715e"></span>            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>	   <span style="color:#75715e">// 继续向右
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> candidate<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>应用</strong></p>
<p>对于 Leftmost 与 Rightmost，可以返回一个比 -1 更有用的值</p>
<p>Leftmost 改为</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearchLeftmost</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;=</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> i<span style="color:#f92672">;</span> 
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>leftmost 返回值的另一层含义：$\lt target$ 的元素个数</li>
<li>小于等于中间值，都要向左找</li>
</ul>
<p>Rightmost 改为</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearchRightmost</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> i <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>大于等于中间值，都要向右找</li>
</ul>
<p>几个名词</p>
<p><img src="../imgs/image-20221125174155058.png" alt="image-20221125174155058" /></p>
<p><strong>范围查询</strong>：</p>
<ul>
<li>查询 $x \lt 4$，$0 .. leftmost(4) - 1$</li>
<li>查询 $x \leq 4$，$0 .. rightmost(4)$</li>
<li>查询 $4 \lt x$，$rightmost(4) + 1 .. \infty $</li>
<li>查询 $4 \leq x$， $leftmost(4) .. \infty$</li>
<li>查询 $4 \leq x \leq 7$，$leftmost(4) .. rightmost(7)$</li>
<li>查询 $4 \lt x \lt 7$，$rightmost(4)+1 .. leftmost(7)-1$</li>
</ul>
<p><strong>求排名</strong>：$leftmost(target) + 1$</p>
<ul>
<li>$target$ 可以不存在，如：$leftmost(5)+1 = 6$</li>
<li>$target$ 也可以存在，如：$leftmost(4)+1 = 3$</li>
</ul>
<p><strong>求前任（predecessor）</strong>：$leftmost(target) - 1$</p>
<ul>
<li>$leftmost(3) - 1 = 1$，前任 $a_1 = 2$</li>
<li>$leftmost(4) - 1 = 1$，前任 $a_1 = 2$</li>
</ul>
<p><strong>求后任（successor）</strong>：$rightmost(target)+1$</p>
<ul>
<li>$rightmost(5) + 1 = 5$，后任 $a_5 = 7$</li>
<li>$rightmost(4) + 1 = 5$，后任 $a_5 = 7$</li>
</ul>
<p><strong>求最近邻居</strong>：</p>
<ul>
<li>前任和后任距离更近者</li>
</ul>
<h1 id="二-基础数据结构">
  二. 基础数据结构
  <a class="anchor" href="#%e4%ba%8c-%e5%9f%ba%e7%a1%80%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84">#</a>
</h1>
<h2 id="21-数组">
  2.1 数组
  <a class="anchor" href="#21-%e6%95%b0%e7%bb%84">#</a>
</h2>
<h3 id="概述">
  概述
  <a class="anchor" href="#%e6%a6%82%e8%bf%b0">#</a>
</h3>
<p><strong>定义</strong></p>
<p>在计算机科学中，数组是由一组元素（值或变量）组成的数据结构，每个元素有至少一个索引或键来标识</p>
<blockquote>
<p>In computer science, an <strong>array</strong> is a data structure consisting of a collection of <em>elements</em> (values or variables), each identified by at least one <em>array index</em> or <em>key</em></p>
</blockquote>
<p>因为数组内的元素是<strong>连续存储</strong>的，所以数组中元素的地址，可以通过其索引计算出来，例如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>1<span style="color:#f92672">,</span>2<span style="color:#f92672">,</span>3<span style="color:#f92672">,</span>4<span style="color:#f92672">,</span>5<span style="color:#f92672">}</span>
</code></pre></div><p>知道了数组的<strong>数据</strong>起始地址 $BaseAddress$，就可以由公式 $BaseAddress + i * size$ 计算出索引 $i$ 元素的地址</p>
<ul>
<li>$i$ 即索引，在 Java、C 等语言都是从 0 开始</li>
<li>$size$ 是每个元素占用字节，例如 $int$ 占 $4$，$double$ 占 $8$</li>
</ul>
<p><strong>小测试</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>1<span style="color:#f92672">,</span>2<span style="color:#f92672">,</span>3<span style="color:#f92672">,</span>4<span style="color:#f92672">,</span>5<span style="color:#f92672">}</span>
</code></pre></div><p>已知 array 的<strong>数据</strong>的起始地址是 0x7138f94c8，那么元素 3 的地址是什么？</p>
<blockquote>
<p>答：0x7138f94c8 + 2 * 1 = 0x7138f94ca</p>
</blockquote>
<p><strong>空间占用</strong></p>
<p>Java 中数组结构为</p>
<ul>
<li>8 字节 markword</li>
<li>4 字节 class 指针（压缩 class 指针的情况）</li>
<li>4 字节 数组大小（决定了数组最大容量是 $2^{32}$）</li>
<li>数组元素 + 对齐字节（java 中所有对象大小都是 8 字节的整数倍<sup id="fnref:5"><a href="#fn:5" class="footnote-ref" role="doc-noteref">5</a></sup>，不足的要用对齐字节补足）</li>
</ul>
<p>例如</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>1<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 5<span style="color:#f92672">};</span>
</code></pre></div><p>的大小为 40 个字节，组成如下</p>
<pre><code>8 + 4 + 4 + 5*4 + 4(alignment)
</code></pre><p><strong>随机访问性能</strong></p>
<p>即根据索引查找元素，时间复杂度是 $O(1)$</p>
<h3 id="动态数组">
  动态数组
  <a class="anchor" href="#%e5%8a%a8%e6%80%81%e6%95%b0%e7%bb%84">#</a>
</h3>
<p><strong>java 版本</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DynamicArray</span> <span style="color:#66d9ef">implements</span> Iterable<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> <span style="color:#75715e">// 逻辑大小
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> capacity <span style="color:#f92672">=</span> 8<span style="color:#f92672">;</span> <span style="color:#75715e">// 容量
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#f92672">{};</span>


    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 向最后位置 [size] 添加元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param element 待添加元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> element<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        add<span style="color:#f92672">(</span>size<span style="color:#f92672">,</span> element<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 向 [0 .. size] 位置添加元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param index   索引位置
</span><span style="color:#75715e">     * @param element 待添加元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> element<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        checkAndGrow<span style="color:#f92672">();</span>

        <span style="color:#75715e">// 添加逻辑
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">&gt;=</span> 0 <span style="color:#f92672">&amp;&amp;</span> index <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 向后挪动, 空出待插入位置
</span><span style="color:#75715e"></span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span>
                    array<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>index<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> element<span style="color:#f92672">;</span>
        size<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">checkAndGrow</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 容量检查
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">==</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 进行扩容, 1.5 1.618 2
</span><span style="color:#75715e"></span>            capacity <span style="color:#f92672">+=</span> capacity <span style="color:#f92672">&gt;&gt;</span> 1<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> newArray <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span>
                    newArray<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> size<span style="color:#f92672">);</span>
            array <span style="color:#f92672">=</span> newArray<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 从 [0 .. size) 范围删除元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param index 索引位置
</span><span style="color:#75715e">     * @return 被删除元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// [0..size)
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> removed <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>index<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 向前挪动
</span><span style="color:#75715e"></span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span>
                    array<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> index <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        size<span style="color:#f92672">--;</span>
        <span style="color:#66d9ef">return</span> removed<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>


    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 查询元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param index 索引位置, 在 [0..size) 区间内
</span><span style="color:#75715e">     * @return 该索引位置的元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>index<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 遍历方法1
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param consumer 遍历要执行的操作, 入参: 每个元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foreach</span><span style="color:#f92672">(</span>Consumer<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> consumer<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 提供 array[i]
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// 返回 void
</span><span style="color:#75715e"></span>            consumer<span style="color:#f92672">.</span><span style="color:#a6e22e">accept</span><span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 遍历方法2 - 迭代器遍历
</span><span style="color:#75715e">     */</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 有没有下一个元素
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> Integer <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 返回当前元素,并移动到下一个元素
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>i<span style="color:#f92672">++];</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 遍历方法3 - stream 遍历
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @return stream 流
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> IntStream <span style="color:#a6e22e">stream</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> IntStream<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> size<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>这些方法实现，都简化了 index 的有效性判断，假设输入的 index 都是合法的</li>
</ul>
<p><strong>插入或删除性能</strong></p>
<p>头部位置，时间复杂度是 $O(n)$</p>
<p>中间位置，时间复杂度是 $O(n)$</p>
<p>尾部位置，时间复杂度是 $O(1)$（均摊来说）</p>
<h3 id="二维数组">
  二维数组
  <a class="anchor" href="#%e4%ba%8c%e7%bb%b4%e6%95%b0%e7%bb%84">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> array <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    <span style="color:#f92672">{</span>11<span style="color:#f92672">,</span> 12<span style="color:#f92672">,</span> 13<span style="color:#f92672">,</span> 14<span style="color:#f92672">,</span> 15<span style="color:#f92672">},</span>
    <span style="color:#f92672">{</span>21<span style="color:#f92672">,</span> 22<span style="color:#f92672">,</span> 23<span style="color:#f92672">,</span> 24<span style="color:#f92672">,</span> 25<span style="color:#f92672">},</span>
    <span style="color:#f92672">{</span>31<span style="color:#f92672">,</span> 32<span style="color:#f92672">,</span> 33<span style="color:#f92672">,</span> 34<span style="color:#f92672">,</span> 35<span style="color:#f92672">},</span>
<span style="color:#f92672">};</span>
</code></pre></div><p>内存图如下</p>
<p><img src="../imgs/image-20221104114132056.png" alt="image-20221104114132056" style="zoom:67%;" /></p>
<ul>
<li>
<p>二维数组占 32 个字节，其中 array[0]，array[1]，array[2] 三个元素分别保存了指向三个一维数组的引用</p>
</li>
<li>
<p>三个一维数组各占 40 个字节</p>
</li>
<li>
<p>它们在内层布局上是<strong>连续</strong>的</p>
</li>
</ul>
<p>更一般的，对一个二维数组 $Array[m][n]$</p>
<ul>
<li>$m$ 是外层数组的长度，可以看作 row 行</li>
<li>$n$ 是内层数组的长度，可以看作 column 列</li>
<li>当访问 $Array[i][j]$，$0\leq i \lt m, 0\leq j \lt n$时，就相当于
<ul>
<li>先找到第 $i$ 个内层数组（行）</li>
<li>再找到此内层数组中第 $j$ 个元素（列）</li>
</ul>
</li>
</ul>
<p><strong>小测试</strong></p>
<p>Java 环境下（不考虑类指针和引用压缩，此为默认情况），有下面的二维数组</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">byte</span><span style="color:#f92672">[][]</span> array <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    <span style="color:#f92672">{</span>11<span style="color:#f92672">,</span> 12<span style="color:#f92672">,</span> 13<span style="color:#f92672">,</span> 14<span style="color:#f92672">,</span> 15<span style="color:#f92672">},</span>
    <span style="color:#f92672">{</span>21<span style="color:#f92672">,</span> 22<span style="color:#f92672">,</span> 23<span style="color:#f92672">,</span> 24<span style="color:#f92672">,</span> 25<span style="color:#f92672">},</span>
    <span style="color:#f92672">{</span>31<span style="color:#f92672">,</span> 32<span style="color:#f92672">,</span> 33<span style="color:#f92672">,</span> 34<span style="color:#f92672">,</span> 35<span style="color:#f92672">},</span>
<span style="color:#f92672">};</span>
</code></pre></div><p>已知 array <strong>对象</strong>起始地址是 0x1000，那么 23 这个元素的地址是什么？</p>
<blockquote>
<p>答：</p>
<ul>
<li>起始地址 0x1000</li>
<li>外层数组大小：16字节对象头 + 3元素 * 每个引用4字节 + 4 对齐字节 = 32 = 0x20</li>
<li>第一个内层数组大小：16字节对象头 + 5元素 * 每个byte1字节 + 3 对齐字节 = 24 = 0x18</li>
<li>第二个内层数组，16字节对象头 = 0x10，待查找元素索引为 2</li>
<li>最后结果 = 0x1000 + 0x20 + 0x18 + 0x10 + 2*1 = 0x104a</li>
</ul>
</blockquote>
<h3 id="局部性原理">
  局部性原理
  <a class="anchor" href="#%e5%b1%80%e9%83%a8%e6%80%a7%e5%8e%9f%e7%90%86">#</a>
</h3>
<p>这里只讨论空间局部性</p>
<ul>
<li>cpu 读取内存（速度慢）数据后，会将其放入高速缓存（速度快）当中，如果后来的计算再用到此数据，在缓存中能读到的话，就不必读内存了</li>
<li>缓存的最小存储单位是缓存行（cache line），一般是 64 bytes，一次读的数据少了不划算啊，因此最少读 64 bytes 填满一个缓存行，因此读入某个数据时也会读取其<strong>临近的数据</strong>，这就是所谓<strong>空间局部性</strong></li>
</ul>
<p><strong>对效率的影响</strong></p>
<p>比较下面 ij 和 ji 两个方法的执行效率</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span> rows <span style="color:#f92672">=</span> 1000000<span style="color:#f92672">;</span>
<span style="color:#66d9ef">int</span> columns <span style="color:#f92672">=</span> 14<span style="color:#f92672">;</span>
<span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> a <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>rows<span style="color:#f92672">][</span>columns<span style="color:#f92672">];</span>

StopWatch sw <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StopWatch<span style="color:#f92672">();</span>
sw<span style="color:#f92672">.</span><span style="color:#a6e22e">start</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ij&#34;</span><span style="color:#f92672">);</span>
ij<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> rows<span style="color:#f92672">,</span> columns<span style="color:#f92672">);</span>
sw<span style="color:#f92672">.</span><span style="color:#a6e22e">stop</span><span style="color:#f92672">();</span>
sw<span style="color:#f92672">.</span><span style="color:#a6e22e">start</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ji&#34;</span><span style="color:#f92672">);</span>
ji<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> rows<span style="color:#f92672">,</span> columns<span style="color:#f92672">);</span>
sw<span style="color:#f92672">.</span><span style="color:#a6e22e">stop</span><span style="color:#f92672">();</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>sw<span style="color:#f92672">.</span><span style="color:#a6e22e">prettyPrint</span><span style="color:#f92672">());</span>
</code></pre></div><p>ij 方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">ij</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> rows<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> columns<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">long</span> sum <span style="color:#f92672">=</span> 0L<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> rows<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> j <span style="color:#f92672">&lt;</span> columns<span style="color:#f92672">;</span> j<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            sum <span style="color:#f92672">+=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>j<span style="color:#f92672">];</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>sum<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>ji 方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">ji</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> rows<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> columns<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">long</span> sum <span style="color:#f92672">=</span> 0L<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> j <span style="color:#f92672">&lt;</span> columns<span style="color:#f92672">;</span> j<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> rows<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            sum <span style="color:#f92672">+=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>j<span style="color:#f92672">];</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>sum<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>执行结果</p>
<pre><code>0
0
StopWatch '': running time = 96283300 ns
---------------------------------------------
ns         %     Task name
---------------------------------------------
016196200  017%  ij
080087100  083%  ji
</code></pre><p>可以看到 ij 的效率比 ji 快很多，为什么呢？</p>
<ul>
<li>缓存是有限的，当新数据来了后，一些旧的缓存行数据就会被覆盖</li>
<li>如果不能充分利用缓存的数据，就会造成效率低下</li>
</ul>
<p>以 ji 执行为例，第一次内循环要读入 $[0,0]$ 这条数据，由于局部性原理，读入 $[0,0]$ 的同时也读入了 $[0,1] &hellip; [0,13]$，如图所示</p>
<p><img src="../imgs/image-20221104164329026.png" alt="image-20221104164329026" /></p>
<p>但很遗憾，第二次内循环要的是 $[1,0]$ 这条数据，缓存中没有，于是再读入了下图的数据</p>
<p><img src="../imgs/image-20221104164716282.png" alt="image-20221104164716282" /></p>
<p>这显然是一种浪费，因为 $[0,1] &hellip; [0,13]$ 包括 $[1,1] &hellip; [1,13]$ 这些数据虽然读入了缓存，却没有及时用上，而缓存的大小是有限的，等执行到第九次内循环时</p>
<p><img src="../imgs/image-20221104164947154.png" alt="image-20221104164947154" /></p>
<p>缓存的第一行数据已经被新的数据 $[8,0] &hellip; [8,13]$ 覆盖掉了，以后如果再想读，比如 $[0,1]$，又得到内存去读了</p>
<p>同理可以分析 ij 函数则能充分利用局部性原理加载到的缓存数据</p>
<p><strong>举一反三</strong></p>
<ol>
<li>
<p>I/O 读写时同样可以体现局部性原理</p>
</li>
<li>
<p>数组可以充分利用局部性原理，那么链表呢？</p>
<blockquote>
<p>答：链表不行，因为链表的元素并非相邻存储</p>
</blockquote>
</li>
</ol>
<h3 id="越界检查">
  越界检查
  <a class="anchor" href="#%e8%b6%8a%e7%95%8c%e6%a3%80%e6%9f%a5">#</a>
</h3>
<p>java 中对数组元素的读写都有越界检查，类似于下面的代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">is_within_bounds</span>(<span style="color:#66d9ef">int</span> index) <span style="color:#66d9ef">const</span>        
{ 
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&lt;=</span> index <span style="color:#f92672">&amp;&amp;</span> index <span style="color:#f92672">&lt;</span> length(); 
}
</code></pre></div><ul>
<li>代码位置：<code>openjdk\src\hotspot\share\oops\arrayOop.hpp</code></li>
</ul>
<p>只不过此检查代码，不需要由程序员自己来调用，JVM 会帮我们调用</p>
<h2 id="22-链表">
  2.2 链表
  <a class="anchor" href="#22-%e9%93%be%e8%a1%a8">#</a>
</h2>
<h3 id="概述-1">
  概述
  <a class="anchor" href="#%e6%a6%82%e8%bf%b0-1">#</a>
</h3>
<p><strong>定义</strong></p>
<p>在计算机科学中，链表是数据元素的线性集合，其每个元素都指向下一个元素，元素存储上并不连续</p>
<blockquote>
<p>In computer science, a <strong>linked list</strong> is a linear collection of data elements whose order is not given by their physical placement in memory. Instead, each element points to the next.</p>
</blockquote>
<p>可以分类为<sup id="fnref:6"><a href="#fn:6" class="footnote-ref" role="doc-noteref">6</a></sup></p>
<ul>
<li>单向链表，每个元素只知道其下一个元素是谁</li>
</ul>
<p><img src="../imgs/image-20221110083407176.png" alt="image-20221110083407176" /></p>
<ul>
<li>双向链表，每个元素知道其上一个元素和下一个元素</li>
</ul>
<p><img src="../imgs/image-20221110083427372.png" alt="image-20221110083427372" /></p>
<ul>
<li>循环链表，通常的链表尾节点 tail 指向的都是 null，而循环链表的 tail 指向的是头节点 head</li>
</ul>
<p><img src="../imgs/image-20221110083538273.png" alt="image-20221110083538273" /></p>
<p>链表内还有一种特殊的节点称为哨兵（Sentinel）节点，也叫做哑元（ Dummy）节点，它不存储数据，通常用作头尾，用来简化边界判断，如下图所示</p>
<p><img src="../imgs/image-20221110084611550.png" alt="image-20221110084611550" /></p>
<p><strong>随机访问性能</strong></p>
<p>根据 index 查找，时间复杂度 $O(n)$</p>
<p><strong>插入或删除性能</strong></p>
<ul>
<li>起始位置：$O(1)$</li>
<li>结束位置：如果已知 tail 尾节点是 $O(1)$，不知道 tail 尾节点是 $O(n)$</li>
<li>中间位置：根据 index 查找时间 + $O(1)$</li>
</ul>
<h3 id="单向链表">
  单向链表
  <a class="anchor" href="#%e5%8d%95%e5%90%91%e9%93%be%e8%a1%a8">#</a>
</h3>
<p>根据单向链表的定义，首先定义一个存储 value 和 next 指针的类 Node，和一个描述头部节点的引用</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#f92672">{</span>
    
    <span style="color:#66d9ef">private</span> Node head<span style="color:#f92672">;</span> <span style="color:#75715e">// 头部节点
</span><span style="color:#75715e"></span>    
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 节点类
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> value<span style="color:#f92672">;</span>
        Node next<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">,</span> Node next<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>Node 定义为内部类，是为了对外<strong>隐藏</strong>实现细节，没必要让类的使用者关心 Node 结构</li>
<li>定义为 static 内部类，是因为 Node <strong>不需要</strong>与 SinglyLinkedList 实例相关，多个 SinglyLinkedList实例能共用 Node 类定义</li>
</ul>
<p><strong>头部添加</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>如果 this.head == null，新增节点指向 null，并作为新的 this.head</li>
<li>如果 this.head != null，新增节点指向原来的 this.head，并作为新的 this.head
<ul>
<li>注意赋值操作执行顺序是从右到左</li>
</ul>
</li>
</ul>
<p><strong>while 遍历</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Node curr <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 做一些事
</span><span style="color:#75715e"></span>            curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>for 遍历</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Node curr <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">;</span> curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 做一些事
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>以上两种遍历都可以把<strong>要做的事</strong>以 Consumer 函数的方式传递进来
<ul>
<li>Consumer 的规则是<strong>一个参数</strong>，<strong>无返回值</strong>，因此像 System.out::println 方法等都是 Consumer</li>
<li>调用 Consumer 时，将当前节点 curr.value 作为参数传递给它</li>
</ul>
</li>
</ul>
<p><strong>迭代器遍历</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#66d9ef">implements</span> Iterable<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NodeIterator</span> <span style="color:#66d9ef">implements</span> Iterator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
        Node curr <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> Integer <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> value <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
            curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> NodeIterator<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>hasNext 用来判断是否还有必要调用 next</li>
<li>next 做两件事
<ul>
<li>返回当前节点的 value</li>
<li>指向下一个节点</li>
</ul>
</li>
<li>NodeIterator 要定义为<strong>非 static 内部类</strong>，是因为它与 SinglyLinkedList 实例相关，是对某个 SinglyLinkedList 实例的迭代</li>
</ul>
<p><strong>递归遍历</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#66d9ef">implements</span> Iterable<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        recursion<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">recursion</span><span style="color:#f92672">(</span>Node curr<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 前面做些事
</span><span style="color:#75715e"></span>        recursion<span style="color:#f92672">(</span>curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">// 后面做些事
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>尾部添加</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> Node <span style="color:#a6e22e">findLast</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node curr<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">;</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> curr<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node last <span style="color:#f92672">=</span> findLast<span style="color:#f92672">();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>last <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            addFirst<span style="color:#f92672">(</span>value<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        last<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>注意，找最后一个节点，终止条件是 curr.next == null</li>
<li>分成两个方法是为了代码清晰，而且 findLast() 之后还能复用</li>
</ul>
<p><strong>尾部添加多个</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> first<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">...</span> rest<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        
        Node sublist <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>first<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
        Node curr <span style="color:#f92672">=</span> sublist<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value <span style="color:#f92672">:</span> rest<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
            curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        Node last <span style="color:#f92672">=</span> findLast<span style="color:#f92672">();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>last <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span> <span style="color:#f92672">=</span> sublist<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        last<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> sublist<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>先串成一串 sublist</li>
<li>再作为一个整体添加</li>
</ul>
<p><strong>根据索引获取</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span> Node <span style="color:#a6e22e">findNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Node curr <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">;</span> curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">,</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">==</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> curr<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">private</span> IllegalArgumentException <span style="color:#a6e22e">illegalIndex</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">(</span>String<span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;index [%d] 不合法%n&#34;</span><span style="color:#f92672">,</span> index<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node node <span style="color:#f92672">=</span> findNode<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>同样，分方法可以实现复用</li>
</ul>
<p><strong>插入</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            addFirst<span style="color:#f92672">(</span>value<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node prev <span style="color:#f92672">=</span> findNode<span style="color:#f92672">(</span>index <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span> <span style="color:#75715e">// 找到上一个节点
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>prev <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 找不到
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>插入包括下面的删除，都必须找到上一个节点</li>
</ul>
<p><strong>删除</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedList</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        Node prev <span style="color:#f92672">=</span> findNode<span style="color:#f92672">(</span>index <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        Node curr<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>prev <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">=</span> prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>第一个 if 块对应着 removeFirst 情况</li>
<li>最后一个 if 块对应着至少得两个节点的情况
<ul>
<li>不仅仅判断上一个节点非空，还要保证当前节点非空</li>
</ul>
</li>
</ul>
<h3 id="单向链表带哨兵">
  单向链表（带哨兵）
  <a class="anchor" href="#%e5%8d%95%e5%90%91%e9%93%be%e8%a1%a8%e5%b8%a6%e5%93%a8%e5%85%b5">#</a>
</h3>
<p>观察之前单向链表的实现，发现每个方法内几乎都有判断是不是 head 这样的代码，能不能简化呢？</p>
<p>用一个不参与数据存储的特殊 Node 作为哨兵，它一般被称为哨兵或哑元，拥有哨兵节点的链表称为带头链表</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedListSentinel</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> Node head <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">MIN_VALUE</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>具体存什么值无所谓，因为不会用到它的值</li>
</ul>
<p>加入哨兵节点后，代码会变得比较简单，先看几个工具方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedListSentinel</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    
    <span style="color:#75715e">// 根据索引获取节点
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> Node <span style="color:#a6e22e">findNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Node curr <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">;</span> curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">,</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">==</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> curr<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#75715e">// 获取最后一个节点
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> Node <span style="color:#a6e22e">findLast</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Node curr<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">;</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> curr<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>findNode 与之前类似，只是 i 初始值设置为 -1 对应哨兵，实际传入的 index 也是 $[-1, \infty)$</li>
<li>findLast 绝不会返回 null 了，就算没有其它节点，也会返回哨兵作为最后一个节点</li>
</ul>
<p>这样，代码简化为</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SinglyLinkedListSentinel</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node last <span style="color:#f92672">=</span> findLast<span style="color:#f92672">();</span>
        <span style="color:#75715e">/*
</span><span style="color:#75715e">        改动前
</span><span style="color:#75715e">        if (last == null) {
</span><span style="color:#75715e">            this.head = new Node(value, null);
</span><span style="color:#75715e">            return;
</span><span style="color:#75715e">        }
</span><span style="color:#75715e">        */</span>
        last<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">/*
</span><span style="color:#75715e">        改动前
</span><span style="color:#75715e">        if (index == 0) {
</span><span style="color:#75715e">            this.head = new Node(value, this.head);
</span><span style="color:#75715e">            return;
</span><span style="color:#75715e">        }
</span><span style="color:#75715e">        */</span>
        <span style="color:#75715e">// index 传入 0 时，返回的是哨兵
</span><span style="color:#75715e"></span>        Node prev <span style="color:#f92672">=</span> findNode<span style="color:#f92672">(</span>index <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>prev <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">/*
</span><span style="color:#75715e">        改动前
</span><span style="color:#75715e">        if (index == 0) {
</span><span style="color:#75715e">            if (this.head != null) {
</span><span style="color:#75715e">                this.head = this.head.next;
</span><span style="color:#75715e">                return;
</span><span style="color:#75715e">            } else {
</span><span style="color:#75715e">                throw illegalIndex(index);
</span><span style="color:#75715e">            }
</span><span style="color:#75715e">        }
</span><span style="color:#75715e">        */</span>
        <span style="color:#75715e">// index 传入 0 时，返回的是哨兵
</span><span style="color:#75715e"></span>        Node prev <span style="color:#f92672">=</span> findNode<span style="color:#f92672">(</span>index <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        Node curr<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>prev <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">=</span> prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">/*
</span><span style="color:#75715e">        改动前
</span><span style="color:#75715e">        this.head = new Node(value, this.head);
</span><span style="color:#75715e">        */</span>
		<span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">// 也可以视为 insert 的特例, 即 insert(0, value);
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>对于删除，前面说了【最后一个 if 块对应着至少得两个节点的情况】，现在有了哨兵，就凑足了两个节点</li>
</ul>
<h3 id="双向链表带哨兵">
  双向链表（带哨兵）
  <a class="anchor" href="#%e5%8f%8c%e5%90%91%e9%93%be%e8%a1%a8%e5%b8%a6%e5%93%a8%e5%85%b5">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DoublyLinkedListSentinel</span> <span style="color:#66d9ef">implements</span> Iterable<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Node head<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Node tail<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">DoublyLinkedListSentinel</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        head <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> 666<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
        tail <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> 888<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
        head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> tail<span style="color:#f92672">;</span>
        tail<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> Node <span style="color:#a6e22e">findNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Node p <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span> p <span style="color:#f92672">!=</span> tail<span style="color:#f92672">;</span> p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">,</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">==</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        insert<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">removeFirst</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        remove<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node prev <span style="color:#f92672">=</span> tail<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        Node added <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>prev<span style="color:#f92672">,</span> value<span style="color:#f92672">,</span> tail<span style="color:#f92672">);</span>
        prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
        tail<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">removeLast</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Node removed <span style="color:#f92672">=</span> tail<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>removed <span style="color:#f92672">==</span> head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        Node prev <span style="color:#f92672">=</span> removed<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> tail<span style="color:#f92672">;</span>
        tail<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> prev<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node prev <span style="color:#f92672">=</span> findNode<span style="color:#f92672">(</span>index <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>prev <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        Node next <span style="color:#f92672">=</span> prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        Node inserted <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>prev<span style="color:#f92672">,</span> value<span style="color:#f92672">,</span> next<span style="color:#f92672">);</span>
        prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> inserted<span style="color:#f92672">;</span>
        next<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> inserted<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node prev <span style="color:#f92672">=</span> findNode<span style="color:#f92672">(</span>index <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>prev <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        Node removed <span style="color:#f92672">=</span> prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>removed <span style="color:#f92672">==</span> tail<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> illegalIndex<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        Node next <span style="color:#f92672">=</span> removed<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
        next<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> prev<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> IllegalArgumentException <span style="color:#a6e22e">illegalIndex</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">(</span>
                String<span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;index [%d] 不合法%n&#34;</span><span style="color:#f92672">,</span> index<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            Node p <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">!=</span> tail<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> Integer <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">int</span> value <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span> <span style="color:#f92672">{</span>
        Node prev<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> value<span style="color:#f92672">;</span>
        Node next<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span>Node prev<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> value<span style="color:#f92672">,</span> Node next<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> prev<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="环形链表带哨兵">
  环形链表（带哨兵）
  <a class="anchor" href="#%e7%8e%af%e5%bd%a2%e9%93%be%e8%a1%a8%e5%b8%a6%e5%93%a8%e5%85%b5">#</a>
</h3>
<p>双向环形链表带哨兵，这时哨兵<strong>既作为头，也作为尾</strong></p>
<p><img src="../imgs/image-20221229144232651.png" alt="image-20221229144232651" /></p>
<p><img src="../imgs/image-20221229143756065.png" alt="image-20221229143756065" /></p>
<p><img src="../imgs/image-20221229153338425.png" alt="image-20221229153338425" /></p>
<p><img src="../imgs/image-20221229154248800.png" alt="image-20221229154248800" /></p>
<p>参考实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DoublyLinkedListSentinel</span> <span style="color:#66d9ef">implements</span> Iterable<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;&gt;()</span> <span style="color:#f92672">{</span>
            Node p <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">!=</span> sentinel<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> Integer <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">int</span> value <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span> <span style="color:#f92672">{</span>
        Node prev<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> value<span style="color:#f92672">;</span>
        Node next<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span>Node prev<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> value<span style="color:#f92672">,</span> Node next<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> prev<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Node sentinel <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 哨兵
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">DoublyLinkedListSentinel</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 添加到第一个
</span><span style="color:#75715e">     * @param value 待添加值
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node next <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        Node prev <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        Node added <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>prev<span style="color:#f92672">,</span> value<span style="color:#f92672">,</span> next<span style="color:#f92672">);</span>
        prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
        next<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 添加到最后一个
</span><span style="color:#75715e">     * @param value 待添加值
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node prev <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        Node next <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        Node added <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>prev<span style="color:#f92672">,</span> value<span style="color:#f92672">,</span> next<span style="color:#f92672">);</span>
        prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
        next<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 删除第一个
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">removeFirst</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Node removed <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>removed <span style="color:#f92672">==</span> sentinel<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;非法&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        Node a <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        Node b <span style="color:#f92672">=</span> removed<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        a<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> b<span style="color:#f92672">;</span>
        b<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 删除最后一个
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">removeLast</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Node removed <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>removed <span style="color:#f92672">==</span> sentinel<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;非法&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        Node a <span style="color:#f92672">=</span> removed<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        Node b <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        a<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> b<span style="color:#f92672">;</span>
        b<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 根据值删除节点
</span><span style="color:#75715e">     * &lt;p&gt;假定 value 在链表中作为 key, 有唯一性&lt;/p&gt;
</span><span style="color:#75715e">     * @param value 待删除值
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">removeByValue</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node removed <span style="color:#f92672">=</span> findNodeByValue<span style="color:#f92672">(</span>value<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>removed <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            Node prev <span style="color:#f92672">=</span> removed<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
            Node next <span style="color:#f92672">=</span> removed<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
            next<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> prev<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> Node <span style="color:#a6e22e">findNodeByValue</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Node p <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> sentinel<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">==</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><h2 id="23-递归">
  2.3 递归
  <a class="anchor" href="#23-%e9%80%92%e5%bd%92">#</a>
</h2>
<h3 id="概述-2">
  概述
  <a class="anchor" href="#%e6%a6%82%e8%bf%b0-2">#</a>
</h3>
<p><strong>定义</strong></p>
<p>计算机科学中，递归是一种解决计算问题的方法，其中解决方案取决于同一类问题的更小子集</p>
<blockquote>
<p>In computer science, <strong>recursion</strong> is a method of solving a computational problem where the solution depends on solutions to smaller instances of the same problem.</p>
</blockquote>
<p>比如单链表递归遍历的例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span><span style="color:#f92672">(</span>Node node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;before:&#34;</span> <span style="color:#f92672">+</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">)</span>
    f<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
    println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;after:&#34;</span> <span style="color:#f92672">+</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">)</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>说明：</p>
<ol>
<li>自己调用自己，如果说每个函数对应着一种解决方案，自己调用自己意味着解决方案是一样的（有规律的）</li>
<li>每次调用，函数处理的数据会较上次缩减（子集），而且最后会缩减至无需继续递归</li>
<li>内层函数调用（子集处理）完成，外层函数才能算调用完成</li>
</ol>
<p><strong>原理</strong></p>
<p>假设链表中有 3 个节点，value 分别为 1，2，3，以上代码的执行流程就类似于下面的<strong>伪码</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// 1 -&gt; 2 -&gt; 3 -&gt; null  f(1)
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span><span style="color:#f92672">(</span>Node node <span style="color:#f92672">=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;before:&#34;</span> <span style="color:#f92672">+</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span><span style="color:#f92672">(</span>Node node <span style="color:#f92672">=</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;before:&#34;</span> <span style="color:#f92672">+</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 2
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span><span style="color:#f92672">(</span>Node node <span style="color:#f92672">=</span> 3<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;before:&#34;</span> <span style="color:#f92672">+</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 3
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span><span style="color:#f92672">(</span>Node node <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;after:&#34;</span> <span style="color:#f92672">+</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 3
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
        println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;after:&#34;</span> <span style="color:#f92672">+</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 2
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
    println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;after:&#34;</span> <span style="color:#f92672">+</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 1
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p><strong>思路</strong></p>
<ol>
<li>确定能否使用递归求解</li>
<li>推导出递推关系，即父问题与子问题的关系，以及递归的结束条件</li>
</ol>
<p>例如之前遍历链表的递推关系为
$$
f(n) = 
\begin{cases}
停止&amp; n = null \<br>
f(n.next) &amp; n \neq null
\end{cases}
$$</p>
<ul>
<li>深入到最里层叫做<strong>递</strong></li>
<li>从最里层出来叫做<strong>归</strong></li>
<li>在<strong>递</strong>的过程中，外层函数内的局部变量（以及方法参数）并未消失，<strong>归</strong>的时候还可以用到</li>
</ul>
<h3 id="单路递归-single-recursion">
  单路递归 Single Recursion
  <a class="anchor" href="#%e5%8d%95%e8%b7%af%e9%80%92%e5%bd%92-single-recursion">#</a>
</h3>
<p><strong>E01. 阶乘</strong></p>
<p>用递归方法求阶乘</p>
<ul>
<li>
<p>阶乘的定义 $n!= 1⋅2⋅3⋯(n-2)⋅(n-1)⋅n$，其中 $n$ 为自然数，当然 $0! = 1$</p>
</li>
<li>
<p>递推关系</p>
</li>
</ul>
<p>$$
f(n) = 
\begin{cases}
1 &amp; n = 1\<br>
n * f(n-1) &amp; n &gt; 1
\end{cases}
$$</p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> n <span style="color:#f92672">*</span> f<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>拆解<strong>伪码</strong>如下，假设 n 初始值为 3</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">f<span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> 3<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 解决不了,递
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> 3 <span style="color:#f92672">*</span> f<span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 解决不了,继续递
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> 2 <span style="color:#f92672">*</span> f<span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 可以解决, 开始归
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>E02. 反向打印字符串</strong></p>
<p>用递归反向打印字符串，n 为字符在整个字符串 str 中的索引位置</p>
<ul>
<li><strong>递</strong>：n 从 0 开始，每次 n + 1，一直递到 n == str.length() - 1</li>
<li><strong>归</strong>：从 n == str.length() 开始归，从归打印，自然是逆序的</li>
</ul>
<p>递推关系
$$
f(n) = 
\begin{cases}
停止 &amp; n = str.length() \<br>
f(n+1) &amp; 0 \leq n \leq str.length() - 1
\end{cases}
$$
代码为</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">reversePrint</span><span style="color:#f92672">(</span>String str<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">==</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    reversePrint<span style="color:#f92672">(</span>str<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>str<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>index<span style="color:#f92672">));</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>拆解<strong>伪码</strong>如下，假设字符串为 &ldquo;abc&rdquo;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">reversePrint</span><span style="color:#f92672">(</span>String str<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index <span style="color:#f92672">=</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">reversePrint</span><span style="color:#f92672">(</span>String str<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index <span style="color:#f92672">=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">reversePrint</span><span style="color:#f92672">(</span>String str<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index <span style="color:#f92672">=</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">reversePrint</span><span style="color:#f92672">(</span>String str<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index <span style="color:#f92672">=</span> 3<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">==</span> str<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 开始归
</span><span style="color:#75715e"></span>                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>str<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>index<span style="color:#f92672">));</span> <span style="color:#75715e">// 打印 c
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>str<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>index<span style="color:#f92672">));</span> <span style="color:#75715e">// 打印 b
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>str<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>index<span style="color:#f92672">));</span> <span style="color:#75715e">// 打印 a
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><h3 id="多路递归-multi-recursion">
  多路递归 Multi Recursion
  <a class="anchor" href="#%e5%a4%9a%e8%b7%af%e9%80%92%e5%bd%92-multi-recursion">#</a>
</h3>
<p><strong>E01. 斐波那契数列</strong></p>
<ul>
<li>之前的例子是每个递归函数只包含一个自身的调用，这称之为 single recursion</li>
<li>如果每个递归函数例包含多个自身调用，称之为 multi recursion</li>
</ul>
<p><strong>递推关系</strong>
$$
f(n) = 
\begin{cases}
0 &amp; n=0 \<br>
1 &amp; n=1 \<br>
f(n-1) + f(n-2) &amp; n&gt;1
\end{cases}
$$</p>
<p>下面的表格列出了数列的前几项</p>
<table>
<thead>
<tr>
<th><em>F</em>0</th>
<th><em>F</em>1</th>
<th><em>F</em>2</th>
<th><em>F</em>3</th>
<th><em>F</em>4</th>
<th><em>F</em>5</th>
<th><em>F</em>6</th>
<th><em>F</em>7</th>
<th><em>F</em>8</th>
<th><em>F</em>9</th>
<th><em>F</em>10</th>
<th><em>F</em>11</th>
<th><em>F</em>12</th>
<th><em>F</em>13</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
<td>8</td>
<td>13</td>
<td>21</td>
<td>34</td>
<td>55</td>
<td>89</td>
<td>144</td>
<td>233</td>
</tr>
</tbody>
</table>
<p><strong>实现</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> f<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> f<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> 2<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>执行流程</strong></p>
<p><img src="../imgs/2.gif" alt="" /></p>
<ul>
<li>绿色代表正在执行（对应递），灰色代表执行结束（对应归）</li>
<li>递不到头，不能归，对应着深度优先搜索</li>
</ul>
<p><strong>时间复杂度</strong></p>
<ul>
<li>递归的次数也符合斐波那契规律，$2 * f(n+1)-1$</li>
<li>时间复杂度推导过程
<ul>
<li>斐波那契通项公式 $f(n) = \frac{1}{\sqrt{5}}*({\frac{1+\sqrt{5}}{2}}^n - {\frac{1-\sqrt{5}}{2}}^n)$</li>
<li>简化为：$f(n) = \frac{1}{2.236}*({1.618}^n - {(-0.618)}^n)$</li>
<li>带入递归次数公式 $2*\frac{1}{2.236}*({1.618}^{n+1} - {(-0.618)}^{n+1})-1$</li>
<li>时间复杂度为 $\Theta(1.618^n)$</li>
</ul>
</li>
</ul>
<blockquote>
<ol>
<li>更多 Fibonacci 参考<sup id="fnref:7"><a href="#fn:7" class="footnote-ref" role="doc-noteref">7</a></sup><sup id="fnref:8"><a href="#fn:8" class="footnote-ref" role="doc-noteref">8</a></sup><sup id="fnref:9"><a href="#fn:9" class="footnote-ref" role="doc-noteref">9</a></sup></li>
<li>以上时间复杂度分析，未考虑大数相加的因素</li>
</ol>
</blockquote>
<p><strong>变体1 - 兔子问题<sup id="fnref:7"><a href="#fn:7" class="footnote-ref" role="doc-noteref">7</a></sup></strong></p>
<p><img src="../imgs/image-20221110155655827.png" alt="image-20221110155655827" /></p>
<ul>
<li>第一个月，有一对未成熟的兔子（黑色，注意图中个头较小）</li>
<li>第二个月，它们成熟</li>
<li>第三个月，它们能产下一对新的小兔子（蓝色）</li>
<li>所有兔子遵循相同规律，求第 $n$ 个月的兔子数</li>
</ul>
<p><strong>分析</strong></p>
<p>兔子问题如何与斐波那契联系起来呢？设第 n 个月兔子数为 $f(n)$</p>
<ul>
<li>$f(n)$ = 上个月兔子数 + 新生的小兔子数</li>
<li>而【新生的小兔子数】实际就是【上个月成熟的兔子数】</li>
<li>因为需要一个月兔子就成熟，所以【上个月成熟的兔子数】也就是【上上个月的兔子数】</li>
<li>上个月兔子数，即 $f(n-1)$</li>
<li>上上个月的兔子数，即 $f(n-2)$</li>
</ul>
<p>因此本质还是斐波那契数列，只是从其第一项开始</p>
<p><strong>变体2 - 青蛙爬楼梯</strong></p>
<ul>
<li>楼梯有 $n$ 阶</li>
<li>青蛙要爬到楼顶，可以一次跳一阶，也可以一次跳两阶</li>
<li>只能向上跳，问有多少种跳法</li>
</ul>
<p><strong>分析</strong></p>
<table>
<thead>
<tr>
<th>n</th>
<th>跳法</th>
<th>规律</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>(1)</td>
<td>暂时看不出</td>
</tr>
<tr>
<td>2</td>
<td>(1,1)  (2)</td>
<td>暂时看不出</td>
</tr>
<tr>
<td>3</td>
<td>(1,1,1)  (1,2)  (2,1)</td>
<td>暂时看不出</td>
</tr>
<tr>
<td>4</td>
<td>(1,1,1,1)    (1,2,1)    (2,1,1)<br />(1,1,2)  (2,2)</td>
<td>最后一跳，跳一个台阶的，基于f(3)<br />最后一跳，跳两个台阶的，基于f(2)</td>
</tr>
<tr>
<td>5</td>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>因此本质上还是斐波那契数列，只是从其第二项开始</p>
</li>
<li>
<p>对应 leetcode 题目 <a href="https://leetcode.cn/problems/climbing-stairs/">70. 爬楼梯 - 力扣（LeetCode）</a></p>
</li>
</ul>
<h3 id="递归优化-记忆法">
  递归优化-记忆法
  <a class="anchor" href="#%e9%80%92%e5%bd%92%e4%bc%98%e5%8c%96-%e8%ae%b0%e5%bf%86%e6%b3%95">#</a>
</h3>
<p>上述代码存在很多重复的计算，例如求 $f(5)$ 递归分解过程</p>
<p><img src="../imgs/image-20221207092417933.png" alt="image-20221207092417933" /></p>
<p>可以看到（颜色相同的是重复的）：</p>
<ul>
<li>$f(3)$ 重复了 2 次</li>
<li>$f(2)$ 重复了 3 次</li>
<li>$f(1)$ 重复了 5 次</li>
<li>$f(0)$ 重复了 3 次</li>
</ul>
<p>随着  $n$ 的增大，重复次数非常可观，如何优化呢？</p>
<p><strong>Memoization</strong> 记忆法（也称备忘录）是一种优化技术，通过存储函数调用结果（通常比较昂贵），当再次出现相同的输入（子问题）时，就能实现加速效果，改进后的代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> 13<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> cache <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>n <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
    Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">fill</span><span style="color:#f92672">(</span>cache<span style="color:#f92672">,</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">);</span>
    cache<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    cache<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>f<span style="color:#f92672">(</span>cache<span style="color:#f92672">,</span> n<span style="color:#f92672">));</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> cache<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>cache<span style="color:#f92672">[</span>n<span style="color:#f92672">]</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> cache<span style="color:#f92672">[</span>n<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    cache<span style="color:#f92672">[</span>n<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> f<span style="color:#f92672">(</span>cache<span style="color:#f92672">,</span> n <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> f<span style="color:#f92672">(</span>cache<span style="color:#f92672">,</span> n <span style="color:#f92672">-</span> 2<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> cache<span style="color:#f92672">[</span>n<span style="color:#f92672">];</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>优化后的图示，只要结果被缓存，就<strong>不会执行其子问题</strong></p>
<p><img src="../imgs/image-20221213173225807.png" alt="image-20221213173225807" /></p>
<ul>
<li>改进后的时间复杂度为 $O(n)$</li>
<li>请自行验证改进后的效果</li>
<li>请自行分析改进后的空间复杂度</li>
</ul>
<blockquote>
<p><strong>注意</strong></p>
<ol>
<li>记忆法是动态规划的一种情况，强调的是自顶向下的解决</li>
<li>记忆法的本质是空间换时间</li>
</ol>
</blockquote>
<h3 id="递归优化-尾递归">
  递归优化-尾递归
  <a class="anchor" href="#%e9%80%92%e5%bd%92%e4%bc%98%e5%8c%96-%e5%b0%be%e9%80%92%e5%bd%92">#</a>
</h3>
<p><strong>爆栈</strong></p>
<p>用递归做 $n + (n-1) + (n-2) &hellip; + 1$</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">sum</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> n <span style="color:#f92672">+</span> sum<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>在我的机器上  $n = 12000$ 时，爆栈了</p>
<pre><code>Exception in thread &quot;main&quot; java.lang.StackOverflowError
	at Test.sum(Test.java:10)
	at Test.sum(Test.java:10)
	at Test.sum(Test.java:10)
	at Test.sum(Test.java:10)
	at Test.sum(Test.java:10)
	...
</code></pre><p>为什么呢？</p>
<ul>
<li>每次方法调用是需要消耗一定的栈内存的，这些内存用来存储方法参数、方法内局部变量、返回地址等等</li>
<li>方法调用占用的内存需要等到<strong>方法结束时</strong>才会释放</li>
<li>而递归调用我们之前讲过，不到最深不会回头，最内层方法没完成之前，外层方法都结束不了
<ul>
<li>例如，$sum(3)$ 这个方法内有个需要执行 $3 + sum(2)$，$sum(2)$ 没返回前，加号前面的 $3$ 不能释放</li>
<li>看下面伪码</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">long</span> <span style="color:#a6e22e">sum</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> n <span style="color:#f92672">=</span> 3<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> 3 <span style="color:#f92672">+</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">sum</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> n <span style="color:#f92672">=</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 2 <span style="color:#f92672">+</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">sum</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> n <span style="color:#f92672">=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>尾调用</strong></p>
<p>如果函数的最后一步是调用一个函数，那么称为尾调用，例如</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">a</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">b</span>()
}
</code></pre></div><p>下面三段代码<strong>不能</strong>叫做尾调用</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">a</span>() {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">c</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">b</span>()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">c</span>
}
</code></pre></div><ul>
<li>因为最后一步并非调用函数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">a</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">b</span>() <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
}
</code></pre></div><ul>
<li>最后一步执行的是加法</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">a</span>(<span style="color:#a6e22e">x</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">b</span>() <span style="color:#f92672">+</span> <span style="color:#a6e22e">x</span>
}
</code></pre></div><ul>
<li>最后一步执行的是加法</li>
</ul>
<p><strong>一些语言</strong><sup id="fnref:10"><a href="#fn:10" class="footnote-ref" role="doc-noteref">10</a></sup>的编译器能够对尾调用做优化，例如</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">a</span>() {
    <span style="color:#75715e">// 做前面的事
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">b</span>() 
}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">b</span>() {
    <span style="color:#75715e">// 做前面的事
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">c</span>()
}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">c</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1000</span>
}

<span style="color:#a6e22e">a</span>()
</code></pre></div><p>没优化之前的<strong>伪码</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">a</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">b</span>() {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">c</span>() {
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1000</span>
        }
    }
}
</code></pre></div><p>优化后<strong>伪码</strong>如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">a</span>()
<span style="color:#a6e22e">b</span>()
<span style="color:#a6e22e">c</span>()
</code></pre></div><p>为何尾递归才能优化？</p>
<p>调用 a 时</p>
<ul>
<li>a 返回时发现：没什么可留给 b 的，将来返回的结果 b 提供就可以了，用不着我 a 了，我的内存就可以释放</li>
</ul>
<p>调用 b 时</p>
<ul>
<li>b 返回时发现：没什么可留给 c 的，将来返回的结果 c 提供就可以了，用不着我 b 了，我的内存就可以释放</li>
</ul>
<p>如果调用 a 时</p>
<ul>
<li>不是尾调用，例如 return b() + 1，那么 a 就不能提前结束，因为它还得利用 b 的结果做加法</li>
</ul>
<p><strong>尾递归</strong></p>
<p>尾递归是尾调用的一种特例，也就是最后一步执行的是同一个函数</p>
<p><strong>尾递归避免爆栈</strong></p>
<p>安装 Scala</p>
<p><img src="../imgs/image-20221111122709227.png" alt="image-20221111122709227" /></p>
<p>Scala 入门</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#66d9ef">object</span> <span style="color:#a6e22e">Main</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">def</span> main<span style="color:#f92672">(</span>args<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Array</span><span style="color:#f92672">[</span><span style="color:#66d9ef">String</span><span style="color:#f92672">])</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Unit</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    println<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Hello Scala&#34;</span><span style="color:#f92672">)</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>Scala 是 java 的近亲，java 中的类都可以拿来重用</li>
<li>类型是放在变量后面的</li>
<li>Unit 表示无返回值，类似于 void</li>
<li>不需要以分号作为结尾，当然加上也对</li>
</ul>
<p>还是先写一个会爆栈的函数</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>n<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> n <span style="color:#f92672">+</span> sum<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>Scala 最后一行代码若作为返回值，可以省略 return</li>
</ul>
<p>不出所料，在 $n = 11000$ 时，还是出了异常</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">println<span style="color:#f92672">(</span>sum<span style="color:#f92672">(</span><span style="color:#ae81ff">11000</span><span style="color:#f92672">))</span>

<span style="color:#a6e22e">Exception</span> in thread <span style="color:#e6db74">&#34;main&#34;</span> java<span style="color:#f92672">.</span>lang<span style="color:#f92672">.</span><span style="color:#a6e22e">StackOverflowError</span>
	at <span style="color:#a6e22e">Main</span>$<span style="color:#f92672">.</span>sum<span style="color:#f92672">(</span><span style="color:#a6e22e">Main</span><span style="color:#f92672">.</span>scala<span style="color:#66d9ef">:</span><span style="color:#960050;background-color:#1e0010">25</span><span style="color:#f92672">)</span>
	at <span style="color:#a6e22e">Main</span>$<span style="color:#f92672">.</span>sum<span style="color:#f92672">(</span><span style="color:#a6e22e">Main</span><span style="color:#f92672">.</span>scala<span style="color:#66d9ef">:</span><span style="color:#960050;background-color:#1e0010">25</span><span style="color:#f92672">)</span>
	at <span style="color:#a6e22e">Main</span>$<span style="color:#f92672">.</span>sum<span style="color:#f92672">(</span><span style="color:#a6e22e">Main</span><span style="color:#f92672">.</span>scala<span style="color:#66d9ef">:</span><span style="color:#960050;background-color:#1e0010">25</span><span style="color:#f92672">)</span>
	at <span style="color:#a6e22e">Main</span>$<span style="color:#f92672">.</span>sum<span style="color:#f92672">(</span><span style="color:#a6e22e">Main</span><span style="color:#f92672">.</span>scala<span style="color:#66d9ef">:</span><span style="color:#960050;background-color:#1e0010">25</span><span style="color:#f92672">)</span>
	<span style="color:#f92672">...</span>
</code></pre></div><p>这是因为以上代码，还不是尾调用，要想成为尾调用，那么：</p>
<ol>
<li>最后一行代码，必须是一次函数调用</li>
<li>内层函数必须<strong>摆脱</strong>与外层函数的关系，内层函数<strong>执行后</strong>不依赖于外层的变量或常量</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>n<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> n <span style="color:#f92672">+</span> sum<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>  <span style="color:#75715e">// 依赖于外层函数的 n 变量
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p>如何让它执行后就摆脱对 n 的依赖呢？</p>
<ul>
<li>不能等递归回来再做加法，那样就必须保留外层的 n</li>
<li>把 n 当做内层函数的一个参数传进去，这时 n 就属于内层函数了</li>
<li>传参时就完成累加, 不必等回来时累加</li>
</ul>
<pre><code>sum(n - 1, n + 累加器)
</code></pre><p>改写后代码如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#a6e22e">@tailrec</span>
<span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>n<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span><span style="color:#f92672">,</span> accumulator<span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> accumulator
    <span style="color:#f92672">}</span> 
    <span style="color:#66d9ef">return</span> sum<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">,</span> n <span style="color:#f92672">+</span> accumulator<span style="color:#f92672">)</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>accumulator 作为累加器</li>
<li>@tailrec 注解是 scala 提供的，用来检查方法是否符合尾递归</li>
<li>这回 sum(10000000, 0) 也没有问题，打印 50000005000000</li>
</ul>
<p>执行流程如下，以<strong>伪码</strong>表示 $sum(4, 0)$</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#75715e">// 首次调用
</span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>n <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">4</span><span style="color:#f92672">,</span> accumulator <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> sum<span style="color:#f92672">(</span><span style="color:#ae81ff">4</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">,</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">+</span> accumulator<span style="color:#f92672">)</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// 接下来调用内层 sum, 传参时就完成了累加, 不必等回来时累加，当内层 sum 调用后，外层 sum 空间没必要保留
</span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>n <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">3</span><span style="color:#f92672">,</span> accumulator <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">4</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> sum<span style="color:#f92672">(</span><span style="color:#ae81ff">3</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">,</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">+</span> accumulator<span style="color:#f92672">)</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// 继续调用内层 sum
</span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>n <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">,</span> accumulator <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">7</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> sum<span style="color:#f92672">(</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">,</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> accumulator<span style="color:#f92672">)</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// 继续调用内层 sum, 这是最后的 sum 调用完就返回最后结果 10, 前面所有其它 sum 的空间早已释放
</span><span style="color:#75715e"></span><span style="color:#66d9ef">def</span> sum<span style="color:#f92672">(</span>n <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">,</span> accumulator <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">9</span><span style="color:#f92672">)</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Long</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> accumulator
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>本质上，尾递归优化是将函数的<strong>递归</strong>调用，变成了函数的<strong>循环</strong>调用</p>
<p><strong>改循环避免爆栈</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">long</span> n <span style="color:#f92672">=</span> 100000000<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">long</span> sum <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> i <span style="color:#f92672">=</span> n<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> 1<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
        sum <span style="color:#f92672">+=</span> i<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>sum<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="递归时间复杂度-master-theorem14">
  递归时间复杂度-Master theorem<sup id="fnref:11"><a href="#fn:11" class="footnote-ref" role="doc-noteref">11</a></sup>
  <a class="anchor" href="#%e9%80%92%e5%bd%92%e6%97%b6%e9%97%b4%e5%a4%8d%e6%9d%82%e5%ba%a6-master-theorem14">#</a>
</h3>
<p>若有递归式
$$
T(n) = aT(\frac{n}{b}) + f(n)
$$
其中</p>
<ul>
<li>$T(n)$ 是问题的运行时间，$n$ 是数据规模</li>
<li>$a$ 是子问题个数</li>
<li>$T(\frac{n}{b})$ 是子问题运行时间，每个子问题被拆成原问题数据规模的 $\frac{n}{b}$</li>
<li>$f(n)$ 是除递归外执行的计算</li>
</ul>
<p>令 $x = \log_{b}{a}$，即 $x = \log_{子问题缩小倍数}{子问题个数}$</p>
<p>那么
$$
T(n) = 
\begin{cases}
\Theta(n^x) &amp; f(n) = O(n^c) 并且 c \lt x\<br>
\Theta(n^x\log{n}) &amp; f(n) = \Theta(n^x)\<br>
\Theta(n^c) &amp; f(n) = \Omega(n^c) 并且 c \gt x
\end{cases}
$$</p>
<p><strong>例1</strong></p>
<p>$T(n) = 2T(\frac{n}{2}) + n^4$</p>
<ul>
<li>此时 $x = 1 &lt; 4$，由后者决定整个时间复杂度 $\Theta(n^4)$</li>
<li>如果觉得对数不好算，可以换为求【$b$ 的几次方能等于 $a$】</li>
</ul>
<p><strong>例2</strong></p>
<p>$T(n) = T(\frac{7n}{10}) + n$</p>
<ul>
<li>$a=1, b=\frac{10}{7}, x=0, c=1$</li>
<li>此时 $x = 0 &lt; 1$，由后者决定整个时间复杂度 $\Theta(n)$</li>
</ul>
<p><strong>例3</strong></p>
<p>$T(n) = 16T(\frac{n}{4}) + n^2$</p>
<ul>
<li>$a=16, b=4, x=2, c=2$</li>
<li>此时 $x=2 = c$，时间复杂度 $\Theta(n^2 \log{n})$</li>
</ul>
<p><strong>例4</strong></p>
<p>$T(n)=7T(\frac{n}{3}) + n^2$</p>
<ul>
<li>$a=7, b=3, x=1.?, c=2$</li>
<li>此时 $x = \log_{3}{7} &lt; 2$，由后者决定整个时间复杂度 $\Theta(n^2)$</li>
</ul>
<p><strong>例5</strong></p>
<p>$T(n) = 7T(\frac{n}{2}) + n^2$</p>
<ul>
<li>$a=7, b=2, x=2.?, c=2$</li>
<li>此时 $x = log_2{7} &gt; 2$，由前者决定整个时间复杂度 $\Theta(n^{\log_2{7}})$</li>
</ul>
<p><strong>例6</strong></p>
<p>$T(n) = 2T(\frac{n}{4}) + \sqrt{n}$</p>
<ul>
<li>$a=2, b=4, x = 0.5, c=0.5$</li>
<li>此时 $x = 0.5 = c$，时间复杂度 $\Theta(\sqrt{n}\ \log{n})$</li>
</ul>
<p><strong>例7. 二分查找递归</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> f<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> target<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> f<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> target<span style="color:#f92672">,</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> m<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>子问题个数 $a = 1$</li>
<li>子问题数据规模缩小倍数 $b = 2$</li>
<li>除递归外执行的计算是常数级 $c=0$</li>
</ul>
<p>$T(n) = T(\frac{n}{2}) + n^0$</p>
<ul>
<li>此时 $x=0 = c$，时间复杂度 $\Theta(\log{n})$</li>
</ul>
<p><strong>例8. 归并排序递归</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">void split(B[], i, j, A[])
{
    <span style="color:#66d9ef">if</span> (j <span style="color:#f92672">-</span> i <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">1</span>)                    
        <span style="color:#66d9ef">return</span>;                                
    m <span style="color:#f92672">=</span> (i <span style="color:#f92672">+</span> j) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>;             
    
    <span style="color:#f92672">//</span> <span style="color:#960050;background-color:#1e0010">递归</span>
    split(A, i, m, B);  
    split(A, m, j, B); 
    
    <span style="color:#f92672">//</span> <span style="color:#960050;background-color:#1e0010">合并</span>
    merge(B, i, m, j, A);
}
</code></pre></div><ul>
<li>子问题个数 $a=2$</li>
<li>子问题数据规模缩小倍数 $b=2$</li>
<li>除递归外，主要时间花在合并上，它可以用 $f(n) = n$ 表示</li>
</ul>
<p>$T(n) = 2T(\frac{n}{2}) + n$</p>
<ul>
<li>此时 $x=1=c$，时间复杂度 $\Theta(n\log{n})$</li>
</ul>
<p><strong>例9. 快速排序递归</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">algorithm quicksort(A, lo, hi) <span style="color:#f92672">is</span> 
  <span style="color:#66d9ef">if</span> lo <span style="color:#f92672">&gt;=</span> hi <span style="color:#f92672">||</span> lo <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> then 
    <span style="color:#66d9ef">return</span>
  
  <span style="color:#f92672">//</span> <span style="color:#960050;background-color:#1e0010">分区</span>
  p :<span style="color:#f92672">=</span> partition(A, lo, hi) 
  
  <span style="color:#f92672">//</span> <span style="color:#960050;background-color:#1e0010">递归</span>
  quicksort(A, lo, p <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) 
  quicksort(A, p <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, hi) 
</code></pre></div><ul>
<li>子问题个数 $a=2$</li>
<li>子问题数据规模缩小倍数
<ul>
<li>如果分区分的好，$b=2$</li>
<li>如果分区没分好，例如分区1 的数据是 0，分区 2 的数据是 $n-1$</li>
</ul>
</li>
<li>除递归外，主要时间花在分区上，它可以用 $f(n) = n$ 表示</li>
</ul>
<p>情况1 - 分区分的好</p>
<p>$T(n) = 2T(\frac{n}{2}) + n$</p>
<ul>
<li>此时 $x=1=c$，时间复杂度 $\Theta(n\log{n})$</li>
</ul>
<p>情况2 - 分区没分好</p>
<p>$T(n) = T(n-1) + T(1) + n$</p>
<ul>
<li>此时不能用主定理求解</li>
</ul>
<h3 id="递归时间复杂度-展开求解">
  递归时间复杂度-展开求解
  <a class="anchor" href="#%e9%80%92%e5%bd%92%e6%97%b6%e9%97%b4%e5%a4%8d%e6%9d%82%e5%ba%a6-%e5%b1%95%e5%bc%80%e6%b1%82%e8%a7%a3">#</a>
</h3>
<p>像下面的递归式，都不能用主定理求解</p>
<p><strong>例1 - 递归求和</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">long</span> <span style="color:#a6e22e">sum</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> n <span style="color:#f92672">+</span> sum<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>$T(n) = T(n-1) + c$，$T(1) = c$</p>
<p>下面为展开过程</p>
<p>$T(n) = T(n-2) + c + c$</p>
<p>$T(n) = T(n-3) + c + c + c$</p>
<p>&hellip;</p>
<p>$T(n) = T(n-(n-1)) + (n-1)c$</p>
<ul>
<li>其中 $T(n-(n-1))$ 即 $T(1)$</li>
<li>带入求得 $T(n) = c + (n-1)c = nc$</li>
</ul>
<p>时间复杂度为 $O(n)$</p>
<p><strong>例2 - 递归冒泡排序</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">bubble</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>0 <span style="color:#f92672">==</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> high<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    bubble<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> high <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>$T(n) = T(n-1) + n$，$T(1) = c$</p>
<p>下面为展开过程</p>
<p>$T(n) = T(n-2) + (n-1) + n$</p>
<p>$T(n) = T(n-3) + (n-2) + (n-1) + n$</p>
<p>&hellip;</p>
<p>$T(n) = T(1) + 2 + &hellip; + n = T(1) + (n-1)\frac{2+n}{2} = c + \frac{n^2}{2} + \frac{n}{2} -1$</p>
<p>时间复杂度 $O(n^2)$</p>
<blockquote>
<p>注：</p>
<ul>
<li>等差数列求和为 $个数*\frac{\vert首项-末项\vert}{2}$</li>
</ul>
</blockquote>
<p><strong>例3 - 递归快排</strong></p>
<p>快速排序分区没分好的极端情况</p>
<p>$T(n) = T(n-1) + T(1) + n$，$T(1) = c$</p>
<p>$T(n) = T(n-1) + c + n$</p>
<p>下面为展开过程</p>
<p>$T(n) = T(n-2) + c + (n-1) + c + n$</p>
<p>$T(n) = T(n-3) + c + (n-2) + c + (n-1) + c + n$</p>
<p>&hellip;</p>
<p>$T(n) = T(n-(n-1)) + (n-1)c + 2+&hellip;+n = \frac{n^2}{2} + \frac{2cn+n}{2} -1$</p>
<p>时间复杂度 $O(n^2)$</p>
<p>不会推导的同学可以进入 <a href="https://www.wolframalpha.com/">https://www.wolframalpha.com/</a></p>
<ul>
<li>例1 输入 f(n) = f(n - 1) + c, f(1) = c</li>
<li>例2 输入 f(n) = f(n - 1) + n, f(1) = c</li>
<li>例3 输入 f(n) = f(n - 1) + n + c, f(1) = c</li>
</ul>
<h2 id="24-队列">
  2.4 队列
  <a class="anchor" href="#24-%e9%98%9f%e5%88%97">#</a>
</h2>
<h3 id="概述-3">
  概述
  <a class="anchor" href="#%e6%a6%82%e8%bf%b0-3">#</a>
</h3>
<p>计算机科学中，queue 是以顺序的方式维护的一组数据集合，在一端添加数据，从另一端移除数据。习惯来说，添加的一端称为<strong>尾</strong>，移除的一端称为<strong>头</strong>，就如同生活中的排队买商品</p>
<blockquote>
<p>In computer science, a <strong>queue</strong> is a collection of entities that are maintained in a sequence and can be modified by  the addition of entities at one end of the sequence and the removal of  entities from the other end of the sequence</p>
</blockquote>
<p>先定义一个简化的队列接口</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Queue</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 向队列尾插入值
</span><span style="color:#75715e">     * @param value 待插入值
</span><span style="color:#75715e">     * @return 插入成功返回 true, 插入失败返回 false
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">);</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 从对列头获取值, 并移除
</span><span style="color:#75715e">     * @return 如果队列非空返回对头值, 否则返回 null
</span><span style="color:#75715e">     */</span>
    E <span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 从对列头获取值, 不移除
</span><span style="color:#75715e">     * @return 如果队列非空返回对头值, 否则返回 null
</span><span style="color:#75715e">     */</span>
    E <span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 检查队列是否为空
</span><span style="color:#75715e">     * @return 空返回 true, 否则返回 false
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">();</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 检查队列是否已满
</span><span style="color:#75715e">     * @return 满返回 true, 否则返回 false
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="链表实现">
  链表实现
  <a class="anchor" href="#%e9%93%be%e8%a1%a8%e5%ae%9e%e7%8e%b0">#</a>
</h3>
<p>下面以<strong>单向环形带哨兵</strong>链表方式来实现队列</p>
<p><img src="../imgs/image-20221230150105089.png" alt="image-20221230150105089" /></p>
<p><img src="../imgs/image-20221230150141318.png" alt="image-20221230150141318" /></p>
<p><img src="../imgs/image-20221230150153271.png" alt="image-20221230150153271" /></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LinkedListQueue</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span>
        <span style="color:#66d9ef">implements</span> Queue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;,</span> Iterable<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
        E value<span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> next<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">,</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> next<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> head <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;&gt;(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">private</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> tail <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> capacity <span style="color:#f92672">=</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">MAX_VALUE</span><span style="color:#f92672">;</span>

    <span style="color:#f92672">{</span>
        tail<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">LinkedListQueue</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">LinkedListQueue</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">capacity</span> <span style="color:#f92672">=</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> added <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;&gt;(</span>value<span style="color:#f92672">,</span> head<span style="color:#f92672">);</span>
        tail<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
        tail <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
        size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> first <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> first<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>first <span style="color:#f92672">==</span> tail<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            tail <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        size<span style="color:#f92672">--;</span>
        <span style="color:#66d9ef">return</span> first<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head <span style="color:#f92672">==</span> tail<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> p <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">!=</span> head<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                E value <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="环形数组实现">
  环形数组实现
  <a class="anchor" href="#%e7%8e%af%e5%bd%a2%e6%95%b0%e7%bb%84%e5%ae%9e%e7%8e%b0">#</a>
</h3>
<p><strong>好处</strong></p>
<ol>
<li>对比普通数组，起点和终点更为自由，不用考虑数据移动</li>
<li>“环”意味着不会存在【越界】问题</li>
<li>数组性能更佳</li>
<li>环形数组比较适合实现有界队列、RingBuffer 等</li>
</ol>
<p><img src="../imgs/image-20221228175413998.png" alt="image-20221228175413998" /></p>
<p><strong>下标计算</strong></p>
<p>例如，数组长度是 5，当前位置是 3 ，向前走 2 步，此时下标为 $(3 + 2)%5 = 0$</p>
<p><img src="../imgs/image-20221228180357257.png" alt="image-20221228180357257" /></p>
<p>$$
(cur + step) % length
$$</p>
<ul>
<li>cur 当前指针位置</li>
<li>step 前进步数</li>
<li>length 数组长度</li>
</ul>
<blockquote>
<p>注意：</p>
<ul>
<li>如果 step = 1，也就是一次走一步，可以在 &gt;= length 时重置为 0 即可</li>
</ul>
</blockquote>
<p><strong>判断空</strong></p>
<p><img src="../imgs/image-20221231081009018.png" alt="image-20221231081009018" /></p>
<p><strong>判断满</strong></p>
<p><img src="../imgs/image-20221231080909475.png" alt="image-20221231080909475" /></p>
<p>满之后的策略可以根据业务需求决定</p>
<ul>
<li>例如我们要实现的环形队列，满之后就拒绝入队</li>
</ul>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayQueue</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Queue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;,</span> Iterable<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> E<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> length<span style="color:#f92672">;</span>

    <span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;all&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayQueue</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        length <span style="color:#f92672">=</span> capacity <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        array <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>length<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        tail <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>tail <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">%</span> length<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        E value <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span>
        head <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">%</span> length<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> tail <span style="color:#f92672">==</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>tail <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">%</span> length <span style="color:#f92672">==</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">!=</span> tail<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                E value <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>p<span style="color:#f92672">];</span>
                p <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">%</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>判断空、满方法2</strong></p>
<p>引入 size</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayQueue2</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Queue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;,</span> Iterable<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> E<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

    <span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;all&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayQueue2</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">capacity</span> <span style="color:#f92672">=</span> capacity<span style="color:#f92672">;</span>
        array <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        tail <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>tail <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">%</span> capacity<span style="color:#f92672">;</span>
        size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        E value <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span>
        head <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">%</span> capacity<span style="color:#f92672">;</span>
        size<span style="color:#f92672">--;</span>
        <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">!=</span> tail<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                E value <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>p<span style="color:#f92672">];</span>
                p <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">%</span> capacity<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>判断空、满方法3</strong></p>
<ul>
<li>
<p>head 和 tail 不断递增，用到索引时，再用它们进行计算，两个问题</p>
<ul>
<li>
<p>如何保证 head 和 tail 自增超过正整数最大值的正确性</p>
</li>
<li>
<p>如何让取模运算性能更高</p>
</li>
</ul>
</li>
<li>
<p>答案：让 capacity 为 2 的幂</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayQueue3</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Queue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;,</span> Iterable<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> E<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">;</span>

    <span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;all&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayQueue3</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">((</span>capacity <span style="color:#f92672">&amp;</span> capacity <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;capacity 必须为 2 的幂&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">capacity</span> <span style="color:#f92672">=</span> capacity<span style="color:#f92672">;</span>
        array <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">capacity</span><span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>tail <span style="color:#f92672">&amp;</span> capacity <span style="color:#f92672">-</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        tail<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        E value <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>head <span style="color:#f92672">&amp;</span> capacity <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
        head<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>head <span style="color:#f92672">&amp;</span> capacity <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> tail <span style="color:#f92672">-</span> head <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> tail <span style="color:#f92672">-</span> head <span style="color:#f92672">==</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">!=</span> tail<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                E value <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>p <span style="color:#f92672">&amp;</span> capacity <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
                p<span style="color:#f92672">++;</span>
                <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="25-栈">
  2.5 栈
  <a class="anchor" href="#25-%e6%a0%88">#</a>
</h2>
<h3 id="概述-4">
  概述
  <a class="anchor" href="#%e6%a6%82%e8%bf%b0-4">#</a>
</h3>
<p>计算机科学中，<strong>stack</strong> 是一种线性的数据结构，只能在其一端添加数据和移除数据。习惯来说，这一端称之为<strong>栈顶</strong>，另一端不能操作数据的称之为<strong>栈底</strong>，就如同生活中的一摞书</p>
<p>先提供一个栈接口</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Stack</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 向栈顶压入元素
</span><span style="color:#75715e">     * @param value 待压入值
</span><span style="color:#75715e">     * @return 压入成功返回 true, 否则返回 false
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">);</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 从栈顶弹出元素
</span><span style="color:#75715e">     * @return 栈非空返回栈顶元素, 栈为空返回 null
</span><span style="color:#75715e">     */</span>
    E <span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 返回栈顶元素, 不弹出
</span><span style="color:#75715e">     * @return 栈非空返回栈顶元素, 栈为空返回 null
</span><span style="color:#75715e">     */</span>
    E <span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 判断栈是否为空
</span><span style="color:#75715e">     * @return 空返回 true, 否则返回 false
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">();</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 判断栈是否已满
</span><span style="color:#75715e">     * @return 满返回 true, 否则返回 false
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="链表实现-1">
  链表实现
  <a class="anchor" href="#%e9%93%be%e8%a1%a8%e5%ae%9e%e7%8e%b0-1">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LinkedListStack</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Stack<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;,</span> Iterable<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> head <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;&gt;(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">LinkedListStack</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">capacity</span> <span style="color:#f92672">=</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;&gt;(</span>value<span style="color:#f92672">,</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
        size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> first <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> first<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        size<span style="color:#f92672">--;</span>
        <span style="color:#66d9ef">return</span> first<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> p <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                E value <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
        E value<span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> next<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">,</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> next<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="数组实现">
  数组实现
  <a class="anchor" href="#%e6%95%b0%e7%bb%84%e5%ae%9e%e7%8e%b0">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayStack</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Stack<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;,</span> Iterable<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> E<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> top <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

    <span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;all&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayStack</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">array</span> <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>top<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[--</span>top<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>top<span style="color:#f92672">-</span>1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> top <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> top <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> top<span style="color:#f92672">;</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[--</span>p<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="应用">
  应用
  <a class="anchor" href="#%e5%ba%94%e7%94%a8">#</a>
</h3>
<p>模拟如下方法调用</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;main1&#34;</span><span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;main2&#34;</span><span style="color:#f92672">);</span>
    method1<span style="color:#f92672">();</span>
    method2<span style="color:#f92672">();</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;main3&#34;</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method1</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;method1&#34;</span><span style="color:#f92672">);</span>
    method3<span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method2</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;method2&#34;</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method3</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;method3&#34;</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>模拟代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CPU</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Frame</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> exit<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Frame</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> exit<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">exit</span> <span style="color:#f92672">=</span> exit<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> pc <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> <span style="color:#75715e">// 模拟程序计数器 Program counter
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> ArrayStack<span style="color:#f92672">&lt;</span>Frame<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayStack<span style="color:#f92672">&lt;&gt;(</span>100<span style="color:#f92672">);</span> <span style="color:#75715e">// 模拟方法调用栈
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Frame<span style="color:#f92672">(-</span>1<span style="color:#f92672">));</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>pc<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">case</span> 1 <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;main1&#34;</span><span style="color:#f92672">);</span>
                    pc<span style="color:#f92672">++;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> 2 <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;main2&#34;</span><span style="color:#f92672">);</span>
                    pc<span style="color:#f92672">++;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> 3 <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Frame<span style="color:#f92672">(</span>pc <span style="color:#f92672">+</span> 1<span style="color:#f92672">));</span>
                    pc <span style="color:#f92672">=</span> 100<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> 4 <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Frame<span style="color:#f92672">(</span>pc <span style="color:#f92672">+</span> 1<span style="color:#f92672">));</span>
                    pc <span style="color:#f92672">=</span> 200<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> 5 <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;main3&#34;</span><span style="color:#f92672">);</span>
                    pc <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">().</span><span style="color:#a6e22e">exit</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> 100 <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;method1&#34;</span><span style="color:#f92672">);</span>
                    stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Frame<span style="color:#f92672">(</span>pc <span style="color:#f92672">+</span> 1<span style="color:#f92672">));</span>
                    pc <span style="color:#f92672">=</span> 300<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> 101 <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    pc <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">().</span><span style="color:#a6e22e">exit</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> 200 <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;method2&#34;</span><span style="color:#f92672">);</span>
                    pc <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">().</span><span style="color:#a6e22e">exit</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> 300 <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;method3&#34;</span><span style="color:#f92672">);</span>
                    pc <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">().</span><span style="color:#a6e22e">exit</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="26-双端队列">
  2.6 双端队列
  <a class="anchor" href="#26-%e5%8f%8c%e7%ab%af%e9%98%9f%e5%88%97">#</a>
</h2>
<h3 id="概述-5">
  概述
  <a class="anchor" href="#%e6%a6%82%e8%bf%b0-5">#</a>
</h3>
<p>双端队列、队列、栈对比</p>
<table>
<thead>
<tr>
<th></th>
<th>定义</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>队列</td>
<td>一端删除（头）另一端添加（尾）</td>
<td>First In First Out</td>
</tr>
<tr>
<td>栈</td>
<td>一端删除和添加（顶）</td>
<td>Last In First Out</td>
</tr>
<tr>
<td>双端队列</td>
<td>两端都可以删除、添加</td>
<td></td>
</tr>
<tr>
<td>优先级队列</td>
<td></td>
<td>优先级高者先出队</td>
</tr>
<tr>
<td>延时队列</td>
<td></td>
<td>根据延时时间确定优先级</td>
</tr>
<tr>
<td>并发非阻塞队列</td>
<td>队列空或满时不阻塞</td>
<td></td>
</tr>
<tr>
<td>并发阻塞队列</td>
<td>队列空时删除阻塞、队列满时添加阻塞</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>注1：</p>
<ul>
<li>Java 中 LinkedList 即为典型双端队列实现，不过它同时实现了 Queue 接口，也提供了栈的 push pop 等方法</li>
</ul>
<p>注2：</p>
<ul>
<li>
<p>不同语言，操作双端队列的方法命名有所不同，参见下表</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>Java</th>
<th>JavaScript</th>
<th>C++</th>
<th>leetCode 641</th>
</tr>
</thead>
<tbody>
<tr>
<td>尾部插入</td>
<td>offerLast</td>
<td>push</td>
<td>push_back</td>
<td>insertLast</td>
</tr>
<tr>
<td>头部插入</td>
<td>offerFirst</td>
<td>unshift</td>
<td>push_front</td>
<td>insertFront</td>
</tr>
<tr>
<td>尾部移除</td>
<td>pollLast</td>
<td>pop</td>
<td>pop_back</td>
<td>deleteLast</td>
</tr>
<tr>
<td>头部移除</td>
<td>pollFirst</td>
<td>shift</td>
<td>pop_front</td>
<td>deleteFront</td>
</tr>
<tr>
<td>尾部获取</td>
<td>peekLast</td>
<td>at(-1)</td>
<td>back</td>
<td>getRear</td>
</tr>
<tr>
<td>头部获取</td>
<td>peekFirst</td>
<td>at(0)</td>
<td>front</td>
<td>getFront</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>吐槽一下 leetCode 命名比较 low</p>
</li>
<li>
<p>常见的单词还有 enqueue 入队、dequeue 出队</p>
</li>
</ul>
</blockquote>
<p><strong>接口定义</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Deque</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offerFirst</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">);</span>

    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offerLast</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">);</span>

    E <span style="color:#a6e22e">pollFirst</span><span style="color:#f92672">();</span>

    E <span style="color:#a6e22e">pollLast</span><span style="color:#f92672">();</span>

    E <span style="color:#a6e22e">peekFirst</span><span style="color:#f92672">();</span>

    E <span style="color:#a6e22e">peekLast</span><span style="color:#f92672">();</span>
    
    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">();</span>

    <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="链表实现-2">
  链表实现
  <a class="anchor" href="#%e9%93%be%e8%a1%a8%e5%ae%9e%e7%8e%b0-2">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 基于环形链表的双端队列
</span><span style="color:#75715e"> * @param &lt;E&gt; 元素类型
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LinkedListDeque</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Deque<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;,</span> Iterable<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offerFirst</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        size<span style="color:#f92672">++;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> a <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> b <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> offered <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;&gt;(</span>a<span style="color:#f92672">,</span> e<span style="color:#f92672">,</span> b<span style="color:#f92672">);</span>
        a<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> offered<span style="color:#f92672">;</span>
        b<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> offered<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offerLast</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        size<span style="color:#f92672">++;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> a <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> b <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> offered <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;&gt;(</span>a<span style="color:#f92672">,</span> e<span style="color:#f92672">,</span> b<span style="color:#f92672">);</span>
        a<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> offered<span style="color:#f92672">;</span>
        b<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> offered<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">pollFirst</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> a <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> polled <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> b <span style="color:#f92672">=</span> polled<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        a<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> b<span style="color:#f92672">;</span>
        b<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">;</span>
        size<span style="color:#f92672">--;</span>
        <span style="color:#66d9ef">return</span> polled<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">pollLast</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> polled <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> a <span style="color:#f92672">=</span> polled<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> b <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        a<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> b<span style="color:#f92672">;</span>
        b<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">;</span>
        size<span style="color:#f92672">--;</span>
        <span style="color:#66d9ef">return</span> polled<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peekFirst</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peekLast</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> p <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">!=</span> sentinel<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                E value <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> prev<span style="color:#f92672">;</span>
        E value<span style="color:#f92672">;</span>
        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> next<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span>Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> prev<span style="color:#f92672">,</span> E value<span style="color:#f92672">,</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> next<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> prev<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> sentinel <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;&gt;(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">LinkedListDeque</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">capacity</span> <span style="color:#f92672">=</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="数组实现-1">
  数组实现
  <a class="anchor" href="#%e6%95%b0%e7%bb%84%e5%ae%9e%e7%8e%b0-1">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 基于循环数组实现, 特点
</span><span style="color:#75715e"> * &lt;ul&gt;
</span><span style="color:#75715e"> *     &lt;li&gt;tail 停下来的位置不存储, 会浪费一个位置&lt;/li&gt;
</span><span style="color:#75715e"> * &lt;/ul&gt;
</span><span style="color:#75715e"> * @param &lt;E&gt;
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayDeque1</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Deque<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;,</span> Iterable<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/*
</span><span style="color:#75715e">                    h
</span><span style="color:#75715e">            t
</span><span style="color:#75715e">        0   1   2   3
</span><span style="color:#75715e">        b           a
</span><span style="color:#75715e">     */</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offerFirst</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        head <span style="color:#f92672">=</span> dec<span style="color:#f92672">(</span>head<span style="color:#f92672">,</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
        array<span style="color:#f92672">[</span>head<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offerLast</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
        tail <span style="color:#f92672">=</span> inc<span style="color:#f92672">(</span>tail<span style="color:#f92672">,</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">pollFirst</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        E e <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>head<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        head <span style="color:#f92672">=</span> inc<span style="color:#f92672">(</span>head<span style="color:#f92672">,</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">pollLast</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        tail <span style="color:#f92672">=</span> dec<span style="color:#f92672">(</span>tail<span style="color:#f92672">,</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
        E e <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>tail<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peekFirst</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peekLast</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>dec<span style="color:#f92672">(</span>tail<span style="color:#f92672">,</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head <span style="color:#f92672">==</span> tail<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>tail <span style="color:#f92672">&gt;</span> head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> tail <span style="color:#f92672">-</span> head <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>tail <span style="color:#f92672">&lt;</span> head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> head <span style="color:#f92672">-</span> tail <span style="color:#f92672">==</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">iterator</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Iterator<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasNext</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> p <span style="color:#f92672">!=</span> tail<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">next</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                E e <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>p<span style="color:#f92672">];</span>
                p <span style="color:#f92672">=</span> inc<span style="color:#f92672">(</span>p<span style="color:#f92672">,</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
                <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>

    E<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> head<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> tail<span style="color:#f92672">;</span>

    <span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;unchecked&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayDeque1</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>capacity <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">inc</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> length<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 1 <span style="color:#f92672">&gt;=</span> length<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">dec</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> length<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">-</span> 1 <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> length <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> i <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>数组实现中，如果存储的是基本类型，那么无需考虑内存释放，例如</p>
<p><img src="../imgs/image-20230110084245095.png" alt="image-20230110084245095" /></p>
<p>但如果存储的是引用类型，应当设置该位置的引用为 null，以便内存及时释放</p>
<p><img src="../imgs/image-20230110084632543.png" alt="image-20230110084632543" /></p>
<h2 id="27-优先级队列">
  2.7 优先级队列
  <a class="anchor" href="#27-%e4%bc%98%e5%85%88%e7%ba%a7%e9%98%9f%e5%88%97">#</a>
</h2>
<h3 id="无序数组实现">
  无序数组实现
  <a class="anchor" href="#%e6%97%a0%e5%ba%8f%e6%95%b0%e7%bb%84%e5%ae%9e%e7%8e%b0">#</a>
</h3>
<p><strong>要点</strong></p>
<ol>
<li>入队保持顺序</li>
<li>出队前找到优先级最高的出队，相当于一次选择排序</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PriorityQueue1</span><span style="color:#f92672">&lt;</span>E <span style="color:#66d9ef">extends</span> Priority<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Queue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    Priority<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PriorityQueue1</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Priority<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span> <span style="color:#75715e">// O(1)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>size<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 返回优先级最高的索引值
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">selectMax</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>i<span style="color:#f92672">].</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>max<span style="color:#f92672">].</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                max <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> max<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span> <span style="color:#75715e">// O(n)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> selectMax<span style="color:#f92672">();</span>
        E e <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">)</span> array<span style="color:#f92672">[</span>max<span style="color:#f92672">];</span>
        remove<span style="color:#f92672">(</span>max<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span>
                    array<span style="color:#f92672">,</span> index<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1 <span style="color:#f92672">-</span> index<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[--</span>size<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#75715e">// help GC
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> selectMax<span style="color:#f92672">();</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">)</span> array<span style="color:#f92672">[</span>max<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>视频中忘记了 help GC，注意一下</li>
</ul>
<h3 id="有序数组实现">
  有序数组实现
  <a class="anchor" href="#%e6%9c%89%e5%ba%8f%e6%95%b0%e7%bb%84%e5%ae%9e%e7%8e%b0">#</a>
</h3>
<p><strong>要点</strong></p>
<ol>
<li>入队后排好序，优先级最高的排列在尾部</li>
<li>出队只需删除尾部元素即可</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PriorityQueue2</span><span style="color:#f92672">&lt;</span>E <span style="color:#66d9ef">extends</span> Priority<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Queue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    Priority<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PriorityQueue2</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Priority<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// O(n)
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        insert<span style="color:#f92672">(</span>e<span style="color:#f92672">);</span>
        size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 一轮插入排序
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;=</span> 0 <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>i<span style="color:#f92672">].</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> e<span style="color:#f92672">.</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            array<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            i<span style="color:#f92672">--;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// O(1)
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        E e <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">)</span> array<span style="color:#f92672">[</span>size <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[--</span>size<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#75715e">// help GC
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">)</span> array<span style="color:#f92672">[</span>size <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="堆实现">
  堆实现
  <a class="anchor" href="#%e5%a0%86%e5%ae%9e%e7%8e%b0">#</a>
</h3>
<p>计算机科学中，堆是一种基于树的数据结构，通常用<strong>完全二叉树</strong>实现。堆的特性如下</p>
<ul>
<li>在大顶堆中，任意节点 C 与它的父节点 P 符合 $P.value \geq C.value$</li>
<li>而小顶堆中，任意节点 C 与它的父节点 P 符合 $P.value \leq C.value$</li>
<li>最顶层的节点（没有父亲）称之为 root 根节点</li>
</ul>
<blockquote>
<p>In computer science, a <strong>heap</strong> is a specialized tree-based data structure which is essentially an almost complete tree that satisfies the <strong>heap property</strong>: in a <em>max heap</em>, for any given node C, if P is a parent node of C, then the <em>key</em> (the <em>value</em>) of P is greater than or equal to the key of C. In a <em>min heap</em>, the key of P is less than or equal to the key of C. The node at the &ldquo;top&rdquo; of the heap (with no parents) is called the <strong>root</strong> node</p>
</blockquote>
<p>例1 - 满二叉树（Full Binary Tree）特点：每一层都是填满的</p>
<p><img src="../imgs/image-20230112171444699.png" alt="image-20230112171444699" /></p>
<p>例2 - 完全二叉树（Complete Binary Tree）特点：最后一层可能未填满，靠左对齐</p>
<p><img src="../imgs/image-20230112171917135.png" alt="image-20230112171917135" /></p>
<p>例3 - 大顶堆</p>
<p><img src="../imgs/image-20230112170242265.png" alt="image-20230112170242265" /></p>
<p>例4 - 小顶堆</p>
<p><img src="../imgs/image-20230112171236067.png" alt="image-20230112171236067" /></p>
<p>完全二叉树可以使用数组来表示</p>
<p><img src="../imgs/image-20230112174351649.png" alt="image-20230112174351649" /></p>
<p>特征</p>
<ul>
<li>如果从索引 0 开始存储节点数据
<ul>
<li>节点 $i$ 的父节点为 $floor((i-1)/2)$，当 $i&gt;0$ 时</li>
<li>节点 $i$ 的左子节点为 $2i+1$，右子节点为 $2i+2$，当然它们得 $&lt; size$</li>
</ul>
</li>
<li>如果从索引 1 开始存储节点数据
<ul>
<li>节点 $i$ 的父节点为 $floor(i/2)$，当 $i &gt; 1$ 时</li>
<li>节点 $i$ 的左子节点为 $2i$，右子节点为 $2i+1$，同样得 $&lt; size$</li>
</ul>
</li>
</ul>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PriorityQueue4</span><span style="color:#f92672">&lt;</span>E <span style="color:#66d9ef">extends</span> Priority<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> Queue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    Priority<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PriorityQueue4</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Priority<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E offered<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> child <span style="color:#f92672">=</span> size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">int</span> parent <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> 2<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">&gt;</span> 0 <span style="color:#f92672">&amp;&amp;</span> offered<span style="color:#f92672">.</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">].</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">];</span>
            child <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
            parent <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> 2<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> offered<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>


    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Priority t <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        swap<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        size<span style="color:#f92672">--;</span>
        Priority e <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>size<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>size<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        
        shiftDown<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>        
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">)</span> e<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">shiftDown</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> left <span style="color:#f92672">=</span> 2 <span style="color:#f92672">*</span> parent <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> right <span style="color:#f92672">=</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>left<span style="color:#f92672">].</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>max<span style="color:#f92672">].</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>right <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>right<span style="color:#f92672">].</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>max<span style="color:#f92672">].</span><span style="color:#a6e22e">priority</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">!=</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            swap<span style="color:#f92672">(</span>max<span style="color:#f92672">,</span> parent<span style="color:#f92672">);</span>
            shiftDown<span style="color:#f92672">(</span>max<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">)</span> array<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="28-阻塞队列">
  2.8 阻塞队列
  <a class="anchor" href="#28-%e9%98%bb%e5%a1%9e%e9%98%9f%e5%88%97">#</a>
</h2>
<p>之前的队列在很多场景下都不能很好地工作，例如</p>
<ol>
<li>大部分场景要求分离向队列放入（生产者）、从队列拿出（消费者）两个角色、它们得由不同的线程来担当，而之前的实现根本没有考虑线程安全问题</li>
<li>队列为空，那么在之前的实现里会返回 null，如果就是硬要拿到一个元素呢？只能不断循环尝试</li>
<li>队列为满，那么再之前的实现里会返回 false，如果就是硬要塞入一个元素呢？只能不断循环尝试</li>
</ol>
<p>因此我们需要解决的问题有</p>
<ol>
<li>用锁保证线程安全</li>
<li>用条件变量让<strong>等待非空线程</strong>与<strong>等待不满线程</strong>进入<strong>等待</strong>状态，而不是不断循环尝试，让 CPU 空转</li>
</ol>
<p>有同学对线程安全还没有足够的认识，下面举一个反例，两个线程都要执行入队操作（几乎在同一时刻）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestThreadUnsafe</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> String<span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[</span>10<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>String e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
        tail<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>array<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        TestThreadUnsafe queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TestThreadUnsafe<span style="color:#f92672">();</span>
        <span style="color:#66d9ef">new</span> Thread<span style="color:#f92672">(()-&gt;</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;e1&#34;</span><span style="color:#f92672">),</span> <span style="color:#e6db74">&#34;t1&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">start</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">new</span> Thread<span style="color:#f92672">(()-&gt;</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;e2&#34;</span><span style="color:#f92672">),</span> <span style="color:#e6db74">&#34;t2&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">start</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>执行的时间序列如下，假设初始状态 tail = 0，在执行过程中由于 CPU 在两个线程之间切换，造成了指令交错</p>
<table>
<thead>
<tr>
<th>线程1</th>
<th>线程2</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>array[tail]=e1</td>
<td></td>
<td>线程1 向 tail 位置加入 e1 这个元素，但还没来得及执行  tail++</td>
</tr>
<tr>
<td></td>
<td>array[tail]=e2</td>
<td>线程2 向 tail 位置加入 e2 这个元素，覆盖掉了 e1</td>
</tr>
<tr>
<td></td>
<td>tail++</td>
<td>tail 自增为1</td>
</tr>
<tr>
<td>tail++</td>
<td></td>
<td>tail 自增为2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>最后状态 tail 为 2，数组为 [e2, null, null &hellip;]</td>
</tr>
</tbody>
</table>
<p>糟糕的是，由于指令交错的顺序不同，得到的结果不止以上一种，宏观上造成混乱的效果</p>
<h3 id="单锁实现">
  单锁实现
  <a class="anchor" href="#%e5%8d%95%e9%94%81%e5%ae%9e%e7%8e%b0">#</a>
</h3>
<p>Java 中要防止代码段交错执行，需要使用锁，有两种选择</p>
<ul>
<li>synchronized 代码块，属于关键字级别提供锁保护，功能少</li>
<li>ReentrantLock 类，功能丰富</li>
</ul>
<p>以 ReentrantLock 为例</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ReentrantLock lock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>String e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    lock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
        tail<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
        lock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>只要两个线程执行上段代码时，锁对象是同一个，就能保证 try 块内的代码的执行不会出现指令交错现象，即执行顺序只可能是下面两种情况之一</p>
<table>
<thead>
<tr>
<th>线程1</th>
<th>线程2</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>lock.lockInterruptibly()</td>
<td></td>
<td>t1对锁对象上锁</td>
</tr>
<tr>
<td>array[tail]=e1</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>lock.lockInterruptibly()</td>
<td>即使 CPU 切换到线程2，但由于t1已经对该对象上锁，因此线程2卡在这儿进不去</td>
</tr>
<tr>
<td>tail++</td>
<td></td>
<td>切换回线程1 执行后续代码</td>
</tr>
<tr>
<td>lock.unlock()</td>
<td></td>
<td>线程1 解锁</td>
</tr>
<tr>
<td></td>
<td>array[tail]=e2</td>
<td>线程2 此时才能获得锁，执行它的代码</td>
</tr>
<tr>
<td></td>
<td>tail++</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>另一种情况是线程2 先获得锁，线程1 被挡在外面</li>
<li>要明白<strong>保护的本质</strong>，本例中是保护的是 tail 位置读写的安全</li>
</ul>
<p>事情还没有完，上面的例子是队列还没有放满的情况，考虑下面的代码（这回锁同时保护了 tail 和 size 的读写安全）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ReentrantLock lock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>
<span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>String e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    lock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 满了怎么办?
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
        tail<span style="color:#f92672">++;</span>
        
        size<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
        lock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>之前是返回 false 表示添加失败，前面分析过想达到这么一种效果：</p>
<ul>
<li>在队列满时，不是立刻返回，而是当前线程进入等待</li>
<li>什么时候队列不满了，再唤醒这个等待的线程，从上次的代码处继续向下运行</li>
</ul>
<p>ReentrantLock 可以配合条件变量来实现，代码进化为</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ReentrantLock lock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>
Condition tailWaits <span style="color:#f92672">=</span> lock<span style="color:#f92672">.</span><span style="color:#a6e22e">newCondition</span><span style="color:#f92672">();</span> <span style="color:#75715e">// 条件变量
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>String e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    lock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">await</span><span style="color:#f92672">();</span>	<span style="color:#75715e">// 当队列满时, 当前线程进入 tailWaits 等待
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
        tail<span style="color:#f92672">++;</span>
        
        size<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
        lock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>条件变量底层也是个队列，用来存储这些需要等待的线程，当队列满了，就会将 offer 线程加入条件队列，并暂时释放锁</li>
<li>将来我们的队列如果不满了（由 poll 线程那边得知）可以调用 tailWaits.signal() 来唤醒 tailWaits 中首个等待的线程，被唤醒的线程会再次抢到锁，从上次 await 处继续向下运行</li>
</ul>
<p>思考为何要用 while 而不是 if，设队列容量是 3</p>
<table>
<thead>
<tr>
<th>操作前</th>
<th>offer(4)</th>
<th>offer(5)</th>
<th>poll()</th>
<th>操作后</th>
</tr>
</thead>
<tbody>
<tr>
<td>[1 2 3]</td>
<td>队列满，进入tailWaits 等待</td>
<td></td>
<td></td>
<td>[1 2 3]</td>
</tr>
<tr>
<td>[1 2 3]</td>
<td></td>
<td></td>
<td>取走 1，队列不满，唤醒线程</td>
<td>[2 3]</td>
</tr>
<tr>
<td>[2 3]</td>
<td></td>
<td>抢先获得锁，发现不满，放入 5</td>
<td></td>
<td>[2 3 5]</td>
</tr>
<tr>
<td>[2 3 5]</td>
<td>从上次等待处直接向下执行</td>
<td></td>
<td></td>
<td>[2 3 5 ?]</td>
</tr>
</tbody>
</table>
<p>关键点：</p>
<ul>
<li>从 tailWaits 中唤醒的线程，会与新来的 offer 的线程争抢锁，谁能抢到是不一定的，如果后者先抢到，就会导致条件又发生变化</li>
<li>这种情况称之为<strong>虚假唤醒</strong>，唤醒后应该重新检查条件，看是不是得重新进入等待</li>
</ul>
<p>最后的实现代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 单锁实现
</span><span style="color:#75715e"> * @param &lt;E&gt; 元素类型
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BlockingQueue1</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> BlockingQueue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> E<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> <span style="color:#75715e">// 元素个数
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;all&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BlockingQueue1</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    ReentrantLock lock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>
    Condition tailWaits <span style="color:#f92672">=</span> lock<span style="color:#f92672">.</span><span style="color:#a6e22e">newCondition</span><span style="color:#f92672">();</span>
    Condition headWaits <span style="color:#f92672">=</span> lock<span style="color:#f92672">.</span><span style="color:#a6e22e">newCondition</span><span style="color:#f92672">();</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
        lock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">await</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(++</span>tail <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            size<span style="color:#f92672">++;</span>
            headWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">signal</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            lock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">,</span> <span style="color:#66d9ef">long</span> timeout<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
        lock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">long</span> t <span style="color:#f92672">=</span> TimeUnit<span style="color:#f92672">.</span><span style="color:#a6e22e">MILLISECONDS</span><span style="color:#f92672">.</span><span style="color:#a6e22e">toNanos</span><span style="color:#f92672">(</span>timeout<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>t <span style="color:#f92672">&lt;=</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                t <span style="color:#f92672">=</span> tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">awaitNanos</span><span style="color:#f92672">(</span>t<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(++</span>tail <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            size<span style="color:#f92672">++;</span>
            headWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">signal</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            lock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
        lock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                headWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">await</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            E e <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span>
            array<span style="color:#f92672">[</span>head<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#75715e">// help GC
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(++</span>head <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            size<span style="color:#f92672">--;</span>
            tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">signal</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            lock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>public void offer(E e, long timeout) throws InterruptedException 是带超时的版本，可以只等待一段时间，而不是永久等下去，类似的 poll 也可以做带超时的版本，这个留给大家了</li>
</ul>
<blockquote>
<p><strong>注意</strong></p>
<ul>
<li>JDK 中 BlockingQueue 接口的方法命名与我的示例有些差异
<ul>
<li>方法 offer(E e) 是非阻塞的实现，阻塞实现方法为 put(E e)</li>
<li>方法 poll() 是非阻塞的实现，阻塞实现方法为 take()</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="双锁实现">
  双锁实现
  <a class="anchor" href="#%e5%8f%8c%e9%94%81%e5%ae%9e%e7%8e%b0">#</a>
</h3>
<p>单锁的缺点在于：</p>
<ul>
<li>生产和消费几乎是不冲突的，唯一冲突的是生产者和消费者它们有可能同时修改 size</li>
<li>冲突的主要是生产者之间：多个 offer 线程修改 tail</li>
<li>冲突的还有消费者之间：多个 poll 线程修改 head</li>
</ul>
<p>如果希望进一步提高性能，可以用两把锁</p>
<ul>
<li>一把锁保护 tail</li>
<li>另一把锁保护 head</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ReentrantLock headLock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>  <span style="color:#75715e">// 保护 head 的锁
</span><span style="color:#75715e"></span>Condition headWaits <span style="color:#f92672">=</span> headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">newCondition</span><span style="color:#f92672">();</span> <span style="color:#75715e">// 队列空时，需要等待的线程集合
</span><span style="color:#75715e"></span>
ReentrantLock tailLock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>  <span style="color:#75715e">// 保护 tail 的锁
</span><span style="color:#75715e"></span>Condition tailWaits <span style="color:#f92672">=</span> tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">newCondition</span><span style="color:#f92672">();</span> <span style="color:#75715e">// 队列满时，需要等待的线程集合
</span></code></pre></div><p>先看看 offer 方法的初步实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Override</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
    tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 队列满等待
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">await</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">// 不满则入队
</span><span style="color:#75715e"></span>        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(++</span>tail <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">// 修改 size （有问题）
</span><span style="color:#75715e"></span>        size<span style="color:#f92672">++;</span>
        
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
        tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>上面代码的缺点是 size 并不受 tailLock 保护，tailLock 与 headLock 是两把不同的锁，并不能实现互斥的效果。因此，size 需要用下面的代码保证原子性</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">AtomicInteger size <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AtomicInteger<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>	   <span style="color:#75715e">// 保护 size 的原子变量
</span><span style="color:#75715e"></span>
size<span style="color:#f92672">.</span><span style="color:#a6e22e">getAndIncrement</span><span style="color:#f92672">();</span> <span style="color:#75715e">// 自增
</span><span style="color:#75715e"></span>size<span style="color:#f92672">.</span><span style="color:#a6e22e">getAndDecrement</span><span style="color:#f92672">();</span> <span style="color:#75715e">// 自减
</span></code></pre></div><p>代码修改为</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Override</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
    tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 队列满等待
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">await</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">// 不满则入队
</span><span style="color:#75715e"></span>        array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(++</span>tail <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">// 修改 size
</span><span style="color:#75715e"></span>        size<span style="color:#f92672">.</span><span style="color:#a6e22e">getAndIncrement</span><span style="color:#f92672">();</span>
        
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
        tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>对称地，可以写出 poll 方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Override</span>
<span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
    E e<span style="color:#f92672">;</span>
    headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 队列空等待
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            headWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">await</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">// 不空则出队
</span><span style="color:#75715e"></span>        e <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(++</span>head <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">// 修改 size
</span><span style="color:#75715e"></span>        size<span style="color:#f92672">.</span><span style="color:#a6e22e">getAndDecrement</span><span style="color:#f92672">();</span>
        
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
        headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>下面来看一个难题，就是如何通知 headWaits 和 tailWaits 中等待的线程，比如 poll 方法拿走一个元素，通知 tailWaits：我拿走一个，不满了噢，你们可以放了，因此代码改为</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Override</span>
<span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
    E e<span style="color:#f92672">;</span>
    headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 队列空等待
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            headWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">await</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">// 不空则出队
</span><span style="color:#75715e"></span>        e <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(++</span>head <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">// 修改 size
</span><span style="color:#75715e"></span>        size<span style="color:#f92672">.</span><span style="color:#a6e22e">getAndDecrement</span><span style="color:#f92672">();</span>
        
        <span style="color:#75715e">// 通知 tailWaits 不满（有问题）
</span><span style="color:#75715e"></span>        tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">signal</span><span style="color:#f92672">();</span>
        
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
        headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>问题在于要使用这些条件变量的 await()， signal() 等方法需要先获得与之关联的锁，上面的代码若直接运行会出现以下错误</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">java<span style="color:#f92672">.</span><span style="color:#a6e22e">lang</span><span style="color:#f92672">.</span><span style="color:#a6e22e">IllegalMonitorStateException</span>
</code></pre></div><p>那有同学说，加上锁不就行了吗，于是写出了下面的代码</p>
<p><img src="imgs/image-20230208160343493.png" alt="image-20230208160343493" /></p>
<p>发现什么问题了？两把锁这么嵌套使用，非常容易出现死锁，如下所示</p>
<p><img src="imgs/image-20230208160143386.png" alt="image-20230208160143386" /></p>
<p>因此得避免嵌套，两段加锁的代码变成了下面平级的样子</p>
<p><img src="imgs/image-20230208162857435.png" alt="image-20230208162857435" /></p>
<p>性能还可以进一步提升</p>
<ol>
<li>
<p>代码调整后 offer 并没有同时获取 tailLock 和 headLock 两把锁，因此两次加锁之间会有<strong>空隙</strong>，这个空隙内可能有其它的 offer 线程添加了更多的元素，那么这些线程都要执行 signal()，通知 poll 线程队列非空吗？</p>
<ul>
<li>每次调用 signal() 都需要这些 offer 线程先获得 headLock 锁，成本较高，要想法减少 offer 线程获得 headLock 锁的次数</li>
<li>可以加一个条件：当 offer 增加前队列为空，即从 0 变化到不空，才由此 offer 线程来通知 headWaits，其它情况不归它管</li>
</ul>
</li>
<li>
<p>队列从 0 变化到不空，会唤醒一个等待的 poll 线程，这个线程被唤醒后，肯定能拿到 headLock 锁，因此它具备了唤醒 headWaits 上其它 poll 线程的先决条件。如果检查出此时有其它 offer 线程新增了元素（不空，但不是从0变化而来），那么不妨由此 poll 线程来唤醒其它 poll 线程</p>
</li>
</ol>
<p>这个技巧被称之为级联通知（cascading notifies），类似的原因</p>
<ol start="3">
<li>在 poll 时队列从满变化到不满，才由此 poll 线程来唤醒一个等待的 offer 线程，目的也是为了减少 poll 线程对 tailLock 上锁次数，剩下等待的 offer 线程由这个 offer 线程间接唤醒</li>
</ol>
<p>最终的代码为</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BlockingQueue2</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> BlockingQueue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> E<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> AtomicInteger size <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AtomicInteger<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
    ReentrantLock headLock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>
    Condition headWaits <span style="color:#f92672">=</span> headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">newCondition</span><span style="color:#f92672">();</span>
    ReentrantLock tailLock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock<span style="color:#f92672">();</span>
    Condition tailWaits <span style="color:#f92672">=</span> tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">newCondition</span><span style="color:#f92672">();</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BlockingQueue2</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">array</span> <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> c<span style="color:#f92672">;</span>
        tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">await</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            array<span style="color:#f92672">[</span>tail<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> e<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(++</span>tail <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>            
            c <span style="color:#f92672">=</span> size<span style="color:#f92672">.</span><span style="color:#a6e22e">getAndIncrement</span><span style="color:#f92672">();</span>
            <span style="color:#75715e">// a. 队列不满, 但不是从满-&gt;不满, 由此offer线程唤醒其它offer线程
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">+</span> 1 <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">signal</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// b. 从0-&gt;不空, 由此offer线程唤醒等待的poll线程
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lock</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                headWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">signal</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
                headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
        E e<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> c<span style="color:#f92672">;</span>
        headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lockInterruptibly</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                headWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">await</span><span style="color:#f92672">();</span> 
            <span style="color:#f92672">}</span>
            e <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>head<span style="color:#f92672">];</span> 
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(++</span>head <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            c <span style="color:#f92672">=</span> size<span style="color:#f92672">.</span><span style="color:#a6e22e">getAndDecrement</span><span style="color:#f92672">();</span>
            <span style="color:#75715e">// b. 队列不空, 但不是从0变化到不空，由此poll线程通知其它poll线程
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">&gt;</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                headWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">signal</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            headLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// a. 从满-&gt;不满, 由此poll线程唤醒等待的offer线程
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">lock</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                tailWaits<span style="color:#f92672">.</span><span style="color:#a6e22e">signal</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
                tailLock<span style="color:#f92672">.</span><span style="color:#a6e22e">unlock</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>双锁实现的非常精巧，据说作者 Doug Lea 花了一年的时间才完善了此段代码</p>
<h2 id="29-堆">
  2.9 堆
  <a class="anchor" href="#29-%e5%a0%86">#</a>
</h2>
<p>以大顶堆为例，相对于之前的优先级队列，增加了堆化等方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MaxHeap</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MaxHeap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">array</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 获取堆顶元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @return 堆顶元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 删除堆顶元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @return 堆顶元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> top <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        swap<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        size<span style="color:#f92672">--;</span>
        down<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> top<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 删除指定索引处元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param index 索引
</span><span style="color:#75715e">     * @return 被删除元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">poll</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> deleted <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>index<span style="color:#f92672">];</span>
        swap<span style="color:#f92672">(</span>index<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        size<span style="color:#f92672">--;</span>
        down<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> deleted<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 替换堆顶元素
</span><span style="color:#75715e">     * @param replaced 新元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">replace</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> replaced<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> replaced<span style="color:#f92672">;</span>
        down<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 堆的尾部添加元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param offered 新元素
</span><span style="color:#75715e">     * @return 是否添加成功
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> offered<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        up<span style="color:#f92672">(</span>offered<span style="color:#f92672">);</span>
        size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 将 offered 元素上浮: 直至 offered 小于父元素或到堆顶
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">up</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> offered<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> child <span style="color:#f92672">=</span> size<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> parent <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> 2<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>offered <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            child <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> offered<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MaxHeap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">array</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">size</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
        heapify<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 建堆
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">heapify</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 如何找到最后这个非叶子节点  size / 2 - 1
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> size <span style="color:#f92672">/</span> 2 <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> 0<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
            down<span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 将 parent 索引处的元素下潜: 与两个孩子较大者交换, 直至没孩子或孩子没它大
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">down</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> left <span style="color:#f92672">=</span> parent <span style="color:#f92672">*</span> 2 <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> right <span style="color:#f92672">=</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>left<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>max<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>right <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>right<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>max<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            max <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">!=</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 找到了更大的孩子
</span><span style="color:#75715e"></span>            swap<span style="color:#f92672">(</span>max<span style="color:#f92672">,</span> parent<span style="color:#f92672">);</span>
            down<span style="color:#f92672">(</span>max<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 交换两个索引处的元素
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>1<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 7<span style="color:#f92672">};</span>
        MaxHeap maxHeap <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MaxHeap<span style="color:#f92672">(</span>array<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">array</span><span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>建堆</strong></p>
<p>Floyd 建堆算法作者（也是之前龟兔赛跑判环作者）：</p>
<p><img src="imgs/image-20230213095110902.png" alt="image-20230213095110902" /></p>
<ol>
<li>找到最后一个非叶子节点</li>
<li>从后向前，对每个节点执行下潜</li>
</ol>
<p>一些规律</p>
<ul>
<li>一棵满二叉树节点个数为 $2^h-1$，如下例中高度 $h=3$ 节点数是 $2^3-1=7$</li>
<li>非叶子节点范围为 $[0, size/2-1]$</li>
</ul>
<p>算法时间复杂度分析</p>
<p><img src="imgs/image-20230213114024607.png" alt="image-20230213114024607" /></p>
<p>下面看交换次数的推导：设节点高度为 3</p>
<table>
<thead>
<tr>
<th></th>
<th>本层节点数</th>
<th>高度</th>
<th>下潜最多交换次数（高度-1）</th>
</tr>
</thead>
<tbody>
<tr>
<td>4567 这层</td>
<td>4</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>23这层</td>
<td>2</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>1这层</td>
<td>1</td>
<td>3</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>每一层的交换次数为：$节点个数*此节点交换次数$，总的交换次数为
$$
\begin{aligned}
&amp; 4 * 0 + 2 * 1 + 1 * 2 \</p>
<p>&amp; \frac{8}{2}*0 + \frac{8}{4}*1 + \frac{8}{8}*2 \</p>
<p>&amp; \frac{8}{2^1}*0 + \frac{8}{2^2}*1 + \frac{8}{2^3}*2\</p>
<p>\end{aligned}
$$
即
$$
\sum_{i=1}^{h}(\frac{2^h}{2^i}*(i-1))
$$
在 <a href="https://www.wolframalpha.com/">https://www.wolframalpha.com/</a> 输入</p>
<pre><code>Sum[\(40)Divide[Power[2,x],Power[2,i]]*\(40)i-1\(41)\(41),{i,1,x}]
</code></pre><p>推导出 
$$
2^h -h -1
$$
其中 $2^h \approx n$，$h \approx \log_2{n}$，因此有时间复杂度 $O(n)$</p>
<h2 id="210-二叉树">
  2.10 二叉树
  <a class="anchor" href="#210-%e4%ba%8c%e5%8f%89%e6%a0%91">#</a>
</h2>
<p>二叉树是这么一种树状结构：每个节点最多有两个孩子，左孩子和右孩子</p>
<p>重要的二叉树结构</p>
<ul>
<li>完全二叉树（complete binary tree）是一种二叉树结构，除最后一层以外，每一层都必须填满，填充时要遵从先左后右</li>
<li>平衡二叉树（balance binary tree）是一种二叉树结构，其中每个节点的左右子树高度相差不超过 1</li>
</ul>
<h3 id="存储">
  存储
  <a class="anchor" href="#%e5%ad%98%e5%82%a8">#</a>
</h3>
<p>存储方式分为两种</p>
<ol>
<li>定义树节点与左、右孩子引用（TreeNode）</li>
<li>使用数组，前面讲堆时用过，若以 0 作为树的根，索引可以通过如下方式计算
<ul>
<li>父 = floor((子 - 1) / 2)</li>
<li>左孩子 = 父 * 2 + 1</li>
<li>右孩子 = 父 * 2 + 2</li>
</ul>
</li>
</ol>
<h3 id="遍历">
  遍历
  <a class="anchor" href="#%e9%81%8d%e5%8e%86">#</a>
</h3>
<p>遍历也分为两种</p>
<ol>
<li>广度优先遍历（Breadth-first order）：尽可能先访问距离根最近的节点，也称为层序遍历</li>
<li>深度优先遍历（Depth-first order）：对于二叉树，可以进一步分成三种（要深入到叶子节点）
<ol>
<li>pre-order 前序遍历，对于每一棵子树，先访问该节点，然后是左子树，最后是右子树</li>
<li>in-order 中序遍历，对于每一棵子树，先访问左子树，然后是该节点，最后是右子树</li>
<li>post-order 后序遍历，对于每一棵子树，先访问左子树，然后是右子树，最后是该节点</li>
</ol>
</li>
</ol>
<h4 id="广度优先">
  广度优先
  <a class="anchor" href="#%e5%b9%bf%e5%ba%a6%e4%bc%98%e5%85%88">#</a>
</h4>
<p><img src="imgs/image-20230216153607396.png" alt="image-20230216153607396" /></p>
<table>
<thead>
<tr>
<th>本轮开始时队列</th>
<th>本轮访问节点</th>
</tr>
</thead>
<tbody>
<tr>
<td>[1]</td>
<td>1</td>
</tr>
<tr>
<td>[2, 3]</td>
<td>2</td>
</tr>
<tr>
<td>[3, 4]</td>
<td>3</td>
</tr>
<tr>
<td>[4, 5, 6]</td>
<td>4</td>
</tr>
<tr>
<td>[5, 6]</td>
<td>5</td>
</tr>
<tr>
<td>[6, 7, 8]</td>
<td>6</td>
</tr>
<tr>
<td>[7, 8]</td>
<td>7</td>
</tr>
<tr>
<td>[8]</td>
<td>8</td>
</tr>
<tr>
<td>[]</td>
<td></td>
</tr>
</tbody>
</table>
<ol>
<li>初始化，将根节点加入队列</li>
<li>循环处理队列中每个节点，直至队列为空</li>
<li>每次循环内处理节点后，将它的孩子节点（即下一层的节点）加入队列</li>
</ol>
<blockquote>
<p>注意</p>
<ul>
<li>
<p>以上用队列来层序遍历是针对  TreeNode 这种方式表示的二叉树</p>
</li>
<li>
<p>对于数组表现的二叉树，则直接遍历数组即可，自然为层序遍历的顺序</p>
</li>
</ul>
</blockquote>
<h4 id="深度优先">
  深度优先
  <a class="anchor" href="#%e6%b7%b1%e5%ba%a6%e4%bc%98%e5%85%88">#</a>
</h4>
<p><img src="../imgs/image-20230221110443230.png" alt="image-20230221110443230" /></p>
<table>
<thead>
<tr>
<th>栈暂存</th>
<th>已处理</th>
<th>前序遍历</th>
<th>中序遍历</th>
</tr>
</thead>
<tbody>
<tr>
<td>[1]</td>
<td>1 ✔️ 左💤 右💤</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>[1, 2]</td>
<td>2✔️ 左💤 右💤<br />1✔️ 左💤 右💤</td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>[1, 2, 4]</td>
<td>4✔️ 左✔️ 右✔️<br />2✔️ 左💤 右💤<br />1✔️ 左💤 右💤</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>[1, 2]</td>
<td>2✔️ 左✔️ 右✔️<br />1✔️ 左💤 右💤</td>
<td></td>
<td>2</td>
</tr>
<tr>
<td>[1]</td>
<td>1✔️ 左✔️ 右💤</td>
<td></td>
<td>1</td>
</tr>
<tr>
<td>[1, 3]</td>
<td>3✔️ 左💤 右💤<br />1✔️ 左✔️ 右💤</td>
<td>3</td>
<td></td>
</tr>
<tr>
<td>[1, 3, 5]</td>
<td>5✔️ 左✔️ 右✔️<br />3✔️ 左💤 右💤<br />1✔️ 左✔️ 右💤</td>
<td>5</td>
<td>5</td>
</tr>
<tr>
<td>[1, 3]</td>
<td>3✔️ 左✔️ 右💤<br />1✔️ 左✔️ 右💤</td>
<td></td>
<td>3</td>
</tr>
<tr>
<td>[1, 3, 6]</td>
<td>6✔️ 左✔️ 右✔️<br />3✔️ 左✔️ 右💤<br />1✔️ 左✔️ 右💤</td>
<td>6</td>
<td>6</td>
</tr>
<tr>
<td>[1, 3]</td>
<td>3✔️ 左✔️ 右✔️<br />1✔️ 左✔️ 右💤</td>
<td></td>
<td></td>
</tr>
<tr>
<td>[1]</td>
<td>1✔️ 左✔️ 右✔️</td>
<td></td>
<td></td>
</tr>
<tr>
<td>[]</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="递归实现">
  递归实现
  <a class="anchor" href="#%e9%80%92%e5%bd%92%e5%ae%9e%e7%8e%b0">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * &lt;h3&gt;前序遍历&lt;/h3&gt;
</span><span style="color:#75715e"> * @param node 节点
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">preOrder</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\t&#34;</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 值
</span><span style="color:#75715e"></span>    preOrder<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 左
</span><span style="color:#75715e"></span>    preOrder<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 右
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * &lt;h3&gt;中序遍历&lt;/h3&gt;
</span><span style="color:#75715e"> * @param node 节点
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">inOrder</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    inOrder<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 左
</span><span style="color:#75715e"></span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\t&#34;</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 值
</span><span style="color:#75715e"></span>    inOrder<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 右
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * &lt;h3&gt;后序遍历&lt;/h3&gt;
</span><span style="color:#75715e"> * @param node 节点
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">postOrder</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    postOrder<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 左
</span><span style="color:#75715e"></span>    postOrder<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 右
</span><span style="color:#75715e"></span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\t&#34;</span><span style="color:#f92672">);</span> <span style="color:#75715e">// 值
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><h4 id="非递归实现">
  非递归实现
  <a class="anchor" href="#%e9%9d%9e%e9%80%92%e5%bd%92%e5%ae%9e%e7%8e%b0">#</a>
</h4>
<p><strong>前序遍历</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">LinkedListStack<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedListStack<span style="color:#f92672">&lt;&gt;();</span>
TreeNode curr <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>

<span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">||</span> curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>curr<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>curr<span style="color:#f92672">);</span>
        curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        TreeNode pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
        curr <span style="color:#f92672">=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p><strong>中序遍历</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">LinkedListStack<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedListStack<span style="color:#f92672">&lt;&gt;();</span>
TreeNode curr <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>

<span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">||</span> curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>curr<span style="color:#f92672">);</span>
        curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        TreeNode pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>pop<span style="color:#f92672">);</span>
        curr <span style="color:#f92672">=</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>后序遍历</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">LinkedListStack<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedListStack<span style="color:#f92672">&lt;&gt;();</span>
TreeNode curr <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
TreeNode pop <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>

<span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">||</span> curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>curr<span style="color:#f92672">);</span>
        curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        TreeNode peek <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>peek<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> peek<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> pop<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>pop<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            curr <span style="color:#f92672">=</span> peek<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>对于后序遍历，向回走时，需要处理完右子树才能 pop 出栈。如何知道右子树处理完成呢？</p>
<ul>
<li>
<p>如果栈顶元素的 $right \equiv null$ 表示没啥可处理的，可以出栈</p>
</li>
<li>
<p>如果栈顶元素的 $right \neq null$，</p>
<ul>
<li>那么使用 lastPop 记录最近出栈的节点，即表示从这个节点向回走</li>
<li>如果栈顶元素的 $right==lastPop$ 此时应当出栈</li>
</ul>
</li>
</ul>
<p>对于前、中两种遍历，实际以上代码从右子树向回走时，并未走完全程（stack 提前出栈了）后序遍历以上代码是走完全程了</p>
<p><strong>统一写法</strong></p>
<p>下面是一种统一的写法，依据后序遍历修改</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">LinkedList<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>

TreeNode curr <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span> <span style="color:#75715e">// 代表当前节点
</span><span style="color:#75715e"></span>TreeNode pop <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 最近一次弹栈的元素
</span><span style="color:#75715e"></span><span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        colorPrintln<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;前: &#34;</span> <span style="color:#f92672">+</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">,</span> 31<span style="color:#f92672">);</span>
        stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>curr<span style="color:#f92672">);</span> <span style="color:#75715e">// 压入栈，为了记住回来的路
</span><span style="color:#75715e"></span>        curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        TreeNode peek <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
        <span style="color:#75715e">// 右子树可以不处理, 对中序来说, 要在右子树处理之前打印
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>peek<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            colorPrintln<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;中: &#34;</span> <span style="color:#f92672">+</span> peek<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">,</span> 36<span style="color:#f92672">);</span>
            pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            colorPrintln<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;后: &#34;</span> <span style="color:#f92672">+</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">,</span> 34<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 右子树处理完成, 对中序来说, 无需打印
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>peek<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> pop<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            colorPrintln<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;后: &#34;</span> <span style="color:#f92672">+</span> pop<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">,</span> 34<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 右子树待处理, 对中序来说, 要在右子树处理之前打印
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            colorPrintln<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;中: &#34;</span> <span style="color:#f92672">+</span> peek<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">,</span> 36<span style="color:#f92672">);</span>
            curr <span style="color:#f92672">=</span> peek<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">colorPrintln</span><span style="color:#f92672">(</span>String origin<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> color<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">printf</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;\033[%dm%s\033[0m%n&#34;</span><span style="color:#f92672">,</span> color<span style="color:#f92672">,</span> origin<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>一张图演示三种遍历</p>
<p><img src="../imgs/Sorted_binary_tree_ALL_RGB.svg.png" alt="Sorted_binary_tree_ALL_RGB.svg" /></p>
<ul>
<li>红色：前序遍历顺序</li>
<li>绿色：中序遍历顺序</li>
<li>蓝色：后续遍历顺序</li>
</ul>
<h1 id="三-练习">
  三. 练习
  <a class="anchor" href="#%e4%b8%89-%e7%bb%83%e4%b9%a0">#</a>
</h1>
<h2 id="31-时间复杂度">
  3.1 时间复杂度
  <a class="anchor" href="#31-%e6%97%b6%e9%97%b4%e5%a4%8d%e6%9d%82%e5%ba%a6">#</a>
</h2>
<p>用函数 $f(n)$ 表示算法效率与数据规模的关系，假设每次解决问题需要 1 微秒（$10^{-6}$ 秒），进行估算：</p>
<ol>
<li>如果 $f(n) = n^2$ 那么 1 秒能解决多少次问题？1 天呢？</li>
<li>如果 $f(n) = log_2(n)$  那么 1 秒能解决多少次问题？1 天呢？</li>
<li>如果 $f(n) = n!$ 那么 1 秒能解决多少次问题？1 天呢？</li>
</ol>
<p>参考解答</p>
<ol>
<li>1秒 $\sqrt{10^6} = 1000$ 次，1 天 $\sqrt{10^6 * 3600 * 24} \approx 293938$ 次</li>
<li>1秒 $2^{1,000,000} $ 次，一天 $2^{86,400,000,000}$</li>
<li>推算如下
<ul>
<li>$10! = 3,628,800$ 1秒能解决 $1,000,000$ 次，因此次数为 9 次</li>
<li>$14!=87,178,291,200$，一天能解决 $86,400,000,000$ 次，因此次数为 13 次</li>
</ul>
</li>
</ol>
<h2 id="32-二分查找">
  3.2 二分查找
  <a class="anchor" href="#32-%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be">#</a>
</h2>
<ul>
<li><a href="https://leetcode.cn/problems/sqrtx/">69. x 的平方根 - 力扣（LeetCode）</a></li>
</ul>
<h3 id="e01-二分查找-力扣-704-题">
  E01. 二分查找-力扣 704 题
  <a class="anchor" href="#e01-%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be-%e5%8a%9b%e6%89%a3-704-%e9%a2%98">#</a>
</h3>
<p><strong>要点</strong>：减而治之，可以用递归或非递归实现</p>
<p>给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1</p>
<p>例如</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">输入: nums <span style="color:#f92672">=</span> <span style="color:#f92672">[-</span>1<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>3<span style="color:#f92672">,</span>5<span style="color:#f92672">,</span>9<span style="color:#f92672">,</span>12<span style="color:#f92672">],</span> target <span style="color:#f92672">=</span> 9
输出: 4
解释: 9 出现在 nums 中并且下标为 4
    
输入: nums <span style="color:#f92672">=</span> <span style="color:#f92672">[-</span>1<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>3<span style="color:#f92672">,</span>5<span style="color:#f92672">,</span>9<span style="color:#f92672">,</span>12<span style="color:#f92672">],</span> target <span style="color:#f92672">=</span> 2
输出: <span style="color:#f92672">-</span>1
解释: 2 不存在 nums 中因此返回 <span style="color:#f92672">-</span>1    
</code></pre></div><p><strong>参考答案</strong>：略，可以用讲过的任意一种二分求解</p>
<h3 id="e02-搜索插入位置-力扣-35-题">
  E02. 搜索插入位置-力扣 35 题
  <a class="anchor" href="#e02-%e6%90%9c%e7%b4%a2%e6%8f%92%e5%85%a5%e4%bd%8d%e7%bd%ae-%e5%8a%9b%e6%89%a3-35-%e9%a2%98">#</a>
</h3>
<p><strong>要点</strong>：理解谁代表插入位置</p>
<p>给定一个排序数组和一个目标值</p>
<ul>
<li>在数组中找到目标值，并返回其索引</li>
<li>如果目标值不存在于数组中，返回它将会被按顺序插入的位置</li>
</ul>
<p>例如</p>
<pre><code>输入: nums = [1,3,5,6], target = 5
输出: 2

输入: nums = [1,3,5,6], target = 2
输出: 1

输入: nums = [1,3,5,6], target = 7
输出: 4
</code></pre><p><strong>参考答案1</strong>：用二分查找基础版代码改写，基础版中，找到返回 m，没找到 i 代表插入点，因此有</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">searchInsert</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> i<span style="color:#f92672">;</span> <span style="color:#75715e">// 原始 return -1
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p><strong>参考答案2</strong>：用二分查找平衡版改写，平衡版中</p>
<ul>
<li>如果 target == a[i] 返回 i 表示找到</li>
<li>如果 target &lt; a[i]，例如 target = 2，a[i] = 3，这时就应该在 i 位置插入 2</li>
<li>如果 a[i] &lt; target，例如 a[i] = 3，target = 4，这时就应该在 i+1 位置插入 4</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">searchInsert</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>1 <span style="color:#f92672">&lt;</span> j <span style="color:#f92672">-</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">])</span> <span style="color:#f92672">?</span> i <span style="color:#f92672">:</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
    <span style="color:#75715e">// 原始 (target == a[i]) ? i : -1;
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p><strong>参考答案3</strong>：用 leftmost 版本解，返回值即为插入位置（并能处理元素重复的情况）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">searchInsert</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span><span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;=</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> 
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> i<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e03-搜索开始结束位置-力扣-34-题">
  E03. 搜索开始结束位置-力扣 34 题
  <a class="anchor" href="#e03-%e6%90%9c%e7%b4%a2%e5%bc%80%e5%a7%8b%e7%bb%93%e6%9d%9f%e4%bd%8d%e7%bd%ae-%e5%8a%9b%e6%89%a3-34-%e9%a2%98">#</a>
</h3>
<p>给你一个按照非递减顺序排列的整数数组 nums，和一个目标值 target。请你找出给定目标值在数组中的开始位置和结束位置。</p>
<p>如果数组中不存在目标值 target，返回 [-1, -1]。</p>
<p>你必须设计并实现时间复杂度为 O(log n) 的算法解决此问题</p>
<p>例如</p>
<pre><code>输入：nums = [5,7,7,8,8,10], target = 8
输出：[3,4]

输入：nums = [5,7,7,8,8,10], target = 6
输出：[-1,-1]

输入：nums = [], target = 0
输出：[-1,-1]
</code></pre><p><strong>参考答案</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">left</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> candidate <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            candidate <span style="color:#f92672">=</span> m<span style="color:#f92672">;</span>
            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> candidate<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">right</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> j <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> candidate <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            j <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            candidate <span style="color:#f92672">=</span> m<span style="color:#f92672">;</span>
            i <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> candidate<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">searchRange</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> left<span style="color:#f92672">(</span>nums<span style="color:#f92672">,</span> target<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>x <span style="color:#f92672">==</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#f92672">{-</span>1<span style="color:#f92672">,</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#f92672">{</span>x<span style="color:#f92672">,</span> right<span style="color:#f92672">(</span>nums<span style="color:#f92672">,</span> target<span style="color:#f92672">)};</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="33-递归---single-recursion">
  3.3 递归 - single recursion
  <a class="anchor" href="#33-%e9%80%92%e5%bd%92---single-recursion">#</a>
</h2>
<h3 id="e03-二分查找">
  E03. 二分查找
  <a class="anchor" href="#e03-%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">binarySearch</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> recursion<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> target<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">recursion</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> target<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>target <span style="color:#f92672">&lt;</span> a<span style="color:#f92672">[</span>m<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> recursion<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> target<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> m <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>m<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> recursion<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> target<span style="color:#f92672">,</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> m<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e04-冒泡排序">
  E04. 冒泡排序
  <a class="anchor" href="#e04-%e5%86%92%e6%b3%a1%e6%8e%92%e5%ba%8f">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>3<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 7<span style="color:#f92672">};</span>
    bubble<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">bubble</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> low<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>low <span style="color:#f92672">==</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> low<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> low<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> high<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            swap<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
            j <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    bubble<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> low<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
    a<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>low 与 high 为未排序范围</li>
<li>j 表示的是未排序的边界，下一次递归时的 high
<ul>
<li>发生交换，意味着有无序情况</li>
<li>最后一次交换（以后没有无序）时，左侧 i 仍是无序，右侧 i+1 已然有序</li>
</ul>
</li>
<li>视频中讲解的是只考虑 high 边界的情况，参考以上代码，理解在 low .. high 范围内的处理方法</li>
</ul>
<h3 id="e05-插入排序">
  E05. 插入排序
  <a class="anchor" href="#e05-%e6%8f%92%e5%85%a5%e6%8e%92%e5%ba%8f">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>3<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 7<span style="color:#f92672">,</span> 4<span style="color:#f92672">};</span>
    insertion<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> a<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>a<span style="color:#f92672">));</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insertion</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> low<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>low <span style="color:#f92672">&gt;</span> high<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> low <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>low<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;=</span> 0 <span style="color:#f92672">&amp;&amp;</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        i<span style="color:#f92672">--;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 1 <span style="color:#f92672">!=</span> low<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        a<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>    
    insertion<span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> low <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> high<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>已排序区域：[0 .. i .. low-1]</li>
<li>未排序区域：[low .. high]</li>
<li>视频中讲解的是只考虑 low 边界的情况，参考以上代码，理解 low-1 ..  high 范围内的处理方法</li>
<li>扩展：利用二分查找 leftmost 版本，改进寻找插入位置的代码</li>
</ul>
<h3 id="e06-约瑟夫问题16">
  E06. 约瑟夫问题<sup id="fnref:12"><a href="#fn:12" class="footnote-ref" role="doc-noteref">12</a></sup>
  <a class="anchor" href="#e06-%e7%ba%a6%e7%91%9f%e5%a4%ab%e9%97%ae%e9%a2%9816">#</a>
</h3>
<p>$n$ 个人排成圆圈，从头开始报数，每次数到第 $m$ 个人（$m$ 从 $1$ 开始）杀之，继续从下一个人重复以上过程，求最后活下来的人是谁？</p>
<p><strong>方法1</strong></p>
<p>根据最后的存活者 a 倒推出它在上一轮的索引号</p>
<table>
<thead>
<tr>
<th>f(n,m)</th>
<th>本轮索引</th>
<th>为了让 a 是这个索引，上一轮应当这样排</th>
<th>规律</th>
</tr>
</thead>
<tbody>
<tr>
<td>f(1,3)</td>
<td>0</td>
<td>x x x a</td>
<td>(0 + 3) % 2</td>
</tr>
<tr>
<td>f(2,3)</td>
<td>1</td>
<td>x x x 0 a</td>
<td>(1 + 3) % 3</td>
</tr>
<tr>
<td>f(3,3)</td>
<td>1</td>
<td>x x x 0 a</td>
<td>(1 + 3) % 4</td>
</tr>
<tr>
<td>f(4,3)</td>
<td>0</td>
<td>x x x a</td>
<td>(0 + 3) % 5</td>
</tr>
<tr>
<td>f(5,3)</td>
<td>3</td>
<td>x x x 0 1 2 a</td>
<td>(3 + 3) % 6</td>
</tr>
<tr>
<td>f(6,3)</td>
<td>0</td>
<td>x x x a</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>方法2</strong></p>
<p>设 n 为总人数，m 为报数次数，解返回的是这些人的索引，从0开始</p>
<table>
<thead>
<tr>
<th>f(n, m)</th>
<th>解</th>
<th>规律</th>
</tr>
</thead>
<tbody>
<tr>
<td>f(1, 3)</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>f(2, 3)</td>
<td>0 1 =&gt; 1</td>
<td>3%2=1</td>
</tr>
<tr>
<td>f(3, 3)</td>
<td>0 1 2 =&gt; 0 1</td>
<td>3%3=0</td>
</tr>
<tr>
<td>f(4, 3)</td>
<td>0 1 2 3 =&gt; 3 0 1</td>
<td>3%4=3</td>
</tr>
<tr>
<td>f(5, 3)</td>
<td>0 1 2 3 4  =&gt; 3 4 0 1</td>
<td>3%5=3</td>
</tr>
<tr>
<td>f(6, 3)</td>
<td>0 1 2 3 4 5 =&gt; 3 4 5 0 1</td>
<td>3%6=3</td>
</tr>
</tbody>
</table>
<p><strong>一. 找出等价函数</strong></p>
<p>规律：下次报数的起点为 $k = m % n$</p>
<ul>
<li>首次出列人的序号是 $k-1$，剩下的的 $n-1$ 个人重新组成约瑟夫环</li>
<li>下次从 $k$ 开始数，序号如下
<ul>
<li>$k,\ k+1, \ &hellip;\ ,\ 0,\ 1,\ k-2$，如上例中 $3\ 4\ 5\ 0\ 1$</li>
</ul>
</li>
</ul>
<p>这个函数称之为 $g(n-1,m)$，它的最终结果与 $f(n,m)$ 是相同的。</p>
<p><strong>二. 找到映射函数</strong></p>
<p>现在想办法找到 $g(n-1,m)$ 与 $f(n-1, m)$ 的对应关系，即
$$
3 \rightarrow 0 \<br>
4 \rightarrow 1 \<br>
5 \rightarrow 2 \<br>
0 \rightarrow 3 \<br>
1 \rightarrow 4 \<br>
$$
映射函数为
$$
mapping(x) = 
\begin{cases}
x-k &amp; x=[k..n-1] \<br>
x+n-k &amp; x=[0..k-2]
\end{cases}
$$
等价于下面函数
$$
mapping(x) = (x + n - k)%{n}
$$
代入测试一下
$$
3 \rightarrow (3+6-3)%6 \rightarrow 0 \<br>
4 \rightarrow (4+6-3)%6 \rightarrow 1 \<br>
5 \rightarrow (5+6-3)%6 \rightarrow 2 \<br>
0 \rightarrow (0+6-3)%6 \rightarrow 3 \<br>
1 \rightarrow (1+6-3)%6 \rightarrow 4 \<br>
$$
综上有
$$
f(n-1,m) = mapping(g(n-1,m))
$$</p>
<p><strong>三. 求逆映射函数</strong></p>
<p>映射函数是根据 x 计算 y，逆映射函数即根据 y 得到 x
$$
mapping^{-1}(x) = (x + k)%n
$$
代入测试一下
$$
0 \rightarrow (0+3)%6 \rightarrow 3 \<br>
1 \rightarrow (1+3)%6 \rightarrow 4 \<br>
2 \rightarrow (2+3)%6 \rightarrow 5 \<br>
3 \rightarrow (3+3)%6 \rightarrow 0 \<br>
4 \rightarrow (4+3)%6 \rightarrow 1 \<br>
$$
因此可以求得
$$
g(n-1,m) = mapping^{-1}(f(n-1,m))
$$</p>
<p><strong>四. 递推式</strong></p>
<p>代入推导
$$
\begin{aligned}
f(n,m) = \ &amp; g(n-1,m) \<br>
= \ &amp; mapping^{-1}(f(n-1,m)) \<br>
= \ &amp; (f(n-1,m) + k) % n \<br>
= \ &amp; (f(n-1,m) + m%n) % n \<br>
= \ &amp; (f(n-1,m) + m) % n \<br>
\end{aligned}
$$
最后一步化简是利用了模运算法则</p>
<p>$(a+b)%n = (a%n + b%n) %n$  例如</p>
<ul>
<li>$(6+6)%5 = 2 = (6+6%5)%5$</li>
<li>$(6+5)%5 = 1 = (6+5%5)%5$</li>
<li>$(6+4)%5 = 0 = (6+4%5)%5$</li>
</ul>
<p>最终递推式
$$
f(n,m) = 
\begin{cases}
(f(n-1,m) + m) % n &amp; n&gt;1\<br>
0 &amp; n = 1
\end{cases}
$$</p>
<h2 id="34-递归---multi-recursion">
  3.4 递归 - multi recursion
  <a class="anchor" href="#34-%e9%80%92%e5%bd%92---multi-recursion">#</a>
</h2>
<h3 id="e02-汉诺塔13">
  E02. 汉诺塔<sup id="fnref:13"><a href="#fn:13" class="footnote-ref" role="doc-noteref">13</a></sup>
  <a class="anchor" href="#e02-%e6%b1%89%e8%af%ba%e5%a1%9413">#</a>
</h3>
<p>Tower of Hanoi，是一个源于印度古老传说：大梵天创建世界时做了三根金刚石柱，在一根柱子从下往上按大小顺序摞着 64 片黄金圆盘，大梵天命令婆罗门把圆盘重新摆放在另一根柱子上，并且规定</p>
<ul>
<li>一次只能移动一个圆盘</li>
<li>小圆盘上不能放大圆盘</li>
</ul>
<p>下面的动图演示了4片圆盘的移动方法</p>
<p><img src="../imgs/Tower_of_Hanoi_4.gif" alt="" /></p>
<p>使用程序代码模拟圆盘的移动过程，并估算出时间复杂度</p>
<p><strong>思路</strong></p>
<ul>
<li>
<p>假设每根柱子标号 a，b，c，每个圆盘用 1，2，3 &hellip; 表示其大小，圆盘初始在 a，要移动到的目标是 c</p>
</li>
<li>
<p>如果只有一个圆盘，此时是最小问题，可以直接求解</p>
<ul>
<li>移动圆盘1 $a \mapsto c$</li>
</ul>
<p><img src="../imgs/image-20221219090741078.png" alt="image-20221219090741078" style="zoom:50%;" /></p>
</li>
<li>
<p>如果有两个圆盘，那么</p>
<ul>
<li>圆盘1 $a \mapsto b$</li>
<li>圆盘2 $a \mapsto c$</li>
<li>圆盘1 $b \mapsto c$</li>
</ul>
<p><img src="../imgs/image-20221219091316225.png" alt="image-20221219091316225" style="zoom:50%;" /></p>
</li>
<li>
<p>如果有三个圆盘，那么</p>
<ul>
<li>圆盘12 $a \mapsto b$</li>
<li>圆盘3 $a \mapsto c$</li>
<li>圆盘12 $b \mapsto c$</li>
</ul>
<p><img src="../imgs/image-20221219091930614.png" alt="image-20221219091930614" style="zoom:50%;" /></p>
</li>
<li>
<p>如果有四个圆盘，那么</p>
<ul>
<li>圆盘 123 $a \mapsto b$</li>
<li>圆盘4 $a \mapsto c$</li>
<li>圆盘 123 $b \mapsto c$</li>
</ul>
</li>
</ul>
<p><img src="../imgs/image-20221219092537323.png" alt="image-20221219092537323" style="zoom:50%;" /></p>
<p><strong>题解</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E02HanoiTower</span> <span style="color:#f92672">{</span>


    <span style="color:#75715e">/*
</span><span style="color:#75715e">             源 借 目
</span><span style="color:#75715e">        h(4, a, b, c) -&gt; h(3, a, c, b)
</span><span style="color:#75715e">                         a -&gt; c
</span><span style="color:#75715e">                         h(3, b, a, c)
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">static</span> LinkedList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> a <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">static</span> LinkedList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> b <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">static</span> LinkedList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> c <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">init</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> n<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> 1<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
            a<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">h</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">,</span> LinkedList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> a<span style="color:#f92672">,</span> 
                  LinkedList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> b<span style="color:#f92672">,</span> 
                  LinkedList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> c<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        h<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> a<span style="color:#f92672">,</span> c<span style="color:#f92672">,</span> b<span style="color:#f92672">);</span>
        c<span style="color:#f92672">.</span><span style="color:#a6e22e">addLast</span><span style="color:#f92672">(</span>a<span style="color:#f92672">.</span><span style="color:#a6e22e">removeLast</span><span style="color:#f92672">());</span>
        print<span style="color:#f92672">();</span>
        h<span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> b<span style="color:#f92672">,</span> a<span style="color:#f92672">,</span> c<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;-----------------------&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>a<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>b<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        init<span style="color:#f92672">(</span>3<span style="color:#f92672">);</span>
        print<span style="color:#f92672">();</span>
        h<span style="color:#f92672">(</span>3<span style="color:#f92672">,</span> a<span style="color:#f92672">,</span> b<span style="color:#f92672">,</span> c<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e03-杨辉三角6">
  E03. 杨辉三角<sup id="fnref:14"><a href="#fn:14" class="footnote-ref" role="doc-noteref">14</a></sup>
  <a class="anchor" href="#e03-%e6%9d%a8%e8%be%89%e4%b8%89%e8%a7%926">#</a>
</h3>
<p><img src="../imgs/image-20221219172514410.png" alt="image-20221219172514410" /></p>
<p><strong>分析</strong></p>
<p>把它斜着看</p>
<pre><code>        1
      1   1
    1   2   1
  1   3   3   1
1   4   6   4   1
</code></pre><ul>
<li>行 $i$，列 $j$，那么 $[i][j]$ 的取值应为 $[i-1][j-1] + [i-1][j]$</li>
<li>当 $j=0$ 或 $i=j$ 时，$[i][j]$ 取值为 $1$</li>
</ul>
<p><strong>题解</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> n<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> n <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">printf</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;%&#34;</span> <span style="color:#f92672">+</span> 2 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">-</span> 1 <span style="color:#f92672">-</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;s&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> j <span style="color:#f92672">&lt;</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span> j<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">printf</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;%-4d&#34;</span><span style="color:#f92672">,</span> element<span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> j<span style="color:#f92672">));</span>
        <span style="color:#f92672">}</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">element</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">==</span> 0 <span style="color:#f92672">||</span> i <span style="color:#f92672">==</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> element<span style="color:#f92672">(</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> j <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> element<span style="color:#f92672">(</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>优化1</strong></p>
<p>是 multiple recursion，因此很多递归调用是重复的，例如</p>
<ul>
<li>recursion(3, 1) 分解为
<ul>
<li>recursion(2, 0) + recursion(2, 1)</li>
</ul>
</li>
<li>而 recursion(3, 2) 分解为
<ul>
<li>recursion(2, 1) + recursion(2, 2)</li>
</ul>
</li>
</ul>
<p>这里 recursion(2, 1) 就重复调用了，事实上它会重复很多次，可以用 static AtomicInteger counter = new AtomicInteger(0) 来查看递归函数的调用总次数</p>
<p>事实上，可以用 <strong>memoization</strong> 来进行优化：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print1</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> triangle <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>n<span style="color:#f92672">][];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> n<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 打印空格
</span><span style="color:#75715e"></span>        triangle<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> j <span style="color:#f92672">&lt;=</span> i<span style="color:#f92672">;</span> j<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">printf</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;%-4d&#34;</span><span style="color:#f92672">,</span> element1<span style="color:#f92672">(</span>triangle<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> j<span style="color:#f92672">));</span>
        <span style="color:#f92672">}</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">element1</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> triangle<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>triangle<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> triangle<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>j<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">==</span> 0 <span style="color:#f92672">||</span> i <span style="color:#f92672">==</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        triangle<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> triangle<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>j<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    triangle<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> element1<span style="color:#f92672">(</span>triangle<span style="color:#f92672">,</span> i <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> j <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> element1<span style="color:#f92672">(</span>triangle<span style="color:#f92672">,</span> i <span style="color:#f92672">-</span> 1<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> triangle<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>j<span style="color:#f92672">];</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>将数组作为递归函数内可以访问的遍历，如果 $triangle[i][j]$ 已经有值，说明该元素已经被之前的递归函数计算过，就不必重复计算了</li>
</ul>
<p><strong>优化2</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print2</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> row <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>n<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> n<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 打印空格
</span><span style="color:#75715e"></span>        createRow<span style="color:#f92672">(</span>row<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> j <span style="color:#f92672">&lt;=</span> i<span style="color:#f92672">;</span> j<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">printf</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;%-4d&#34;</span><span style="color:#f92672">,</span> row<span style="color:#f92672">[</span>j<span style="color:#f92672">]);</span>
        <span style="color:#f92672">}</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">createRow</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> row<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        row<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span> j <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">;</span> j<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
        row<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> row<span style="color:#f92672">[</span>j <span style="color:#f92672">-</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">+</span> row<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>注意：还可以通过每一行的前一项计算出下一项，不必借助上一行，这与杨辉三角的另一个特性有关，暂不展开了</p>
</blockquote>
<p>力扣对应题目，但递归不适合在力扣刷高分，因此只列出相关题目，不做刷题讲解了</p>
<ul>
<li><a href="https://leetcode.cn/problems/pascals-triangle/">118. 杨辉三角 - 力扣（LeetCode）</a></li>
<li><a href="https://leetcode.cn/problems/pascals-triangle-ii/solution/yang-hui-san-jiao-ii-by-leetcode-solutio-shuk/">119. 杨辉三角 II - 力扣（LeetCode）</a></li>
</ul>
<h2 id="35-链表">
  3.5 链表
  <a class="anchor" href="#35-%e9%93%be%e8%a1%a8">#</a>
</h2>
<h3 id="e01-反转单向链表-力扣-206-题">
  E01. 反转单向链表-力扣 206 题
  <a class="anchor" href="#e01-%e5%8f%8d%e8%bd%ac%e5%8d%95%e5%90%91%e9%93%be%e8%a1%a8-%e5%8a%9b%e6%89%a3-206-%e9%a2%98">#</a>
</h3>
<p>对应力扣题目 <a href="https://leetcode.cn/problems/reverse-linked-list/">206. 反转链表 - 力扣（LeetCode）</a></p>
<pre><code>输入：head = [1,2,3,4,5]
输出：[5,4,3,2,1]

输入：[1,2]
输出：[2,1]

输入：[]
输出：[]
</code></pre><p><strong>方法1</strong></p>
<p>构造一个新链表，从<strong>旧链表</strong>依次拿到每个节点，创建新节点添加至<strong>新链表</strong>头部，完成后新链表即是倒序的</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseList</span><span style="color:#f92672">(</span>ListNode o1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode n1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    ListNode p <span style="color:#f92672">=</span> o1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        n1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">,</span> n1<span style="color:#f92672">);</span>
        p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> n1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>评价：简单直白，就是得新创建节点对象</p>
<p><strong>方法2</strong></p>
<p>与方法1 类似，构造一个新链表，从<strong>旧链表头部</strong>移除节点，添加到<strong>新链表头部</strong>，完成后新链表即是倒序的，区别在于原题目未提供节点外层的容器类，这里提供一个，另外一个区别是并不去构造新节点</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">List</span> <span style="color:#f92672">{</span>
    ListNode head<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">List</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">head</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">removeFirst</span><span style="color:#f92672">(){</span>
        ListNode first <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>first <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            head <span style="color:#f92672">=</span> first<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> first<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span>ListNode first<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        first<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        head <span style="color:#f92672">=</span> first<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseList</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    List list1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> List<span style="color:#f92672">(</span>head<span style="color:#f92672">);</span>
    List list2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> List<span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    ListNode first<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>first <span style="color:#f92672">=</span> list1<span style="color:#f92672">.</span><span style="color:#a6e22e">removeFirst</span><span style="color:#f92672">())</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        list2<span style="color:#f92672">.</span><span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span>first<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> list2<span style="color:#f92672">.</span><span style="color:#a6e22e">head</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>评价：更加面向对象，如果实际写代码而非刷题，更多会这么做</p>
<p><strong>方法3</strong></p>
<p>递归，在<strong>归</strong>时让 $5 \rightarrow 4$，$4 \rightarrow 3$ &hellip;</p>
<p>首先，写一个递归方法，返回值用来拿到最后一个节点</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseList</span><span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 不足两个节点
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span> <span style="color:#75715e">// 最后一个节点
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
    ListNode last <span style="color:#f92672">=</span> reverseList<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> last<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>注意1：递归终止条件是 curr.next == null，目的是到最后一个节点就结束递归，与之前递归遍历不一样</li>
<li>注意2：需要考虑空链表即 p == null 的情况</li>
</ul>
<p>可以先测试一下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ListNode o5 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>5<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
ListNode o4 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>4<span style="color:#f92672">,</span> o5<span style="color:#f92672">);</span>
ListNode o3 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>3<span style="color:#f92672">,</span> o4<span style="color:#f92672">);</span>
ListNode o2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>2<span style="color:#f92672">,</span> o3<span style="color:#f92672">);</span>
ListNode o1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> o2<span style="color:#f92672">);</span>
ListNode n1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> E01Leetcode206<span style="color:#f92672">().</span><span style="color:#a6e22e">reverseList</span><span style="color:#f92672">(</span>o1<span style="color:#f92672">);</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>n1<span style="color:#f92672">);</span>
</code></pre></div><p>会打印</p>
<pre><code>[5]
</code></pre><p>下面为<strong>伪码</strong>调用过程，假设节点分别是 $1 \rightarrow 2 \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$，先忽略返回值</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    	reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 3<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    		reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 4<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    			reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 5<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    				<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span> <span style="color:#75715e">// 返回5
</span><span style="color:#75715e"></span>                    <span style="color:#f92672">}</span>
				<span style="color:#f92672">}</span>
                <span style="color:#75715e">// 此时p是4, p.next是5
</span><span style="color:#75715e"></span>			<span style="color:#f92672">}</span>
            <span style="color:#75715e">// 此时p是3, p.next是4
</span><span style="color:#75715e"></span>		<span style="color:#f92672">}</span>
        <span style="color:#75715e">// 此时p是2, p.next是3
</span><span style="color:#75715e"></span>	<span style="color:#f92672">}</span>
    <span style="color:#75715e">// 此时p是1, p.next是2
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p>接下来，从 p = 4 开始，要让 $5 \rightarrow 4$，$4 \rightarrow 3$ &hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    	reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 3<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    		reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 4<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    			reverseList<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 5<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    				<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span> <span style="color:#75715e">// 返回5
</span><span style="color:#75715e"></span>                    <span style="color:#f92672">}</span>
				<span style="color:#f92672">}</span>
                <span style="color:#75715e">// 此时p是4, p.next是5, 要让5指向4,代码写成 p.next.next=p
</span><span style="color:#75715e"></span>                <span style="color:#75715e">// 还要注意4要指向 null, 否则就死链了
</span><span style="color:#75715e"></span>			<span style="color:#f92672">}</span>
            <span style="color:#75715e">// 此时p是3, p.next是4
</span><span style="color:#75715e"></span>		<span style="color:#f92672">}</span>
        <span style="color:#75715e">// 此时p是2, p.next是3
</span><span style="color:#75715e"></span>	<span style="color:#f92672">}</span>
    <span style="color:#75715e">// 此时p是1, p.next是2
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p>最终代码为：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseList</span><span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>    
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 不足两个节点
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span> <span style="color:#75715e">// 最后一个节点
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
    ListNode last <span style="color:#f92672">=</span> reverseList<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
    p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
    p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> last<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Q：为啥不能在<strong>递</strong>的过程中倒序？</p>
<p>A：比如</p>
<ul>
<li>$ 1 \rightarrow 2 \rightarrow 3 $ 如果递的过程中让 $2 \rightarrow 1$ 那么此时 $2 \rightarrow 3$ 就被覆盖，不知道接下来递给谁</li>
<li>而归的时候让 $3 \rightarrow 2$ 不会影响上一层的 $1 \rightarrow 2$</li>
</ul>
<p>评价：单向链表没有 prev 指针，但利用递归的特性【记住了】链表每次调用时相邻两个节点是谁</p>
<p><strong>方法4</strong></p>
<p>从链表每次拿到第二个节点，将其从链表断开，插入头部，直至它为 null 结束</p>
<ol>
<li>设置指针 o1(旧头)、n1(新头)、o2(旧老二)，分别指向第一，第一，第二节点</li>
</ol>
<p>$\frac{n1 \ o1}{1} \rightarrow \frac{o2}{2} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p>
<ol start="2">
<li>将 o2 节点从链表断开，即 o1 节点指向第三节点</li>
</ol>
<p>$ \frac{n1 \ o1}{1} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$ ，$\frac{o2}{2}$</p>
<ol start="3">
<li>o2 节点链入链表头部，即</li>
</ol>
<p>$\frac{o2}{2} \rightarrow \frac{n1 \ o1}{1} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p>
<ol start="4">
<li>n1 指向 o2</li>
</ol>
<p>$\frac{n1 \ o2}{2} \rightarrow \frac{o1}{1} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p>
<ol start="5">
<li>o2 指向 o1 的下一个节点，即</li>
</ol>
<p>$\frac{n1}{2} \rightarrow \frac{o1}{1} \rightarrow \frac{o2}{3} \rightarrow 4 \rightarrow 5 \rightarrow null$</p>
<ol start="6">
<li>
<p>重复以上 $2\sim5$ 步，直到 o2 指向 null</p>
</li>
<li>
<p>还应当考虑边界条件，即链表中不满两个元素时，无需走以上逻辑</p>
</li>
</ol>
<p>参考答案</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseList</span><span style="color:#f92672">(</span>ListNode o1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>    
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>o1 <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 不足两个节点
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> o1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    ListNode o2 <span style="color:#f92672">=</span> o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    ListNode n1 <span style="color:#f92672">=</span> o1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>o2 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> o2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span> 
        o2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> n1<span style="color:#f92672">;</span>
        n1 <span style="color:#f92672">=</span> o2<span style="color:#f92672">;</span>
        o2 <span style="color:#f92672">=</span> o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> n1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>方法5</strong></p>
<p>要点：把链表分成两部分，思路就是不断从链表2的头，往链表1的头搬移</p>
<ol>
<li>n1 指向 null，代表<strong>新链表</strong>一开始没有元素，o1 指向<strong>原链表</strong>的首节点</li>
</ol>
<p>$\frac{n1}{null}$，$\frac{o1}{1} \rightarrow 2 \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p>
<ol start="2">
<li>开始循环，o2 指向<strong>原链表</strong>次节点</li>
</ol>
<p>$\frac{n1}{null}$，$\frac{o1}{1} \rightarrow \frac{o2}{2} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p>
<ol start="3">
<li>搬移</li>
</ol>
<p>$\frac{o1}{1} \rightarrow \frac{n1}{null}$  ， $\frac{o2}{2} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p>
<ol start="4">
<li>指针复位</li>
</ol>
<p>$\frac{n1}{1} \rightarrow null$ ， $\frac{o1 \ o2}{2} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p>
<ol start="5">
<li>重复 $2\sim4$ 步</li>
<li>当 o1 = null 时退出循环</li>
</ol>
<p><strong>参考答案</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseList</span><span style="color:#f92672">(</span>ListNode o1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>o1 <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> o1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    ListNode n1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>o1 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode o2 <span style="color:#f92672">=</span> o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> n1<span style="color:#f92672">;</span>
        n1 <span style="color:#f92672">=</span> o1<span style="color:#f92672">;</span>
        o1 <span style="color:#f92672">=</span> o2<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> n1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>评价：本质上与方法2 相同，只是方法2更为面向对象</p>
<h3 id="e02-根据值删除节点-力扣-203-题">
  E02. 根据值删除节点-力扣 203 题
  <a class="anchor" href="#e02-%e6%a0%b9%e6%8d%ae%e5%80%bc%e5%88%a0%e9%99%a4%e8%8a%82%e7%82%b9-%e5%8a%9b%e6%89%a3-203-%e9%a2%98">#</a>
</h3>
<p>例如</p>
<pre><code>输入：head = [1,2,6,3,6], val = 6
输出：[1,2,3]

输入：head = [], val = 1
输出：[]

输入：head = [7,7,7,7], val = 7
输出：[]
</code></pre><p><strong>方法1</strong></p>
<p>图中 s 代表 sentinel 哨兵（如果不加哨兵，则删除第一个节点要特殊处理），例如要删除 6</p>
<pre><code>p1   p2
s -&gt; 1 -&gt; 2 -&gt; 6 -&gt; 3 -&gt; 6 -&gt; null
</code></pre><ul>
<li>如果 p2 不等于目标，则 p1，p2 不断后移</li>
</ul>
<pre><code>	 p1   p2
s -&gt; 1 -&gt; 2 -&gt; 6 -&gt; 3 -&gt; 6 -&gt; null

	 	  p1   p2
s -&gt; 1 -&gt; 2 -&gt; 6 -&gt; 3 -&gt; 6 -&gt; null
</code></pre><ul>
<li>p2 == 6，删除它，注意 p1 此时保持不变，p2 后移</li>
</ul>
<pre><code>	 	  p1   p2
s -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 6 -&gt; null
</code></pre><ul>
<li>p2 不等于目标，则 p1，p2 不断后移</li>
</ul>
<pre><code>	 	  	   p1   p2
s -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 6 -&gt; null
</code></pre><ul>
<li>p2 == 6，删除它，注意 p1 此时保持不变，p2 后移</li>
</ul>
<pre><code>	 	  	   p1   p2
s -&gt; 1 -&gt; 2 -&gt; 3 -&gt; null
</code></pre><ul>
<li>p2 == null 退出循环</li>
</ul>
<p>最后代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">removeElements</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode sentinel <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">,</span> head<span style="color:#f92672">);</span>
    ListNode p1 <span style="color:#f92672">=</span> sentinel<span style="color:#f92672">;</span>
    ListNode p2<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>p2 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p2<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">==</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>方法2</strong></p>
<p>思路，递归函数负责返回：从当前节点（我）开始，完成删除的子链表</p>
<ol>
<li>若我与 v 相等，应该返回下一个节点递归结果</li>
<li>若我与 v 不等，应该返回我，但我的 next 应该更新（让我能带上后续删过的子链表）</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">removeElements<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> v<span style="color:#f92672">=</span>6<span style="color:#f92672">){</span>
    1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>removeElements<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>2<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> v<span style="color:#f92672">=</span>6<span style="color:#f92672">){</span>
    	2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>removeElements<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>6<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> v<span style="color:#f92672">=</span>6<span style="color:#f92672">){</span>
    		removeElements<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>3<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> v<span style="color:#f92672">=</span>6<span style="color:#f92672">){</span>
    			3<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>removeElements<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>6<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> v<span style="color:#f92672">=</span>6<span style="color:#f92672">){</span>
    				removeElements<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> v<span style="color:#f92672">=</span>6<span style="color:#f92672">){</span>
    					<span style="color:#75715e">// 没有节点,返回
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>
					<span style="color:#f92672">}</span>
				<span style="color:#f92672">}</span>
                <span style="color:#66d9ef">return</span> 3
			<span style="color:#f92672">}</span>
		<span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> 2
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> 1
<span style="color:#f92672">}</span>
</code></pre></div><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">removeElements</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">==</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> removeElements<span style="color:#f92672">(</span>head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> removeElements<span style="color:#f92672">(</span>head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e03--删除倒数节点-力扣-19-题">
  E03.  删除倒数节点-力扣 19 题
  <a class="anchor" href="#e03--%e5%88%a0%e9%99%a4%e5%80%92%e6%95%b0%e8%8a%82%e7%82%b9-%e5%8a%9b%e6%89%a3-19-%e9%a2%98">#</a>
</h3>
<p>例如</p>
<pre><code>输入：head = [1,2,3,4,5], n = 2
输出：[1,2,3,5]

输入：head = [1], n = 1
输出：[]

输入：head = [1,2], n = 1
输出：[1]
</code></pre><p>另外题目提示</p>
<ul>
<li>链表至少一个节点</li>
<li>n 只会在合理范围</li>
</ul>
<p><strong>方法1</strong></p>
<p>思路，写一个递归函数，用来返回下一个节点的倒数序号</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">recursion<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">=</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    recursion<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>2<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">=</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    	recursion<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>3<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">=</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    		recursion<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>4<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">=</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    			recursion<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>5<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">=</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    				recursion<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">=</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    					<span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span> <span style="color:#75715e">// 最内层序号0
</span><span style="color:#75715e"></span>					<span style="color:#f92672">}</span>
                    <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span> <span style="color:#75715e">// 上一次返回值+1
</span><span style="color:#75715e"></span>				<span style="color:#f92672">}</span>
                <span style="color:#66d9ef">return</span> 2<span style="color:#f92672">;</span>
			<span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>返回值 <span style="color:#f92672">==</span> n <span style="color:#f92672">==</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// 删除 next
</span><span style="color:#75715e"></span>            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">return</span> 3<span style="color:#f92672">;</span>
		<span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> 4<span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> 5<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>但上述代码有一个问题，就是若删除的是第一个节点，它没有上一个节点，因此可以加一个哨兵来解决</p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">removeNthFromEnd</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode sentinel <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">,</span> head<span style="color:#f92672">);</span>
    recursion<span style="color:#f92672">(</span>sentinel<span style="color:#f92672">,</span> n<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> sentinel<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">recursion</span><span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> nth <span style="color:#f92672">=</span> recursion<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">,</span> n<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>nth <span style="color:#f92672">==</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> nth <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Q：p.next.next 不怕空指针吗？</p>
<p>A：</p>
<ul>
<li>p 是待删除节点的上一个节点，如果能递归回到 p，那么 p.next 肯定有值，不会是 null</li>
<li>且题目说明了 n &gt;=1，不会因为 nth == 0 而让 p.next 指向最后的 null</li>
</ul>
<p><strong>方法2</strong></p>
<p>快慢指针，p1 指向待删节点的上一个，p2 先走 n + 1 步</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">i<span style="color:#f92672">=</span>0
p2
s <span style="color:#f92672">-&gt;</span> 1 <span style="color:#f92672">-&gt;</span> 2 <span style="color:#f92672">-&gt;</span> 3 <span style="color:#f92672">-&gt;</span> 4 <span style="color:#f92672">-&gt;</span> 5 <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">null</span>

     i<span style="color:#f92672">=</span>1
     p2
s <span style="color:#f92672">-&gt;</span> 1 <span style="color:#f92672">-&gt;</span> 2 <span style="color:#f92672">-&gt;</span> 3 <span style="color:#f92672">-&gt;</span> 4 <span style="color:#f92672">-&gt;</span> 5 <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">null</span>

          i<span style="color:#f92672">=</span>2
          p2
s <span style="color:#f92672">-&gt;</span> 1 <span style="color:#f92672">-&gt;</span> 2 <span style="color:#f92672">-&gt;</span> 3 <span style="color:#f92672">-&gt;</span> 4 <span style="color:#f92672">-&gt;</span> 5 <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">null</span>

               i<span style="color:#f92672">=</span>3 从此开始 p1 p2 依次向右平移<span style="color:#f92672">,</span> 直到 p2 移动到末尾
p1             p2
s <span style="color:#f92672">-&gt;</span> 1 <span style="color:#f92672">-&gt;</span> 2 <span style="color:#f92672">-&gt;</span> 3 <span style="color:#f92672">-&gt;</span> 4 <span style="color:#f92672">-&gt;</span> 5 <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">null</span>

               p1             p2
s <span style="color:#f92672">-&gt;</span> 1 <span style="color:#f92672">-&gt;</span> 2 <span style="color:#f92672">-&gt;</span> 3 <span style="color:#f92672">-&gt;</span> 4 <span style="color:#f92672">-&gt;</span> 5 <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">null</span>
</code></pre></div><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">removeNthFromEnd</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode s <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">,</span> head<span style="color:#f92672">);</span>
    ListNode p1 <span style="color:#f92672">=</span> s<span style="color:#f92672">;</span>
    ListNode p2 <span style="color:#f92672">=</span> s<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> n <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        p2 <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p2 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        p2 <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>方法3</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">removeNthFromEnd</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    Composite c <span style="color:#f92672">=</span> recursion<span style="color:#f92672">(</span>head<span style="color:#f92672">,</span> n<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> c<span style="color:#f92672">.</span><span style="color:#a6e22e">node</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Composite</span> <span style="color:#f92672">{</span>
    ListNode node<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> nth<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Composite</span><span style="color:#f92672">(</span>ListNode node<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> nth<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">node</span> <span style="color:#f92672">=</span> node<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">nth</span> <span style="color:#f92672">=</span> nth<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> Composite <span style="color:#a6e22e">recursion</span><span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Composite<span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    Composite c <span style="color:#f92672">=</span> recursion<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">,</span> n<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c<span style="color:#f92672">.</span><span style="color:#a6e22e">nth</span> <span style="color:#f92672">!=</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span><span style="color:#a6e22e">node</span><span style="color:#f92672">;</span>
        c<span style="color:#f92672">.</span><span style="color:#a6e22e">node</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    c<span style="color:#f92672">.</span><span style="color:#a6e22e">nth</span> <span style="color:#f92672">+=</span>1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> c<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e04-有序链表去重-力扣-83-题">
  E04. 有序链表去重-力扣 83 题
  <a class="anchor" href="#e04-%e6%9c%89%e5%ba%8f%e9%93%be%e8%a1%a8%e5%8e%bb%e9%87%8d-%e5%8a%9b%e6%89%a3-83-%e9%a2%98">#</a>
</h3>
<p>例如</p>
<pre><code>输入：head = [1,1,2]
输出：[1,2]

输入：head = [1,1,2,3,3]
输出：[1,2,3]
</code></pre><p>注意：<strong>重复元素保留一个</strong></p>
<p><strong>方法1</strong></p>
<pre><code>p1   p2
1 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 3 -&gt; null
</code></pre><ul>
<li>p1.val == p2.val 那么删除 p2，注意 p1 此时保持不变</li>
</ul>
<pre><code>p1   p2
1 -&gt; 2 -&gt; 3 -&gt; 3 -&gt; null
</code></pre><ul>
<li>p1.val != p2.val 那么 p1，p2 向后移动</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">     p1   p2
1 <span style="color:#f92672">-&gt;</span> 2 <span style="color:#f92672">-&gt;</span> 3 <span style="color:#f92672">-&gt;</span> 3 <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">null</span>
         
          p1   p2
1 <span style="color:#f92672">-&gt;</span> 2 <span style="color:#f92672">-&gt;</span> 3 <span style="color:#f92672">-&gt;</span> 3 <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">null</span>     
</code></pre></div><ul>
<li>p1.val == p2.val 那么删除 p2</li>
</ul>
<pre><code>          p1   p2
1 -&gt; 2 -&gt; 3 -&gt; null   
</code></pre><ul>
<li>当 p2 == null 退出循环</li>
</ul>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">deleteDuplicates</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 链表节点 &lt; 2
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 链表节点 &gt;= 2
</span><span style="color:#75715e"></span>    ListNode p1 <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    ListNode p2<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>p2 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p1<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">==</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>方法2</strong></p>
<p>递归函数负责返回：从当前节点（我）开始，完成去重的链表</p>
<ol>
<li>若我与 next 重复，返回 next</li>
<li>若我与 next 不重复，返回我，但 next 应当更新</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">deleteDuplicates<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    deleteDuplicates<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>deleteDuplicates<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>deleteDuplicates<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>3<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                deleteDuplicates<span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">=</span>3<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
					<span style="color:#75715e">// 只剩一个节点，返回
</span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">return</span> 3
                <span style="color:#f92672">}</span>                
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">return</span> 2
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> 1
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">deleteDuplicates</span><span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">==</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> deleteDuplicates<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> deleteDuplicates<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e05-有序链表去重-力扣-82-题">
  E05. 有序链表去重-力扣 82 题
  <a class="anchor" href="#e05-%e6%9c%89%e5%ba%8f%e9%93%be%e8%a1%a8%e5%8e%bb%e9%87%8d-%e5%8a%9b%e6%89%a3-82-%e9%a2%98">#</a>
</h3>
<p>例如</p>
<pre><code>输入：head = [1,2,3,3,4,4,5]
输出：[1,2,5]

输入：head = [1,1,1,2,3]
输出：[2,3]
</code></pre><p>注意：<strong>重复元素一个不留</strong></p>
<p><strong>方法1</strong></p>
<p>递归函数负责返回：从当前节点（我）开始，完成去重的链表</p>
<ol>
<li>若我与 next 重复，一直找到下一个不重复的节点，以它的返回结果为准</li>
<li>若我与 next 不重复，返回我，同时更新 next</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">deleteDuplicates<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 找下个不重复的
</span><span style="color:#75715e"></span>	deleteDuplicates<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        deleteDuplicates<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
			deleteDuplicates<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>deleteDuplicates<span style="color:#f92672">(</span>ListNode p <span style="color:#f92672">=</span> 3<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
					<span style="color:#75715e">// 只剩一个节点，返回
</span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">return</span> 3
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">return</span> 2
			<span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">deleteDuplicates</span><span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">==</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode x <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>x <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">==</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            x <span style="color:#f92672">=</span> x<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> deleteDuplicates<span style="color:#f92672">(</span>x<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> deleteDuplicates<span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>方法2</strong></p>
<p>p1 是待删除的上一个节点，每次循环对比 p2、p3 的值</p>
<ul>
<li>如果 p2 与 p3 的值重复，那么 p3 继续后移，直到找到与 p2 不重复的节点，p1 指向 p3 完成删除</li>
<li>如果 p2 与 p3 的值不重复，p1，p2，p3 向后平移一位，继续上面的操作</li>
<li>p2 或 p3 为 null 退出循环
<ul>
<li>p2 为 null 的情况，比如链表为 1 1 1 null</li>
</ul>
</li>
</ul>
<pre><code>p1 p2 p3
s, 1, 1, 1, 2, 3, null

p1 p2    p3
s, 1, 1, 1, 2, 3, null

p1 p2       p3
s, 1, 1, 1, 2, 3, null

p1 p3
s, 2, 3, null

p1 p2 p3
s, 2, 3, null

   p1 p2 p3
s, 2, 3, null
</code></pre><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">deleteDuplicates</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    ListNode s <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">,</span> head<span style="color:#f92672">);</span>
    ListNode p1 <span style="color:#f92672">=</span> s<span style="color:#f92672">;</span>
    ListNode p2<span style="color:#f92672">;</span>
    ListNode p3<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>p2 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>p3 <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p2<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">==</span> p3<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>p3 <span style="color:#f92672">=</span> p3<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> 
                   <span style="color:#f92672">&amp;&amp;</span> p3<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">==</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#f92672">}</span>
            p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p3<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e06-合并有序链表-力扣-21-题">
  E06. 合并有序链表-力扣 21 题
  <a class="anchor" href="#e06-%e5%90%88%e5%b9%b6%e6%9c%89%e5%ba%8f%e9%93%be%e8%a1%a8-%e5%8a%9b%e6%89%a3-21-%e9%a2%98">#</a>
</h3>
<p>例</p>
<pre><code>输入：l1 = [1,2,4], l2 = [1,3,4]
输出：[1,1,2,3,4,4]
    
输入：l1 = [], l2 = []
输出：[]

输入：l1 = [], l2 = [0]
输出：[0]
</code></pre><p><strong>方法1</strong></p>
<ul>
<li>谁小，把谁链给 p，p 和小的都向后平移一位</li>
<li>当 p1、p2 有一个为 null，退出循环，把不为 null 的链给 p</li>
</ul>
<pre><code>p1
1	3	8	9	null

p2
2	4	null

p		
s	null
</code></pre><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">mergeTwoLists</span><span style="color:#f92672">(</span>ListNode p1<span style="color:#f92672">,</span> ListNode p2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode s <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    ListNode p <span style="color:#f92672">=</span> s<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p1 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> p2 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p1<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p1<span style="color:#f92672">;</span>
            p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p2<span style="color:#f92672">;</span>
            p2 <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p1 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p2 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p2<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>可以自行验证<strong>例</strong>中后两种情况</li>
</ul>
<p><strong>方法2</strong></p>
<p>递归函数应该返回</p>
<ul>
<li>更小的那个链表节点，并把它剩余节点与另一个链表再次递归</li>
<li>返回之前，更新此节点的 next</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">mergeTwoLists<span style="color:#f92672">(</span>p1<span style="color:#f92672">=[</span>1<span style="color:#f92672">,</span>3<span style="color:#f92672">,</span>8<span style="color:#f92672">,</span>9<span style="color:#f92672">],</span> p2<span style="color:#f92672">=[</span>2<span style="color:#f92672">,</span>4<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
    1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>mergeTwoLists<span style="color:#f92672">(</span>p1<span style="color:#f92672">=[</span>3<span style="color:#f92672">,</span>8<span style="color:#f92672">,</span>9<span style="color:#f92672">],</span> p2<span style="color:#f92672">=[</span>2<span style="color:#f92672">,</span>4<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
        2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>mergeTwoLists<span style="color:#f92672">(</span>p1<span style="color:#f92672">=[</span>3<span style="color:#f92672">,</span>8<span style="color:#f92672">,</span>9<span style="color:#f92672">],</span> p2<span style="color:#f92672">=[</span>4<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>            
            3<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>mergeTwoLists<span style="color:#f92672">(</span>p1<span style="color:#f92672">=[</span>8<span style="color:#f92672">,</span>9<span style="color:#f92672">],</span> p2<span style="color:#f92672">=[</span>4<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                4<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">=</span>mergeTwoLists<span style="color:#f92672">(</span>p1<span style="color:#f92672">=[</span>8<span style="color:#f92672">,</span>9<span style="color:#f92672">],</span> p2<span style="color:#f92672">=</span><span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">return</span> <span style="color:#f92672">[</span>8<span style="color:#f92672">,</span>9<span style="color:#f92672">]</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">return</span> 4
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">return</span> 3
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> 2
    <span style="color:#f92672">}</span>
	<span style="color:#66d9ef">return</span> 1
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e07-合并多个有序链表-力扣-23-题">
  E07. 合并多个有序链表-力扣 23 题
  <a class="anchor" href="#e07-%e5%90%88%e5%b9%b6%e5%a4%9a%e4%b8%aa%e6%9c%89%e5%ba%8f%e9%93%be%e8%a1%a8-%e5%8a%9b%e6%89%a3-23-%e9%a2%98">#</a>
</h3>
<p>例</p>
<pre><code>输入：lists = [[1,4,5],[1,3,4],[2,6]]
输出：[1,1,2,3,4,4,5,6]
解释：链表数组如下：
[
  1-&gt;4-&gt;5,
  1-&gt;3-&gt;4,
  2-&gt;6
]
将它们合并到一个有序链表中得到。
1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6
</code></pre><p><strong>方法1</strong></p>
<p>递归</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">mergeKLists</span><span style="color:#f92672">(</span>ListNode<span style="color:#f92672">[]</span> lists<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>lists<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> merge<span style="color:#f92672">(</span>lists<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> lists<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">split</span><span style="color:#f92672">(</span>ListNode<span style="color:#f92672">[]</span> lists<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> j<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">==</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> lists<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> mergeTwoLists<span style="color:#f92672">(</span>
        split<span style="color:#f92672">(</span>lists<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> m<span style="color:#f92672">),</span>
        split<span style="color:#f92672">(</span>lists<span style="color:#f92672">,</span> m <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> j<span style="color:#f92672">)</span>
    <span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>还可以用优先级队列求解，这个放在后面讲</p>
<h3 id="e08-查找链表中间节点-力扣-876-题">
  E08. 查找链表中间节点-力扣 876 题
  <a class="anchor" href="#e08-%e6%9f%a5%e6%89%be%e9%93%be%e8%a1%a8%e4%b8%ad%e9%97%b4%e8%8a%82%e7%82%b9-%e5%8a%9b%e6%89%a3-876-%e9%a2%98">#</a>
</h3>
<p>例如</p>
<pre><code>输入：[1,2,3,4,5]
输出：此列表中的结点 3 (序列化形式：[3,4,5])

输入：[1,2,3,4,5,6]
输出：此列表中的结点 4 (序列化形式：[4,5,6])
</code></pre><ul>
<li><strong>偶数</strong>节点时，中间点是靠右的那个</li>
</ul>
<p>解法：快慢指针，快指针一次走两步，慢指针一次走一步，当快指针到链表结尾时，慢指针恰好走到链表的一半</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">middleNode</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode p1 <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>	<span style="color:#75715e">// 慢指针，中间点
</span><span style="color:#75715e"></span>    ListNode p2 <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>	<span style="color:#75715e">// 快指针
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p2 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        p2 <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        p2 <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> p1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e09-回文链表-力扣-234-题">
  E09. 回文链表-力扣 234 题
  <a class="anchor" href="#e09-%e5%9b%9e%e6%96%87%e9%93%be%e8%a1%a8-%e5%8a%9b%e6%89%a3-234-%e9%a2%98">#</a>
</h3>
<p>所谓回文指正着读、反着读，结果一样，例如</p>
<pre><code>[1,2,2,1]
[1,2,3,2,1]
</code></pre><p>它们都是回文链表，不是回文的例子</p>
<pre><code>[1,2,3,1]  --反过来--&gt;  [1,3,2,1]
</code></pre><p>解法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/*
</span><span style="color:#75715e">    步骤1. 找中间点
</span><span style="color:#75715e">    步骤2. 中间点后半个链表反转
</span><span style="color:#75715e">    步骤3. 反转后链表与原链表逐一比较
</span><span style="color:#75715e">*/</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isPalindrome</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode middle <span style="color:#f92672">=</span> middle<span style="color:#f92672">(</span>head<span style="color:#f92672">);</span>
    ListNode newHead <span style="color:#f92672">=</span> reverse<span style="color:#f92672">(</span>middle<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>newHead <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>newHead<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">!=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        newHead <span style="color:#f92672">=</span> newHead<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        head <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> ListNode <span style="color:#a6e22e">reverse</span><span style="color:#f92672">(</span>ListNode o1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode n1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>o1 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode o2 <span style="color:#f92672">=</span> o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> n1<span style="color:#f92672">;</span>
        n1 <span style="color:#f92672">=</span> o1<span style="color:#f92672">;</span>
        o1 <span style="color:#f92672">=</span> o2<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> n1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> ListNode <span style="color:#a6e22e">middle</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode p1 <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span> <span style="color:#75715e">// 慢
</span><span style="color:#75715e"></span>    ListNode p2 <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span> <span style="color:#75715e">// 快
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p2 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        p2 <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> p1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>优化后解法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isPalindrome</span><span style="color:#f92672">(</span>ListNode h1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>h1 <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> h1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    ListNode p1 <span style="color:#f92672">=</span> h1<span style="color:#f92672">;</span> 	<span style="color:#75715e">// 慢指针，中间点
</span><span style="color:#75715e"></span>    ListNode p2 <span style="color:#f92672">=</span> h1<span style="color:#f92672">;</span> 	<span style="color:#75715e">// 快指针
</span><span style="color:#75715e"></span>    ListNode n1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>	<span style="color:#75715e">// 新头
</span><span style="color:#75715e"></span>    ListNode o1 <span style="color:#f92672">=</span> h1<span style="color:#f92672">;</span>	<span style="color:#75715e">// 旧头
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 快慢指针找中间点
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p2 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        p2 <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

        <span style="color:#75715e">// 反转前半部分
</span><span style="color:#75715e"></span>        o1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> n1<span style="color:#f92672">;</span>
        n1 <span style="color:#f92672">=</span> o1<span style="color:#f92672">;</span>
        o1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p2 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 节点数为奇数
</span><span style="color:#75715e"></span>        p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 同步比较新头和后半部分
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>n1 <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n1<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">!=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        n1 <span style="color:#f92672">=</span> n1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e10-环形链表-力扣-141-题">
  E10. 环形链表-力扣 141 题
  <a class="anchor" href="#e10-%e7%8e%af%e5%bd%a2%e9%93%be%e8%a1%a8-%e5%8a%9b%e6%89%a3-141-%e9%a2%98">#</a>
</h3>
<p>本题以及下题，实际是 Floyd&rsquo;s Tortoise and Hare Algorithm （Floyd 龟兔赛跑算法）<sup id="fnref:15"><a href="#fn:15" class="footnote-ref" role="doc-noteref">15</a></sup></p>
<blockquote>
<p>除了 Floyd 判环算法外，还有其它的判环算法，详见 <a href="https://en.wikipedia.org/wiki/Cycle_detection">https://en.wikipedia.org/wiki/Cycle_detection</a></p>
</blockquote>
<p><img src="../imgs/image-20221229190646563.png" alt="image-20221229190646563" style="zoom: 50%;" /></p>
<p>如果链表上存在环，那么在环上以不同速度前进的两个指针必定会在某个时刻相遇。算法分为两个阶段</p>
<p>阶段1</p>
<ul>
<li>龟一次走一步，兔子一次走两步</li>
<li>当兔子能走到终点时，不存在环</li>
<li>当兔子能追上龟时，可以判断存在环</li>
</ul>
<p>阶段2</p>
<ul>
<li>从它们第一次相遇开始，龟回到起点，兔子保持原位不变</li>
<li>龟和兔子一次都走一步</li>
<li>当再次相遇时，地点就是环的入口</li>
</ul>
<p>为什么呢？</p>
<ul>
<li>设起点到入口走 a 步（本例是 7），绕环一圈长度为 b（本例是 5），</li>
<li>那么<strong>从起点开始，走 a + 绕环 n 圈，都能找到环入口</strong></li>
<li>第一次相遇时
<ul>
<li>兔走了 a + 绕环 n 圈（本例 2 圈） + k，k 是它们相遇距环入口位置（本例 3，不重要）</li>
<li>龟走了 a + 绕环 n 圈（本例 0 圈） + k，当然它绕的圈数比兔少</li>
<li>兔走的距离是龟的两倍，所以<strong>龟走的</strong> = 兔走的 - 龟走的 = <strong>绕环 n 圈</strong></li>
</ul>
</li>
<li>而前面分析过，如果走 a + 绕环 n 圈，都能找到环入口，因此从相遇点开始，再走 a 步，就是环入口</li>
</ul>
<p>阶段1 参考代码（判断是否有环）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasCycle</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode h <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span> <span style="color:#75715e">// 兔
</span><span style="color:#75715e"></span>    ListNode t <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span> <span style="color:#75715e">// 龟
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>h <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> h<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        t <span style="color:#f92672">=</span> t<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        h <span style="color:#f92672">=</span> h<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>h <span style="color:#f92672">==</span> t<span style="color:#f92672">){</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e11-环形链表-力扣-142-题">
  E11. 环形链表-力扣 142 题
  <a class="anchor" href="#e11-%e7%8e%af%e5%bd%a2%e9%93%be%e8%a1%a8-%e5%8a%9b%e6%89%a3-142-%e9%a2%98">#</a>
</h3>
<p>阶段2 参考代码（找到环入口）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">detectCycle</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode t <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span> <span style="color:#75715e">// 龟
</span><span style="color:#75715e"></span>    ListNode h <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span> <span style="color:#75715e">// 兔
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>h <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> h<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        t <span style="color:#f92672">=</span> t<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        h <span style="color:#f92672">=</span> h<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>h <span style="color:#f92672">==</span> t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            t <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>h <span style="color:#f92672">==</span> t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">return</span> h<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                h <span style="color:#f92672">=</span> h<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                t <span style="color:#f92672">=</span> t<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>还有一道扩展题目，也可以用判环算法思想来解：就是 287 题，寻找重复数</li>
</ul>
<h3 id="ex1-删除节点-力扣-237-题">
  Ex1. 删除节点-力扣 237 题
  <a class="anchor" href="#ex1-%e5%88%a0%e9%99%a4%e8%8a%82%e7%82%b9-%e5%8a%9b%e6%89%a3-237-%e9%a2%98">#</a>
</h3>
<p>这道题目比较简单，留给大家自己练习</p>
<p>例如</p>
<pre><code>输入：head = [4,5,1,9], node = 5
输出：[4,1,9]


输入：head = [4,5,1,9], node = 1
输出：[4,5,9]
</code></pre><p>注意：被删除的节点<strong>不是</strong>末尾节点</p>
<p><strong>参考答案</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Ex1Leetcode237</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">/**
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param node 待删除节点, 题目已说明肯定不是最后一个节点
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">deleteNode</span><span style="color:#f92672">(</span>ListNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">;</span>		<span style="color:#75715e">// 下一个节点值赋值给待&#34;删除&#34;节点
</span><span style="color:#75715e"></span>        node<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>		<span style="color:#75715e">// 把下一个节点删除
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode o5 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>5<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
        ListNode o4 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>4<span style="color:#f92672">,</span> o5<span style="color:#f92672">);</span>
        ListNode o3 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>3<span style="color:#f92672">,</span> o4<span style="color:#f92672">);</span>
        ListNode o2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>2<span style="color:#f92672">,</span> o3<span style="color:#f92672">);</span>
        ListNode o1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> o2<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>o1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">new</span> E0xLeetcode237<span style="color:#f92672">().</span><span style="color:#a6e22e">deleteNode</span><span style="color:#f92672">(</span>o3<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>o1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>输出</p>
<pre><code>[1,2,3,4,5]
[1,2,4,5]
</code></pre><h3 id="ex2-共尾链表-力扣-160-题">
  Ex2. 共尾链表-力扣 160 题
  <a class="anchor" href="#ex2-%e5%85%b1%e5%b0%be%e9%93%be%e8%a1%a8-%e5%8a%9b%e6%89%a3-160-%e9%a2%98">#</a>
</h3>
<p>原题叫做<strong>相交</strong>链表，个人觉得用<strong>共尾</strong>链表更形象些，此题更像是一道脑筋急转弯，留给大家练习</p>
<p>例如，下图的两个链表 [1, 2, 4, 5] 与 [3, 4, 5] 它们中 [4, 5] 是相同的，此时应返回节点 4</p>
<p><img src="../imgs/image-20221228081715799.png" alt="image-20221228081715799" /></p>
<p>非共尾的情况，如下图所示，此时返回 null</p>
<p><img src="../imgs/image-20221228082002730.png" alt="image-20221228082002730" /></p>
<p>思路，称两个链表为 a=[1, 2, 4, 5]，b=[3, 4, 5]，图中用 N 代表 null</p>
<ol>
<li>遍历 a，遇到 null 时改道遍历 b</li>
<li>与此同时，遍历 b，遇到 null 时改道遍历 a</li>
<li>在此过程中，如果<strong>遇到相同</strong>的节点，即为找寻目标，返回即可，如下图中的第二次出现的 4</li>
<li>相同节点应该比较其<strong>引用值</strong>，图中数字只是为了便于区分</li>
</ol>
<pre><code>1	2	4	5	N	3	4	5	N
3	4	5	N	1	2	4	5	N
</code></pre><p>如果两个链表长度相同，则可以更早找到目标，例如 a=[1, 4, 5]，b=[3, 4, 5]，第一次出现 4 时，即可返回</p>
<pre><code>1	4	5	N	3	4	5	N
3	4	5	N	1	4	5	N
</code></pre><p>如果是非共尾的情况，如 a=[1, 2, 4]，b=[3, 5]，可以看到，唯一相等的情况，是遍历到最后那个 N 此时退出循环</p>
<pre><code>1	2	4	N	3	5	N
3	5	N	1	2	4	N
</code></pre><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">getIntersectionNode</span><span style="color:#f92672">(</span>ListNode a<span style="color:#f92672">,</span> ListNode b<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode p1 <span style="color:#f92672">=</span> a<span style="color:#f92672">;</span>
    ListNode p2 <span style="color:#f92672">=</span> b<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p1 <span style="color:#f92672">==</span> p2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> p1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p1 <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            p1 <span style="color:#f92672">=</span> b<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            p1 <span style="color:#f92672">=</span> p1<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p2 <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            p2 <span style="color:#f92672">=</span> a<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            p2 <span style="color:#f92672">=</span> p2<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>            
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="36-数组">
  3.6 数组
  <a class="anchor" href="#36-%e6%95%b0%e7%bb%84">#</a>
</h2>
<h3 id="e01-合并有序数组">
  E01. 合并有序数组
  <a class="anchor" href="#e01-%e5%90%88%e5%b9%b6%e6%9c%89%e5%ba%8f%e6%95%b0%e7%bb%84">#</a>
</h3>
<p>将数组内两个区间内的有序元素合并</p>
<p>例</p>
<pre><code>[1, 5, 6, 2, 4, 10, 11]
</code></pre><p>可以视作两个有序区间</p>
<pre><code>[1, 5, 6] 和 [2, 4, 10, 11]
</code></pre><p>合并后，结果仍存储于原有空间</p>
<pre><code>[1, 2, 4, 5, 6, 10, 11]
</code></pre><p><strong>方法1</strong></p>
<p>递归</p>
<ul>
<li>每次递归把更小的元素复制到结果数组</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">merge<span style="color:#f92672">(</span>left<span style="color:#f92672">=[</span>1<span style="color:#f92672">,</span>5<span style="color:#f92672">,</span>6<span style="color:#f92672">],</span>right<span style="color:#f92672">=[</span>2<span style="color:#f92672">,</span>4<span style="color:#f92672">,</span>10<span style="color:#f92672">,</span>11<span style="color:#f92672">],</span>a2<span style="color:#f92672">=[]){</span>
    merge<span style="color:#f92672">(</span>left<span style="color:#f92672">=[</span>5<span style="color:#f92672">,</span>6<span style="color:#f92672">],</span>right<span style="color:#f92672">=[</span>2<span style="color:#f92672">,</span>4<span style="color:#f92672">,</span>10<span style="color:#f92672">,</span>11<span style="color:#f92672">],</span>a2<span style="color:#f92672">=[</span>1<span style="color:#f92672">]){</span>
        merge<span style="color:#f92672">(</span>left<span style="color:#f92672">=[</span>5<span style="color:#f92672">,</span>6<span style="color:#f92672">],</span>right<span style="color:#f92672">=[</span>4<span style="color:#f92672">,</span>10<span style="color:#f92672">,</span>11<span style="color:#f92672">],</span>a2<span style="color:#f92672">=[</span>1<span style="color:#f92672">,</span>2<span style="color:#f92672">]){</span>
            merge<span style="color:#f92672">(</span>left<span style="color:#f92672">=[</span>5<span style="color:#f92672">,</span>6<span style="color:#f92672">],</span>right<span style="color:#f92672">=[</span>10<span style="color:#f92672">,</span>11<span style="color:#f92672">],</span>a2<span style="color:#f92672">=[</span>1<span style="color:#f92672">,</span>2<span style="color:#f92672">,</span>4<span style="color:#f92672">]){</span>
                merge<span style="color:#f92672">(</span>left<span style="color:#f92672">=[</span>6<span style="color:#f92672">],</span>right<span style="color:#f92672">=[</span>10<span style="color:#f92672">,</span>11<span style="color:#f92672">],</span>a2<span style="color:#f92672">=[</span>1<span style="color:#f92672">,</span>2<span style="color:#f92672">,</span>4<span style="color:#f92672">,</span>5<span style="color:#f92672">]){</span>
                    merge<span style="color:#f92672">(</span>left<span style="color:#f92672">=[],</span>right<span style="color:#f92672">=[</span>10<span style="color:#f92672">,</span>11<span style="color:#f92672">],</span>a2<span style="color:#f92672">=[</span>1<span style="color:#f92672">,</span>2<span style="color:#f92672">,</span>4<span style="color:#f92672">,</span>5<span style="color:#f92672">,</span>6<span style="color:#f92672">]){</span>
						<span style="color:#75715e">// 拷贝10，11
</span><span style="color:#75715e"></span>                    <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">merge</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> iEnd<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> jEnd<span style="color:#f92672">,</span>
                              <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;</span> iEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> j<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> jEnd <span style="color:#f92672">-</span> j <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">&gt;</span> jEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> iEnd <span style="color:#f92672">-</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a1<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
        a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        merge<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> iEnd<span style="color:#f92672">,</span> j<span style="color:#f92672">,</span> jEnd<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        merge<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> iEnd<span style="color:#f92672">,</span> j <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> jEnd<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>测试</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1 <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>1<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 10<span style="color:#f92672">,</span> 11<span style="color:#f92672">};</span>
<span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>a1<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
merge<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> 0<span style="color:#f92672">);</span>
</code></pre></div><p><strong>方法2</strong></p>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">merge</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> iEnd<span style="color:#f92672">,</span>
                             <span style="color:#66d9ef">int</span> j<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> jEnd<span style="color:#f92672">,</span>
                             <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;=</span> iEnd <span style="color:#f92672">&amp;&amp;</span> j <span style="color:#f92672">&lt;=</span> jEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a1<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
            i<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            a2<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> a1<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
            j<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
        k<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;</span> iEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> j<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> jEnd <span style="color:#f92672">-</span> j <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>j <span style="color:#f92672">&gt;</span> jEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> a2<span style="color:#f92672">,</span> k<span style="color:#f92672">,</span> iEnd <span style="color:#f92672">-</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>测试</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a1 <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>1<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 10<span style="color:#f92672">,</span> 11<span style="color:#f92672">};</span>
<span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>a3<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
merge<span style="color:#f92672">(</span>a1<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> a2<span style="color:#f92672">);</span>
</code></pre></div><h2 id="37-队列">
  3.7 队列
  <a class="anchor" href="#37-%e9%98%9f%e5%88%97">#</a>
</h2>
<h3 id="e01-二叉树层序遍历-力扣-102-题">
  E01. 二叉树层序遍历-力扣 102 题
  <a class="anchor" href="#e01-%e4%ba%8c%e5%8f%89%e6%a0%91%e5%b1%82%e5%ba%8f%e9%81%8d%e5%8e%86-%e5%8a%9b%e6%89%a3-102-%e9%a2%98">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">levelOrder</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>root <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        LinkedListQueue<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedListQueue<span style="color:#f92672">&lt;&gt;();</span>
        queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">int</span> c1 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>		<span style="color:#75715e">// 本层节点个数
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>queue<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> c2 <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> 	<span style="color:#75715e">// 下层节点个数
</span><span style="color:#75715e"></span>            List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> level <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> c1<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
                TreeNode node <span style="color:#f92672">=</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
                level<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">);</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
                    c2<span style="color:#f92672">++;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
                    c2<span style="color:#f92672">++;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            c1 <span style="color:#f92672">=</span> c2<span style="color:#f92672">;</span>
            result<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>level<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 自定义队列
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LinkedListQueue</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
            E value<span style="color:#f92672">;</span>
            Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> next<span style="color:#f92672">;</span>

            <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">,</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> next<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> head <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;&gt;(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">private</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> tail <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> capacity <span style="color:#f92672">=</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">MAX_VALUE</span><span style="color:#f92672">;</span>

        <span style="color:#f92672">{</span>
            tail<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">LinkedListQueue</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">LinkedListQueue</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">capacity</span> <span style="color:#f92672">=</span> capacity<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> added <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;&gt;(</span>value<span style="color:#f92672">,</span> head<span style="color:#f92672">);</span>
            tail<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
            tail <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
            size<span style="color:#f92672">++;</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> first <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> first<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>first <span style="color:#f92672">==</span> tail<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                tail <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            size<span style="color:#f92672">--;</span>
            <span style="color:#66d9ef">return</span> first<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">return</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> head <span style="color:#f92672">==</span> tail<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> capacity<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="ex1-设计队列-力扣-622-题">
  Ex1. 设计队列-力扣 622 题
  <a class="anchor" href="#ex1-%e8%ae%be%e8%ae%a1%e9%98%9f%e5%88%97-%e5%8a%9b%e6%89%a3-622-%e9%a2%98">#</a>
</h3>
<p>由于与课堂例题差别不大，这里只给出参考解答</p>
<p>基于链表的实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Ex1Leetcode622</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> value<span style="color:#f92672">;</span>
        Node next<span style="color:#f92672">;</span>
        Node<span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">,</span> Node next<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Node head <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(-</span>1<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">private</span> Node tail <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> capacity <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

    <span style="color:#f92672">{</span>
        tail<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Ex1Leetcode622</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">capacity</span> <span style="color:#f92672">=</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">enQueue</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node added <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> head<span style="color:#f92672">);</span>
        tail<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
        tail <span style="color:#f92672">=</span> added<span style="color:#f92672">;</span>
        size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">deQueue</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Node first <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> first<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>first <span style="color:#f92672">==</span> tail<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            tail <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        size<span style="color:#f92672">--;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">Front</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">Rear</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> tail<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head <span style="color:#f92672">==</span> tail<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>注意：</p>
<ul>
<li>Leetcode 的实现里 deQueue（出队）返回值是布尔值，并不会返回队头元素</li>
<li>它期望用法是先用 Front 返回对头元素，再 deQueue 出队</li>
</ul>
<h2 id="38-栈">
  3.8 栈
  <a class="anchor" href="#38-%e6%a0%88">#</a>
</h2>
<h3 id="e01-有效的括号-力扣-20-题">
  E01. 有效的括号-力扣 20 题
  <a class="anchor" href="#e01-%e6%9c%89%e6%95%88%e7%9a%84%e6%8b%ac%e5%8f%b7-%e5%8a%9b%e6%89%a3-20-%e9%a2%98">#</a>
</h3>
<p>一个字符串中可能出现 <code>[]</code> <code>()</code> 和 <code>{}</code> 三种括号，判断该括号是否有效</p>
<p>有效的例子</p>
<pre><code>()[]{}

([{}])

()
</code></pre><p>无效的例子</p>
<pre><code>[)

([)]

([]
</code></pre><p>思路</p>
<ul>
<li>遇到左括号, 把要配对的右括号放入栈顶</li>
<li>遇到右括号, 若此时栈为空, 返回 false，否则把它与栈顶元素对比
<ul>
<li>若相等, 栈顶元素弹出, 继续对比下一组</li>
<li>若不等, 无效括号直接返回 false</li>
</ul>
</li>
<li>循环结束
<ul>
<li>若栈为空, 表示所有括号都配上对, 返回 true</li>
<li>若栈不为空, 表示右没配对的括号, 应返回 false</li>
</ul>
</li>
</ul>
<p>答案（用到了课堂案例中的 ArrayStack 类）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isValid</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ArrayStack<span style="color:#f92672">&lt;</span>Character<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayStack<span style="color:#f92672">&lt;&gt;(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">/</span> 2 <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">char</span> c <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;)&#39;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;[&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;]&#39;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;{&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> c<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e02-后缀表达式求值-力扣-120-题">
  E02. 后缀表达式求值-力扣 120 题
  <a class="anchor" href="#e02-%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e6%b1%82%e5%80%bc-%e5%8a%9b%e6%89%a3-120-%e9%a2%98">#</a>
</h3>
<p>后缀表达式也称为逆波兰表达式，即运算符写在后面</p>
<ul>
<li>从左向右进行计算</li>
<li>不必考虑运算符优先级，即不用包含括号</li>
</ul>
<p>示例</p>
<pre><code>输入：tokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;]
输出：9
即：(2 + 1) * 3

输入：tokens = [&quot;4&quot;,&quot;13&quot;,&quot;5&quot;,&quot;/&quot;,&quot;+&quot;]
输出：6
即：4 + (13 / 5)
</code></pre><p>题目假设</p>
<ul>
<li>数字都视为整数</li>
<li>数字和运算符个数给定正确，不会有除零发生</li>
</ul>
<p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">evalRPN</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> tokens<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    LinkedList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> numbers <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String t <span style="color:#f92672">:</span> tokens<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;+&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                Integer b <span style="color:#f92672">=</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                Integer a <span style="color:#f92672">=</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>a <span style="color:#f92672">+</span> b<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                Integer b <span style="color:#f92672">=</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                Integer a <span style="color:#f92672">=</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>a <span style="color:#f92672">-</span> b<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;*&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                Integer b <span style="color:#f92672">=</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                Integer a <span style="color:#f92672">=</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>a <span style="color:#f92672">*</span> b<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;/&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                Integer b <span style="color:#f92672">=</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                Integer a <span style="color:#f92672">=</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>a <span style="color:#f92672">/</span> b<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">default</span> <span style="color:#f92672">-&gt;</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">parseInt</span><span style="color:#f92672">(</span>t<span style="color:#f92672">));</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e03-中缀表达式转后缀">
  E03. 中缀表达式转后缀
  <a class="anchor" href="#e03-%e4%b8%ad%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e8%bd%ac%e5%90%8e%e7%bc%80">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E03InfixToSuffix</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">/*
</span><span style="color:#75715e">        思路
</span><span style="color:#75715e">        1. 遇到数字, 拼串
</span><span style="color:#75715e">        2. 遇到 + - * /
</span><span style="color:#75715e">            - 优先级高于栈顶运算符 入栈
</span><span style="color:#75715e">            - 否则将栈中高级或平级运算符出栈拼串, 本运算符入栈
</span><span style="color:#75715e">        3. 遍历完成, 栈中剩余运算符出栈拼串
</span><span style="color:#75715e">            - 先出栈,意味着优先运算
</span><span style="color:#75715e">        4. 带 ()
</span><span style="color:#75715e">            - 左括号直接入栈
</span><span style="color:#75715e">            - 右括号要将栈中直至左括号为止的运算符出栈拼串
</span><span style="color:#75715e">
</span><span style="color:#75715e">        |   |
</span><span style="color:#75715e">        |   |
</span><span style="color:#75715e">        |   |
</span><span style="color:#75715e">        _____
</span><span style="color:#75715e">
</span><span style="color:#75715e">        a+b
</span><span style="color:#75715e">        a+b-c
</span><span style="color:#75715e">        a+b*c
</span><span style="color:#75715e">        a*b+c
</span><span style="color:#75715e">        (a+b)*c
</span><span style="color:#75715e">
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>infixToSuffix<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;a+b&#34;</span><span style="color:#f92672">));</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>infixToSuffix<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;a+b-c&#34;</span><span style="color:#f92672">));</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>infixToSuffix<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;a+b*c&#34;</span><span style="color:#f92672">));</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>infixToSuffix<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;a*b-c&#34;</span><span style="color:#f92672">));</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>infixToSuffix<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;(a+b)*c&#34;</span><span style="color:#f92672">));</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>infixToSuffix<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;a+b*c+(d*e+f)*g&#34;</span><span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">infixToSuffix</span><span style="color:#f92672">(</span>String exp<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        LinkedList<span style="color:#f92672">&lt;</span>Character<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
        StringBuilder sb <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringBuilder<span style="color:#f92672">(</span>exp<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">());</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> exp<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">char</span> c <span style="color:#f92672">=</span> exp<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;/&#39;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                        stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
                    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>priority<span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;</span> priority<span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()))</span> <span style="color:#f92672">{</span>
                            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
                        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> 
                                   <span style="color:#f92672">&amp;&amp;</span> priority<span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">())</span> <span style="color:#f92672">&gt;=</span> priority<span style="color:#f92672">(</span>c<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                                sb<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">());</span>
                            <span style="color:#f92672">}</span>
                            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
                        <span style="color:#f92672">}</span>
                    <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;)&#39;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;(&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                        sb<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">());</span>
                    <span style="color:#f92672">}</span>
                    stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">default</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
                    sb<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            sb<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">());</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> sb<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">priority</span><span style="color:#f92672">(</span><span style="color:#66d9ef">char</span> c<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#f92672">-&gt;</span> 0<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;/&#39;</span> <span style="color:#f92672">-&gt;</span> 2<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">-&gt;</span> 1<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">default</span> <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;不合法字符:&#34;</span> <span style="color:#f92672">+</span> c<span style="color:#f92672">);</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e04-双栈模拟队列-力扣-232-题">
  E04. 双栈模拟队列-力扣 232 题
  <a class="anchor" href="#e04-%e5%8f%8c%e6%a0%88%e6%a8%a1%e6%8b%9f%e9%98%9f%e5%88%97-%e5%8a%9b%e6%89%a3-232-%e9%a2%98">#</a>
</h3>
<p>给力扣题目用的<strong>自实现</strong>栈，可以定义为静态内部类</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayStack</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> E<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> top<span style="color:#f92672">;</span> <span style="color:#75715e">// 栈顶指针
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;all&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayStack</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">array</span> <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>top<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[--</span>top<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>top <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> top <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> top <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>参考解答，注意：题目已说明</p>
<ul>
<li>调用 push、pop 等方法的次数最多 100</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E04Leetcode232</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/*
</span><span style="color:#75715e">        队列头      队列尾
</span><span style="color:#75715e">        s1       s2
</span><span style="color:#75715e">        顶   底   底   顶
</span><span style="color:#75715e">                 abc
</span><span style="color:#75715e">
</span><span style="color:#75715e">        push(a)
</span><span style="color:#75715e">        push(b)
</span><span style="color:#75715e">        push(c)
</span><span style="color:#75715e">        pop()
</span><span style="color:#75715e">     */</span>
    ArrayStack<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> s1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayStack<span style="color:#f92672">&lt;&gt;(</span>100<span style="color:#f92672">);</span>
    ArrayStack<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> s2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayStack<span style="color:#f92672">&lt;&gt;(</span>100<span style="color:#f92672">);</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> x<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        s2<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>x<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s1<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>s2<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                s1<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>s2<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">());</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> s1<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s1<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>s2<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                s1<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>s2<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">());</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> s1<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">empty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> s1<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> s2<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e05-单队列模拟栈-力扣-225-题">
  E05. 单队列模拟栈-力扣 225 题
  <a class="anchor" href="#e05-%e5%8d%95%e9%98%9f%e5%88%97%e6%a8%a1%e6%8b%9f%e6%a0%88-%e5%8a%9b%e6%89%a3-225-%e9%a2%98">#</a>
</h3>
<p>给力扣题目用的<strong>自实现</strong>队列，可以定义为静态内部类</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayQueue3</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> E<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> head <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> tail <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

    <span style="color:#a6e22e">@SuppressWarnings</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;all&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayQueue3</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> c<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        c <span style="color:#f92672">-=</span> 1<span style="color:#f92672">;</span>
        c <span style="color:#f92672">|=</span> c <span style="color:#f92672">&gt;&gt;</span> 1<span style="color:#f92672">;</span>
        c <span style="color:#f92672">|=</span> c <span style="color:#f92672">&gt;&gt;</span> 2<span style="color:#f92672">;</span>
        c <span style="color:#f92672">|=</span> c <span style="color:#f92672">&gt;&gt;</span> 4<span style="color:#f92672">;</span>
        c <span style="color:#f92672">|=</span> c <span style="color:#f92672">&gt;&gt;</span> 8<span style="color:#f92672">;</span>
        c <span style="color:#f92672">|=</span> c <span style="color:#f92672">&gt;&gt;</span> 16<span style="color:#f92672">;</span>
        c <span style="color:#f92672">+=</span> 1<span style="color:#f92672">;</span>
        array <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>c<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isFull<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>        
        array<span style="color:#f92672">[</span>tail <span style="color:#f92672">&amp;</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">)]</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        tail<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        E value <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>head <span style="color:#f92672">&amp;</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">)];</span>
        head<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>head <span style="color:#f92672">&amp;</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">)];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head <span style="color:#f92672">==</span> tail<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> tail <span style="color:#f92672">-</span> head <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>参考解答，注意：题目已说明</p>
<ul>
<li>调用 push、pop 等方法的次数最多 100</li>
<li>每次调用 pop 和 top 都能保证栈不为空</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E05Leetcode225</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">/*
</span><span style="color:#75715e">        队列头     队列尾
</span><span style="color:#75715e">        cba
</span><span style="color:#75715e">        顶           底
</span><span style="color:#75715e">
</span><span style="color:#75715e">        queue.offer(a)
</span><span style="color:#75715e">        queue.offer(b)
</span><span style="color:#75715e">        queue.offer(c)
</span><span style="color:#75715e">     */</span>
    ArrayQueue3<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayQueue3<span style="color:#f92672">&lt;&gt;(</span>100<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> x<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>x<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>queue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">());</span>
        <span style="color:#f92672">}</span>
        size<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        size<span style="color:#f92672">--;</span>
        <span style="color:#66d9ef">return</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">top</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">empty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="39-双端队列">
  3.9 双端队列
  <a class="anchor" href="#39-%e5%8f%8c%e7%ab%af%e9%98%9f%e5%88%97">#</a>
</h2>
<h3 id="e01-二叉树-z-字层序遍历-力扣-103-题">
  E01. 二叉树 Z 字层序遍历-力扣 103 题
  <a class="anchor" href="#e01-%e4%ba%8c%e5%8f%89%e6%a0%91-z-%e5%ad%97%e5%b1%82%e5%ba%8f%e9%81%8d%e5%8e%86-%e5%8a%9b%e6%89%a3-103-%e9%a2%98">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E01Leetcode103</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">zigzagLevelOrder</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>root <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        LinkedList<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
        queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">boolean</span> leftToRight <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> c1 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>queue<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> c2 <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            LinkedList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> deque <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> c1<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
                TreeNode n <span style="color:#f92672">=</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>leftToRight<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    deque<span style="color:#f92672">.</span><span style="color:#a6e22e">offerLast</span><span style="color:#f92672">(</span>n<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    deque<span style="color:#f92672">.</span><span style="color:#a6e22e">offerFirst</span><span style="color:#f92672">(</span>n<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>n<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
                    c2<span style="color:#f92672">++;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>n<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
                    c2<span style="color:#f92672">++;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            c1 <span style="color:#f92672">=</span> c2<span style="color:#f92672">;</span>
            leftToRight <span style="color:#f92672">=</span> <span style="color:#f92672">!</span>leftToRight<span style="color:#f92672">;</span>
            result<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>deque<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        TreeNode root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>
                <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>
                        <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>4<span style="color:#f92672">),</span>
                        2<span style="color:#f92672">,</span>
                        <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>5<span style="color:#f92672">)</span>
                <span style="color:#f92672">),</span>
                1<span style="color:#f92672">,</span>
                <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>
                        <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>6<span style="color:#f92672">),</span>
                        3<span style="color:#f92672">,</span>
                        <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>7<span style="color:#f92672">)</span>
                <span style="color:#f92672">)</span>
        <span style="color:#f92672">);</span>
        List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> lists <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> E01Leetcode103<span style="color:#f92672">().</span><span style="color:#a6e22e">zigzagLevelOrder</span><span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> list <span style="color:#f92672">:</span> lists<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>list<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="ex1-设计双端队列-力扣-641-题">
  Ex1. 设计双端队列-力扣 641 题
  <a class="anchor" href="#ex1-%e8%ae%be%e8%ae%a1%e5%8f%8c%e7%ab%af%e9%98%9f%e5%88%97-%e5%8a%9b%e6%89%a3-641-%e9%a2%98">#</a>
</h3>
<p>与课堂例题也是差别不大，请参考</p>
<h2 id="310-优先级队列">
  3.10 优先级队列
  <a class="anchor" href="#310-%e4%bc%98%e5%85%88%e7%ba%a7%e9%98%9f%e5%88%97">#</a>
</h2>
<h3 id="e01-合并多个有序链表-力扣-23-题">
  E01. 合并多个有序链表-力扣 23 题
  <a class="anchor" href="#e01-%e5%90%88%e5%b9%b6%e5%a4%9a%e4%b8%aa%e6%9c%89%e5%ba%8f%e9%93%be%e8%a1%a8-%e5%8a%9b%e6%89%a3-23-%e9%a2%98">#</a>
</h3>
<p>这道题目之前解答过，现在用刚学的优先级队列来实现一下</p>
<p>题目中要从小到大排列，因此选择用小顶堆来实现，自定义小顶堆如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MinHeap</span> <span style="color:#f92672">{</span>

    ListNode<span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MinHeap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>ListNode offered<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> child <span style="color:#f92672">=</span> size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">int</span> parent <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> 2<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">&gt;</span> 0 <span style="color:#f92672">&amp;&amp;</span> offered<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">].</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">];</span>
            child <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
            parent <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> 2<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> offered<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isEmpty<span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        swap<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        size<span style="color:#f92672">--;</span>
        ListNode e <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>size<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>size<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#75715e">// help GC
</span><span style="color:#75715e"></span>
        down<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">return</span> e<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">down</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> left <span style="color:#f92672">=</span> 2 <span style="color:#f92672">*</span> parent <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> right <span style="color:#f92672">=</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>left<span style="color:#f92672">].</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>min<span style="color:#f92672">].</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            min <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>right <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>right<span style="color:#f92672">].</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>min<span style="color:#f92672">].</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            min <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>min <span style="color:#f92672">!=</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            swap<span style="color:#f92672">(</span>min<span style="color:#f92672">,</span> parent<span style="color:#f92672">);</span>
            down<span style="color:#f92672">(</span>min<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode t <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E01Leetcode23</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">mergeKLists</span><span style="color:#f92672">(</span>ListNode<span style="color:#f92672">[]</span> lists<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 1. 使用 jdk 的优先级队列实现
</span><span style="color:#75715e">//        PriorityQueue&lt;ListNode&gt; queue = new PriorityQueue&lt;&gt;(Comparator.comparingInt(a -&gt; a.val));
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// 2. 使用自定义小顶堆实现
</span><span style="color:#75715e"></span>        MinHeap queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MinHeap<span style="color:#f92672">(</span>lists<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>ListNode head <span style="color:#f92672">:</span> lists<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>head<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        ListNode s <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
        ListNode p <span style="color:#f92672">=</span> s<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>queue<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            ListNode node <span style="color:#f92672">=</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
            p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> node<span style="color:#f92672">;</span>
            p <span style="color:#f92672">=</span> node<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>提问：</p>
<ul>
<li>能否将每个链表的所有元素全部加入堆，再一个个从堆顶移除？</li>
</ul>
<p>回答：</p>
<ul>
<li>可以是可以，但对空间占用就高了，堆的一个优点就是用有限的空间做事情</li>
</ul>
<h2 id="311-堆">
  3.11 堆
  <a class="anchor" href="#311-%e5%a0%86">#</a>
</h2>
<h3 id="e01-堆排序">
  E01. 堆排序
  <a class="anchor" href="#e01-%e5%a0%86%e6%8e%92%e5%ba%8f">#</a>
</h3>
<p>算法描述</p>
<ol>
<li>heapify 建立大顶堆</li>
<li>将堆顶与堆底交换（最大元素被交换到堆底），缩小并下潜调整堆</li>
<li>重复第二步直至堆里剩一个元素</li>
</ol>
<p>可以使用之前课堂例题的大顶堆来实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>1<span style="color:#f92672">,</span> 2<span style="color:#f92672">,</span> 3<span style="color:#f92672">,</span> 4<span style="color:#f92672">,</span> 5<span style="color:#f92672">,</span> 6<span style="color:#f92672">,</span> 7<span style="color:#f92672">};</span>
MaxHeap maxHeap <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MaxHeap<span style="color:#f92672">(</span>array<span style="color:#f92672">);</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">array</span><span style="color:#f92672">));</span>

<span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span> <span style="color:#f92672">&gt;</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">--;</span>
    maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">down</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">array</span><span style="color:#f92672">));</span>
</code></pre></div><h3 id="e02-数组中第k大元素-力扣-215-题">
  E02. 数组中第K大元素-力扣 215 题
  <a class="anchor" href="#e02-%e6%95%b0%e7%bb%84%e4%b8%ad%e7%ac%ack%e5%a4%a7%e5%85%83%e7%b4%a0-%e5%8a%9b%e6%89%a3-215-%e9%a2%98">#</a>
</h3>
<p>小顶堆（可删去用不到代码）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MinHeap</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MinHeap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">heapify</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">&gt;&gt;</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> 0<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
            down<span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        swap<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        size<span style="color:#f92672">--;</span>
        down<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>size<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">poll</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        swap<span style="color:#f92672">(</span>index<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        size<span style="color:#f92672">--;</span>
        down<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>size<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> offered<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        up<span style="color:#f92672">(</span>offered<span style="color:#f92672">);</span>
        size<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">replace</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> replaced<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> replaced<span style="color:#f92672">;</span>
        down<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">up</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> offered<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> child <span style="color:#f92672">=</span> size<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> parent <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;</span> 1<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>offered <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            child <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> offered<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">down</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> left <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">&lt;&lt;</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> right <span style="color:#f92672">=</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>left<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>min<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            min <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>right <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>right<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>min<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            min <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>min <span style="color:#f92672">!=</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            swap<span style="color:#f92672">(</span>min<span style="color:#f92672">,</span> parent<span style="color:#f92672">);</span>
            down<span style="color:#f92672">(</span>min<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 交换两个索引处的元素
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>题解</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">findKthLargest</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> numbers<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    MinHeap heap <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MinHeap<span style="color:#f92672">(</span>k<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> k<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        heap<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>numbers<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> k<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> numbers<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>numbers<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> heap<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()){</span>
            heap<span style="color:#f92672">.</span><span style="color:#a6e22e">replace</span><span style="color:#f92672">(</span>numbers<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> heap<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>求数组中的第 K 大元素，使用堆并不是最佳选择，可以采用快速选择算法</p>
</blockquote>
<h3 id="e03-数据流中第k大元素-力扣-703-题">
  E03. 数据流中第K大元素-力扣 703 题
  <a class="anchor" href="#e03-%e6%95%b0%e6%8d%ae%e6%b5%81%e4%b8%ad%e7%ac%ack%e5%a4%a7%e5%85%83%e7%b4%a0-%e5%8a%9b%e6%89%a3-703-%e9%a2%98">#</a>
</h3>
<p>上题的小顶堆加一个方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MinHeap</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isFull</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>题解</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">KthLargest</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> MinHeap heap<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">KthLargest</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> k<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> nums<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        heap <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MinHeap<span style="color:#f92672">(</span>k<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            add<span style="color:#f92672">(</span>nums<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(!</span>heap<span style="color:#f92672">.</span><span style="color:#a6e22e">isFull</span><span style="color:#f92672">()){</span>
            heap<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>val<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>val <span style="color:#f92672">&gt;</span> heap<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()){</span>
            heap<span style="color:#f92672">.</span><span style="color:#a6e22e">replace</span><span style="color:#f92672">(</span>val<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> heap<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
    
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>求数据流中的第 K 大元素，使用堆最合适不过</p>
</blockquote>
<h3 id="e04-数据流的中位数-力扣-295-题">
  E04. 数据流的中位数-力扣 295 题
  <a class="anchor" href="#e04-%e6%95%b0%e6%8d%ae%e6%b5%81%e7%9a%84%e4%b8%ad%e4%bd%8d%e6%95%b0-%e5%8a%9b%e6%89%a3-295-%e9%a2%98">#</a>
</h3>
<p>可以扩容的 heap, max 用于指定是大顶堆还是小顶堆</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Heap</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">boolean</span> max<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> size<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Heap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">,</span> <span style="color:#66d9ef">boolean</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">array</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">max</span> <span style="color:#f92672">=</span> max<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 获取堆顶元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @return 堆顶元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> array<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 删除堆顶元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @return 堆顶元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> top <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        swap<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        size<span style="color:#f92672">--;</span>
        down<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> top<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 删除指定索引处元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param index 索引
</span><span style="color:#75715e">     * @return 被删除元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">poll</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> deleted <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>index<span style="color:#f92672">];</span>
        swap<span style="color:#f92672">(</span>index<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
        size<span style="color:#f92672">--;</span>
        down<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> deleted<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 替换堆顶元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param replaced 新元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">replace</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> replaced<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        array<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> replaced<span style="color:#f92672">;</span>
        down<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 堆的尾部添加元素
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param offered 新元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> offered<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">==</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            grow<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        up<span style="color:#f92672">(</span>offered<span style="color:#f92672">);</span>
        size<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">grow</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> capacity <span style="color:#f92672">=</span> size <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">&gt;&gt;</span> 1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> newArray <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span>
                newArray<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> size<span style="color:#f92672">);</span>
        array <span style="color:#f92672">=</span> newArray<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 将 offered 元素上浮: 直至 offered 小于父元素或到堆顶
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">up</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> offered<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> child <span style="color:#f92672">=</span> size<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> parent <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>child <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">/</span> 2<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">boolean</span> cmp <span style="color:#f92672">=</span> max <span style="color:#f92672">?</span> offered <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">]</span> <span style="color:#f92672">:</span> offered <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>cmp<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>parent<span style="color:#f92672">];</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            child <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        array<span style="color:#f92672">[</span>child<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> offered<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Heap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">,</span> <span style="color:#66d9ef">boolean</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">array</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">size</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">max</span> <span style="color:#f92672">=</span> max<span style="color:#f92672">;</span>
        heapify<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 建堆
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">heapify</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 如何找到最后这个非叶子节点  size / 2 - 1
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> size <span style="color:#f92672">/</span> 2 <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> 0<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
            down<span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 将 parent 索引处的元素下潜: 与两个孩子较大者交换, 直至没孩子或孩子没它大
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">down</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> left <span style="color:#f92672">=</span> parent <span style="color:#f92672">*</span> 2 <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> right <span style="color:#f92672">=</span> left <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> parent<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">?</span> array<span style="color:#f92672">[</span>left<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>min<span style="color:#f92672">]</span> <span style="color:#f92672">:</span> array<span style="color:#f92672">[</span>left<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>min<span style="color:#f92672">]))</span> <span style="color:#f92672">{</span>
            min <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>right <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>max <span style="color:#f92672">?</span> array<span style="color:#f92672">[</span>right<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>min<span style="color:#f92672">]</span> <span style="color:#f92672">:</span> array<span style="color:#f92672">[</span>right<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>min<span style="color:#f92672">]))</span> <span style="color:#f92672">{</span>
            min <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>min <span style="color:#f92672">!=</span> parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 找到了更大的孩子
</span><span style="color:#75715e"></span>            swap<span style="color:#f92672">(</span>min<span style="color:#f92672">,</span> parent<span style="color:#f92672">);</span>
            down<span style="color:#f92672">(</span>min<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 交换两个索引处的元素
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> t <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
        array<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>题解</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> Heap left <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Heap<span style="color:#f92672">(</span>10<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
<span style="color:#66d9ef">private</span> Heap right <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Heap<span style="color:#f92672">(</span>10<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> 为了保证两边数据量的平衡
</span><span style="color:#75715e"> &lt;ul&gt;
</span><span style="color:#75715e">  &lt;li&gt;两边数据一样时,加入左边&lt;/li&gt;
</span><span style="color:#75715e">  &lt;li&gt;两边数据不一样时,加入右边&lt;/li&gt;
</span><span style="color:#75715e"> &lt;/ul&gt;
</span><span style="color:#75715e"> 但是, 随便一个数能直接加入吗?
</span><span style="color:#75715e"> &lt;ul&gt;
</span><span style="color:#75715e">  &lt;li&gt;加入左边前, 应该挑右边最小的加入&lt;/li&gt;
</span><span style="color:#75715e">  &lt;li&gt;加入右边前, 应该挑左边最大的加入&lt;/li&gt;
</span><span style="color:#75715e"> &lt;/ul&gt;
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addNum</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> num<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        right<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>num<span style="color:#f92672">);</span>
        left<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>right<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">());</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        left<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>num<span style="color:#f92672">);</span>
        right<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">());</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * &lt;ul&gt;
</span><span style="color:#75715e"> *     &lt;li&gt;两边数据一致, 左右各取堆顶元素求平均&lt;/li&gt;
</span><span style="color:#75715e"> *     &lt;li&gt;左边多一个, 取左边元素&lt;/li&gt;
</span><span style="color:#75715e"> * &lt;/ul&gt;
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> <span style="color:#a6e22e">findMedian</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">())</span> <span style="color:#f92672">/</span> 2<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> left<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>本题还可以使用平衡二叉搜索树求解，不过代码比两个堆复杂</p>
</blockquote>
<h2 id="312-二叉树">
  3.12 二叉树
  <a class="anchor" href="#312-%e4%ba%8c%e5%8f%89%e6%a0%91">#</a>
</h2>
<h3 id="e04-对称二叉树-力扣-101-题">
  E04. 对称二叉树-力扣 101 题
  <a class="anchor" href="#e04-%e5%af%b9%e7%a7%b0%e4%ba%8c%e5%8f%89%e6%a0%91-%e5%8a%9b%e6%89%a3-101-%e9%a2%98">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isSymmetric</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> check<span style="color:#f92672">(</span>root<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> root<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">check</span><span style="color:#f92672">(</span>TreeNode left<span style="color:#f92672">,</span> TreeNode right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 若同时为 null
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> right <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 若有一个为 null (有上一轮筛选，另一个肯定不为 null)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> right <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">!=</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> check<span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">,</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> check<span style="color:#f92672">(</span>left<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">,</span> right<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>类似题目：Leetcode 100 题 - 相同的树</p>
<h3 id="e05-二叉树最大深度-力扣-104-题">
  E05. 二叉树最大深度-力扣 104 题
  <a class="anchor" href="#e05-%e4%ba%8c%e5%8f%89%e6%a0%91%e6%9c%80%e5%a4%a7%e6%b7%b1%e5%ba%a6-%e5%8a%9b%e6%89%a3-104-%e9%a2%98">#</a>
</h3>
<p><strong>后序遍历求解</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/*
</span><span style="color:#75715e">    思路：
</span><span style="color:#75715e">    1. 得到左子树深度, 得到右子树深度, 二者最大者加一, 就是本节点深度
</span><span style="color:#75715e">    2. 因为需要先得到左右子树深度, 很显然是后序遍历典型应用
</span><span style="color:#75715e">    3. 关于深度的定义：从根出发, 离根最远的节点总边数,
</span><span style="color:#75715e">        注意: 力扣里的深度定义要多一
</span><span style="color:#75715e">
</span><span style="color:#75715e">        深度2         深度3         深度1
</span><span style="color:#75715e">        1            1            1
</span><span style="color:#75715e">       / \          / \
</span><span style="color:#75715e">      2   3        2   3
</span><span style="color:#75715e">                        \
</span><span style="color:#75715e">                         4
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maxDepth</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span> <span style="color:#75715e">// 非力扣题目改为返回 -1
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> d1 <span style="color:#f92672">=</span> maxDepth<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> d2 <span style="color:#f92672">=</span> maxDepth<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>d1<span style="color:#f92672">,</span> d2<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>后序遍历求解-非递归</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/*
</span><span style="color:#75715e">    思路：
</span><span style="color:#75715e">    1. 使用非递归后序遍历, 栈的最大高度即为最大深度
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maxDepth</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    TreeNode curr <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>
    LinkedList<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">int</span> max <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    TreeNode pop <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>curr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>curr<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">&gt;</span> max<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                max <span style="color:#f92672">=</span> size<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            curr <span style="color:#f92672">=</span> curr<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            TreeNode peek <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>peek<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> peek<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> pop<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                pop <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                curr <span style="color:#f92672">=</span> peek<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> max<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>层序遍历求解</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/*
</span><span style="color:#75715e">    思路：
</span><span style="color:#75715e">    1. 使用层序遍历, 层数即最大深度
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maxDepth</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>root <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    Queue<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> level <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>queue<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        level<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            TreeNode node <span style="color:#f92672">=</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> level<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e06-二叉树最小深度-力扣-111-题">
  E06. 二叉树最小深度-力扣 111 题
  <a class="anchor" href="#e06-%e4%ba%8c%e5%8f%89%e6%a0%91%e6%9c%80%e5%b0%8f%e6%b7%b1%e5%ba%a6-%e5%8a%9b%e6%89%a3-111-%e9%a2%98">#</a>
</h3>
<p><strong>后序遍历求解</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">minDepth</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">int</span> d1 <span style="color:#f92672">=</span> minDepth<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> d2 <span style="color:#f92672">=</span> minDepth<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>d1 <span style="color:#f92672">==</span> 0 <span style="color:#f92672">||</span> d2 <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> d1 <span style="color:#f92672">+</span> d2 <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">min</span><span style="color:#f92672">(</span>d1<span style="color:#f92672">,</span> d2<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>相较于求最大深度，应当考虑：</p>
<ul>
<li>当右子树为 null，应当返回左子树深度加一</li>
<li>当左子树为 null，应当返回右子树深度加一</li>
</ul>
<p>上面两种情况满足时，不应该再把为 null 子树的深度 0 参与最小值比较，例如这样</p>
<pre><code>    1
   /
  2
</code></pre><ul>
<li>正确深度为 2，若把为 null 的右子树的深度 0 考虑进来，会得到错误结果 1</li>
</ul>
<pre><code>    1
     \
      3
       \
        4
</code></pre><ul>
<li>正确深度为 3，若把为 null 的左子树的深度 0 考虑进来，会得到错误结果 1</li>
</ul>
<p><strong>层序遍历求解</strong></p>
<p>遇到的第一个叶子节点所在层就是最小深度</p>
<p>例如，下面的树遇到的第一个叶子节点 3 所在的层就是最小深度，其他 4，7 等叶子节点深度更深，也更晚遇到</p>
<pre><code>     1
    / \     
   2   3
  / \
 4   5 
    /
   7 
</code></pre><p>代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">minDepth</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>root <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    Queue<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> level <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>queue<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        level<span style="color:#f92672">++;</span>
        <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            TreeNode node <span style="color:#f92672">=</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> level<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> level<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>效率会高于之前后序遍历解法，因为找到第一个叶子节点后，就无需后续的层序遍历了</p>
<h3 id="e07-翻转二叉树-力扣-226-题">
  E07. 翻转二叉树-力扣 226 题
  <a class="anchor" href="#e07-%e7%bf%bb%e8%bd%ac%e4%ba%8c%e5%8f%89%e6%a0%91-%e5%8a%9b%e6%89%a3-226-%e9%a2%98">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">invertTree</span><span style="color:#f92672">(</span>TreeNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    fn<span style="color:#f92672">(</span>root<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> root<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fn</span><span style="color:#f92672">(</span>TreeNode node<span style="color:#f92672">){</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    TreeNode t <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">;</span>
    node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">;</span>
    node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> t<span style="color:#f92672">;</span>
    fn<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span><span style="color:#f92672">);</span>
    fn<span style="color:#f92672">(</span>node<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>先交换、再递归或是先递归、再交换都可以</p>
<h3 id="e08-后缀表达式转二叉树">
  E08. 后缀表达式转二叉树
  <a class="anchor" href="#e08-%e5%90%8e%e7%bc%80%e8%a1%a8%e8%be%be%e5%bc%8f%e8%bd%ac%e4%ba%8c%e5%8f%89%e6%a0%91">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TreeNode</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> String val<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> TreeNode left<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> TreeNode right<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">TreeNode</span><span style="color:#f92672">(</span>String val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">=</span> val<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">TreeNode</span><span style="color:#f92672">(</span>TreeNode left<span style="color:#f92672">,</span> String val<span style="color:#f92672">,</span> TreeNode right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">=</span> val<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/*
</span><span style="color:#75715e">    中缀表达式           (2-1)*3
</span><span style="color:#75715e">    后缀（逆波兰）表达式   21-3*
</span><span style="color:#75715e">
</span><span style="color:#75715e">    1.遇到数字入栈
</span><span style="color:#75715e">    2.遇到运算符, 出栈两次, 与当前节点建立父子关系, 当前节点入栈
</span><span style="color:#75715e">
</span><span style="color:#75715e">    栈
</span><span style="color:#75715e">    |   |
</span><span style="color:#75715e">    |   |
</span><span style="color:#75715e">    |   |
</span><span style="color:#75715e">    _____
</span><span style="color:#75715e">
</span><span style="color:#75715e">    表达式树
</span><span style="color:#75715e">        *
</span><span style="color:#75715e">       / \
</span><span style="color:#75715e">      -   3
</span><span style="color:#75715e">     / \
</span><span style="color:#75715e">    2   1
</span><span style="color:#75715e">
</span><span style="color:#75715e">    21-3*
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">constructExpressionTree</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> tokens<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    LinkedList<span style="color:#f92672">&lt;</span>TreeNode<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String t <span style="color:#f92672">:</span> tokens<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;+&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;-&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;*&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;/&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 运算符
</span><span style="color:#75715e"></span>                TreeNode right <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                TreeNode left <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
                TreeNode parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>t<span style="color:#f92672">);</span>
                parent<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> left<span style="color:#f92672">;</span>
                parent<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> right<span style="color:#f92672">;</span>
                stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">default</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// 数字
</span><span style="color:#75715e"></span>                stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>t<span style="color:#f92672">));</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="e09-根据前序与中序遍历结果构造二叉树-力扣-105-题">
  E09. 根据前序与中序遍历结果构造二叉树-力扣 105 题
  <a class="anchor" href="#e09-%e6%a0%b9%e6%8d%ae%e5%89%8d%e5%ba%8f%e4%b8%8e%e4%b8%ad%e5%ba%8f%e9%81%8d%e5%8e%86%e7%bb%93%e6%9e%9c%e6%9e%84%e9%80%a0%e4%ba%8c%e5%8f%89%e6%a0%91-%e5%8a%9b%e6%89%a3-105-%e9%a2%98">#</a>
</h3>
<ul>
<li>先通过前序遍历结果定位根节点</li>
<li>再结合中序遍历结果切分左右子树</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">E09Leetcode105</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/*
</span><span style="color:#75715e">        preOrder = {1,2,4,3,6,7}
</span><span style="color:#75715e">        inOrder = {4,2,1,6,3,7}
</span><span style="color:#75715e">
</span><span style="color:#75715e">        根 1
</span><span style="color:#75715e">            pre         in
</span><span style="color:#75715e">        左  2,4         4,2
</span><span style="color:#75715e">        右  3,6,7       6,3,7
</span><span style="color:#75715e">
</span><span style="color:#75715e">
</span><span style="color:#75715e">        根 2
</span><span style="color:#75715e">        左 4
</span><span style="color:#75715e">
</span><span style="color:#75715e">        根 3
</span><span style="color:#75715e">        左 6
</span><span style="color:#75715e">        右 7
</span><span style="color:#75715e">     */</span>

    <span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">buildTree</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preOrder<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inOrder<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>preOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// 创建根节点
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> rootValue <span style="color:#f92672">=</span> preOrder<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
        TreeNode root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>rootValue<span style="color:#f92672">);</span>
        <span style="color:#75715e">// 区分左右子树
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>inOrder<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> rootValue<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// 0 ~ i-1 左子树
</span><span style="color:#75715e"></span>                <span style="color:#75715e">// i+1 ~ inOrder.length -1 右子树
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inLeft <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>inOrder<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span> <span style="color:#75715e">// [4,2]
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inRight <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>inOrder<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span> <span style="color:#75715e">// [6,3,7]
</span><span style="color:#75715e"></span>
                <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preLeft <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>preOrder<span style="color:#f92672">,</span> 1<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span> <span style="color:#75715e">// [2,4]
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> preRight <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>preOrder<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span> <span style="color:#75715e">// [3,6,7]
</span><span style="color:#75715e"></span>
                root<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> buildTree<span style="color:#f92672">(</span>preLeft<span style="color:#f92672">,</span> inLeft<span style="color:#f92672">);</span> <span style="color:#75715e">// 2
</span><span style="color:#75715e"></span>                root<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> buildTree<span style="color:#f92672">(</span>preRight<span style="color:#f92672">,</span> inRight<span style="color:#f92672">);</span> <span style="color:#75715e">// 3
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> root<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>代码可以进一步优化，涉及新数据结构，以后实现</li>
</ul>
<h3 id="e10-根据中序与后序遍历结果构造二叉树-力扣-106-题">
  E10. 根据中序与后序遍历结果构造二叉树-力扣 106 题
  <a class="anchor" href="#e10-%e6%a0%b9%e6%8d%ae%e4%b8%ad%e5%ba%8f%e4%b8%8e%e5%90%8e%e5%ba%8f%e9%81%8d%e5%8e%86%e7%bb%93%e6%9e%9c%e6%9e%84%e9%80%a0%e4%ba%8c%e5%8f%89%e6%a0%91-%e5%8a%9b%e6%89%a3-106-%e9%a2%98">#</a>
</h3>
<ul>
<li>先通过后序遍历结果定位根节点</li>
<li>再结合中序遍历结果切分左右子树</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> TreeNode <span style="color:#a6e22e">buildTree</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inOrder<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> postOrder<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 根
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> rootValue <span style="color:#f92672">=</span> postOrder<span style="color:#f92672">[</span>postOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
    TreeNode root <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeNode<span style="color:#f92672">(</span>rootValue<span style="color:#f92672">);</span>
    <span style="color:#75715e">// 切分左右子树
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>inOrder<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> rootValue<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inLeft <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>inOrder<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> inRight <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>inOrder<span style="color:#f92672">,</span> i <span style="color:#f92672">+</span> 1<span style="color:#f92672">,</span> inOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>

            <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> postLeft <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>postOrder<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> i<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> postRight <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>postOrder<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> postOrder<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>

            root<span style="color:#f92672">.</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> buildTree<span style="color:#f92672">(</span>inLeft<span style="color:#f92672">,</span> postLeft<span style="color:#f92672">);</span>
            root<span style="color:#f92672">.</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">=</span> buildTree<span style="color:#f92672">(</span>inRight<span style="color:#f92672">,</span> postRight<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> root<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>代码可以进一步优化，涉及新数据结构，以后实现</li>
</ul>
<h1 id="附录">
  附录
  <a class="anchor" href="#%e9%99%84%e5%bd%95">#</a>
</h1>
<h2 id="参考文章">
  参考文章
  <a class="anchor" href="#%e5%8f%82%e8%80%83%e6%96%87%e7%ab%a0">#</a>
</h2>
<h2 id="落选题目">
  落选题目
  <a class="anchor" href="#%e8%90%bd%e9%80%89%e9%a2%98%e7%9b%ae">#</a>
</h2>
<h3 id="反转字符数组">
  反转字符数组
  <a class="anchor" href="#%e5%8f%8d%e8%bd%ac%e5%ad%97%e7%ac%a6%e6%95%b0%e7%bb%84">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;abcde&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">toCharArray</span><span style="color:#f92672">();</span>
    recursion<span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>array<span style="color:#f92672">));</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">recursion</span><span style="color:#f92672">(</span><span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&gt;=</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    swap<span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span> j<span style="color:#f92672">);</span>
    recursion<span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> <span style="color:#f92672">++</span>i<span style="color:#f92672">,</span> <span style="color:#f92672">--</span>j<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> j<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">char</span> c <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    array<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
    array<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> c<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>第一次交换的是 array[0] 和 array[4]</li>
<li>第二次交换的是 array[1] 和 array[3]</li>
<li>第三次 i = j = 2，开始返回</li>
<li>如果 array.length 是偶数，则会在 i &gt; j 时返回</li>
</ul>
<h2 id="力扣高评价题目列表">
  力扣高评价题目列表
  <a class="anchor" href="#%e5%8a%9b%e6%89%a3%e9%ab%98%e8%af%84%e4%bb%b7%e9%a2%98%e7%9b%ae%e5%88%97%e8%a1%a8">#</a>
</h2>
<p>引用自 <a href="https://zhuanlan.zhihu.com/p/449686402">面试最常考的 100 道算法题分类整理！ - 知乎 (zhihu.com)</a></p>
<blockquote>
<p>带 ✔️ 是本课程讲解过的</p>
</blockquote>
<ul>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/two-sum/">1. Two Sum (两数之和)</a></strong>, Easy, 11757 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/add-two-numbers/">2. Add Two Numbers (两数相加)</a></strong>, Medium, 6524 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/longest-substring-without-repeating-characters/">3. Longest Substring Without Repeating Characters (无重复字符的最长子串)</a></strong>, Medium, 5845 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/median-of-two-sorted-arrays/">4. Median of Two Sorted Arrays (寻找两个正序数组的中位数)</a></strong>, Hard, 4303 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/longest-palindromic-substring/">5. Longest Palindromic Substring (最长回文子串)</a></strong>, Medium, 3896 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/3sum/">15. 3Sum (三数之和)</a></strong>, Medium, 3582 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/maximum-subarray/">53. Maximum Subarray (最大子序和)</a></strong>, Easy, 3533 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/reverse-integer/">7. Reverse Integer (整数反转)</a></strong>, Easy, 2970 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/container-with-most-water/">11. Container With Most Water (盛最多水的容器)</a></strong>, Medium, 2659 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/trapping-rain-water/">42. Trapping Rain Water (接雨水)</a></strong>, Hard, 2552 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/valid-parentheses/">20. Valid Parentheses (有效的括号)</a></strong>, Easy, 2544 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/regular-expression-matching/">10. Regular Expression Matching (正则表达式匹配)</a></strong>, Hard, 2273 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/remove-duplicates-from-sorted-array/">26. Remove Duplicates from Sorted Array (删除有序数组中的重复项)</a></strong>, Easy, 2146 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/single-number/">136. Single Number (只出现一次的数字)</a></strong>, Easy, 1958 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/generate-parentheses/">22. Generate Parentheses (括号生成)</a></strong>, Medium, 1946 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/reverse-linked-list/">206. Reverse Linked List (反转链表)</a></strong>, Easy, 1886 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/merge-two-sorted-lists/">21. Merge Two Sorted Lists (合并两个有序链表)</a></strong>, Easy, 1832 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/climbing-stairs/">70. Climbing Stairs (爬楼梯)</a></strong>, Easy, 1791 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/longest-increasing-subsequence/">300. Longest Increasing Subsequence (最长递增子序列)</a></strong>, Medium, 1773 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/">121. Best Time to Buy and Sell Stock (买卖股票的最佳时机)</a></strong>, Easy, 1766 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/edit-distance/">72. Edit Distance (编辑距离)</a></strong>, Hard, 1743 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/longest-common-prefix/">14. Longest Common Prefix (最长公共前缀)</a></strong>, Easy, 1707 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/house-robber/">198. House Robber (打家劫舍)</a></strong>, Medium, 1585 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/palindrome-number/">9. Palindrome Number (回文数)</a></strong>, Easy, 1568 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/lru-cache/">146. LRU Cache (LRU 缓存机制)</a></strong>, Medium, 1544 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/remove-nth-node-from-end-of-list/">19. Remove Nth Node From End of List (删除链表的倒数第 N 个结点)</a></strong>, Medium, 1494 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/search-in-rotated-sorted-array/">33. Search in Rotated Sorted Array (搜索旋转排序数组)</a></strong>, Medium, 1493 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/permutations/">46. Permutations (全排列)</a></strong>, Medium, 1484 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/symmetric-tree/">101. Symmetric Tree (对称二叉树)</a></strong>, Easy, 1483 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/largest-rectangle-in-histogram/">84. Largest Rectangle in Histogram (柱状图中最大的矩形)</a></strong>, Hard, 1472 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/combination-sum/">39. Combination Sum (组合总和)</a></strong>, Medium, 1466 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/roman-to-integer/">13. Roman to Integer (罗马数字转整数)</a></strong>, Easy, 1436 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/merge-k-sorted-lists/">23. Merge k Sorted Lists (合并K个升序链表)</a></strong>, Hard, 1436 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/letter-combinations-of-a-phone-number/">17. Letter Combinations of a Phone Number (电话号码的字母组合)</a></strong>, Medium, 1436 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/coin-change/">322. Coin Change (零钱兑换)</a></strong>, Medium, 1414 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/longest-valid-parentheses/">32. Longest Valid Parentheses (最长有效括号)</a></strong>, Hard, 1400 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/find-the-duplicate-number/">287. Find the Duplicate Number (寻找重复数)</a></strong>, Medium, 1325 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/">122. Best Time to Buy and Sell Stock II (买卖股票的最佳时机 II)</a></strong>, Easy, 1306 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/intersection-of-two-linked-lists/">160. Intersection of Two Linked Lists (相交链表)</a></strong>, Easy, 1302 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/jump-game/">55. Jump Game (跳跃游戏)</a></strong>, Medium, 1292 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/minimum-window-substring/">76. Minimum Window Substring (最小覆盖子串)</a></strong>, Hard, 1280 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/number-of-islands/">200. Number of Islands (岛屿数量)</a></strong>, Medium, 1270 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/subsets/">78. Subsets (子集)</a></strong>, Medium, 1269 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/next-permutation/">31. Next Permutation (下一个排列)</a></strong>, Medium, 1260 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/unique-binary-search-trees/">96. Unique Binary Search Trees (不同的二叉搜索树)</a></strong>, Medium, 1257 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/sort-list/">148. Sort List (排序链表)</a></strong>, Medium, 1248 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/">236. Lowest Common Ancestor of a Binary Tree (二叉树的最近公共祖先)</a></strong>, Medium, 1238 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/reverse-nodes-in-k-group/">25. Reverse Nodes in k-Group (K 个一组翻转链表)</a></strong>, Hard, 1230 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/zigzag-conversion/">6. ZigZag Conversion (Z 字形变换)</a></strong>, Medium, 1226 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/maximum-product-subarray/">152. Maximum Product Subarray (乘积最大子数组)</a></strong>, Medium, 1223 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/kth-largest-element-in-an-array/">215. Kth Largest Element in an Array (数组中的第K个最大元素)</a></strong>, Medium, 1211 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/string-to-integer-atoi/">8. String to Integer (atoi) (字符串转换整数 (atoi))</a></strong>, Medium, 1168 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/first-missing-positive/">41. First Missing Positive (缺失的第一个正数)</a></strong>, Hard, 1163 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/move-zeroes/">283. Move Zeroes (移动零)</a></strong>, Easy, 1162 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/linked-list-cycle/">141. Linked List Cycle (环形链表)</a></strong>, Easy, 1161 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/validate-binary-search-tree/">98. Validate Binary Search Tree (验证二叉搜索树)</a></strong>, Medium, 1156 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/binary-tree-maximum-path-sum/">124. Binary Tree Maximum Path Sum (二叉树中的最大路径和)</a></strong>, Hard, 1152 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">105. Construct Binary Tree from Preorder and Inorder Traversal (从前序与中序遍历序列构造二叉树)</a></strong>, Medium, 1149 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/">34. Find First and Last Position of Element in Sorted Array (在排序数组中查找元素的第一个和最后一个位置)</a></strong>, Medium, 1137 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/sliding-window-maximum/">239. Sliding Window Maximum (滑动窗口最大值)</a></strong>, Hard, 1114 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/linked-list-cycle-ii/">142. Linked List Cycle II (环形链表 II)</a></strong>, Medium, 1097 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/word-break/">139. Word Break (单词拆分)</a></strong>, Medium, 1097 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/jump-game-ii/">45. Jump Game II (跳跃游戏 II)</a></strong>, Medium, 1094 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/majority-element/">169. Majority Element (多数元素)</a></strong>, Easy, 1089 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/palindrome-linked-list/">234. Palindrome Linked List (回文链表)</a></strong>, Easy, 1072 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/unique-paths/">62. Unique Paths (不同路径)</a></strong>, Medium, 1072 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/rotate-array/">189. Rotate Array (旋转数组)</a></strong>, Medium, 1057 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/binary-tree-inorder-traversal/">94. Binary Tree Inorder Traversal (二叉树的中序遍历)</a></strong>, Easy, 1052 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/merge-intervals/">56. Merge Intervals (合并区间)</a></strong>, Medium, 1051 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/merge-sorted-array/">88. Merge Sorted Array (合并两个有序数组)</a></strong>, Easy, 1041 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/subarray-sum-equals-k/">560. Subarray Sum Equals K (和为K的子数组)</a></strong>, Medium, 1036 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/perfect-squares/">279. Perfect Squares (完全平方数)</a></strong>, Medium, 1035 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/search-insert-position/">35. Search Insert Position (搜索插入位置)</a></strong>, Easy, 1005 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/swap-nodes-in-pairs/">24. Swap Nodes in Pairs (两两交换链表中的节点)</a></strong>, Medium, 996 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/maximal-rectangle/">85. Maximal Rectangle (最大矩形)</a></strong>, Hard, 983 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/implement-strstr/">28. Implement strStr() (实现 strStr())</a></strong>, Easy, 982 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/reverse-linked-list-ii/">92. Reverse Linked List II (反转链表 II)</a></strong>, Medium, 980 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/min-stack/">155. Min Stack (最小栈)</a></strong>, Easy, 979 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/word-search/">79. Word Search (单词搜索)</a></strong>, Medium, 979 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/remove-element/">27. Remove Element (移除元素)</a></strong>, Easy, 967 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/n-queens/">51. N-Queens (N 皇后)</a></strong>, Hard, 965 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/sort-colors/">75. Sort Colors (颜色分类)</a></strong>, Medium, 961 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/binary-tree-level-order-traversal/">102. Binary Tree Level Order Traversal (二叉树的层序遍历)</a></strong>, Medium, 960 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/rotate-image/">48. Rotate Image (旋转图像)</a></strong>, Medium, 960 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/unique-binary-search-trees-ii/">95. Unique Binary Search Trees II (不同的二叉搜索树 II)</a></strong>, Medium, 955 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/minimum-path-sum/">64. Minimum Path Sum (最小路径和)</a></strong>, Medium, 954 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/queue-reconstruction-by-height/">406. Queue Reconstruction by Height (根据身高重建队列)</a></strong>, Medium, 947 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/invert-binary-tree/">226. Invert Binary Tree (翻转二叉树)</a></strong>, Easy, 941 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/path-sum-iii/">437. Path Sum III (路径总和 III)</a></strong>, Medium, 937 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/maximum-depth-of-binary-tree/">104. Maximum Depth of Binary Tree (二叉树的最大深度)</a></strong>, Easy, 937 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/delete-node-in-a-linked-list/">237. Delete Node in a Linked List (删除链表中的节点)</a></strong>, Easy, 936 likes ✔️</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/house-robber-iii/">337. House Robber III (打家劫舍 III)</a></strong>, Medium, 929 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/4sum/">18. 4Sum (四数之和)</a></strong>, Medium, 918 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/decode-ways/">91. Decode Ways (解码方法)</a></strong>, Medium, 904 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/course-schedule/">207. Course Schedule (课程表)</a></strong>, Medium, 897 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/sudoku-solver/">37. Sudoku Solver (解数独)</a></strong>, Hard, 897 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/combine-two-tables/">175. Combine Two Tables (组合两个表)</a></strong>, Easy, 891 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/partition-equal-subset-sum/">416. Partition Equal Subset Sum (分割等和子集)</a></strong>, Medium, 886 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/product-of-array-except-self/">238. Product of Array Except Self (除自身以外数组的乘积)</a></strong>, Medium, 885 likes</li>
<li><strong><a href="https://link.zhihu.com/?target=https%3A//leetcode-cn.com/problems/flatten-binary-tree-to-linked-list/">114. Flatten Binary Tree to Linked List (二叉树展开为链表)</a></strong>, Medium, 877 likes ✔️</li>
</ul>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><a href="https://www.merriam-webster.com/dictionary/algorithm">&ldquo;Definition of ALGORITHM&rdquo;</a>. <em>Merriam-Webster Online Dictionary</em>. <a href="https://web.archive.org/web/20200214074446/https://www.merriam-webster.com/dictionary/algorithm">Archived</a> from the original on February 14, 2020. Retrieved November 14, 2019.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>Introduction to Algorithm 中文译作《算法导论》&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p>主要参考文档 <a href="https://en.wikipedia.org/wiki/Binary_search_algorithm">https://en.wikipedia.org/wiki/Binary_search_algorithm</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4" role="doc-endnote">
<p>图片及概念均摘自 Introduction to Algorithm 4th，3.1节，3.2 节&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:5" role="doc-endnote">
<p>jdk 版本有关，64 位 jdk，按 8 字节对齐&#160;<a href="#fnref:5" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:6" role="doc-endnote">
<p>图片引用自 wikipedia linkedlist 条目，https://en.wikipedia.org/wiki/Linked_list&#160;<a href="#fnref:6" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:7" role="doc-endnote">
<p>Fibonacci 介绍：https://en.wikipedia.org/wiki/Fibonacci_number&#160;<a href="#fnref:7" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:8" role="doc-endnote">
<p><a href="https://zhuanlan.zhihu.com/p/165877869">几种计算Fibonacci数列算法的时间复杂度比较 - 知乎 (zhihu.com)</a>&#160;<a href="#fnref:8" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:9" role="doc-endnote">
<p>几种斐波那契数列算法比较 <a href="https://www.nayuki.io/page/fast-fibonacci-algorithms">Fast Fibonacci algorithms (nayuki.io)</a>&#160;<a href="#fnref:9" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:10" role="doc-endnote">
<p>我知道的有 C++，Scala&#160;<a href="#fnref:10" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:11" role="doc-endnote">
<p>与主定理类似的还有 Akra–Bazzi method，https://en.wikipedia.org/wiki/Akra%E2%80%93Bazzi_method&#160;<a href="#fnref:11" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:12" role="doc-endnote">
<p>Josephus problem 主要参考 <a href="https://en.wikipedia.org/wiki/Josephus_problem">https://en.wikipedia.org/wiki/Josephus_problem</a>&#160;<a href="#fnref:12" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:13" role="doc-endnote">
<p>汉诺塔图片资料均来自 <a href="https://en.wikipedia.org/wiki/Tower_of_Hanoi">https://en.wikipedia.org/wiki/Tower_of_Hanoi</a>&#160;<a href="#fnref:13" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:14" role="doc-endnote">
<p>也称为 Pascal&rsquo;s triangle <a href="https://en.wikipedia.org/wiki/Pascal%27s_triangle">https://en.wikipedia.org/wiki/Pascal%27s_triangle</a>&#160;<a href="#fnref:14" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:15" role="doc-endnote">
<p>龟兔赛跑动画来自于 <a href="https://onestepcode.com/floyd-hare-tortoise-algorithm-demo/">Floyd&rsquo;s Hare and Tortoise Algorithm Demo - One Step! Code (onestepcode.com)</a>&#160;<a href="#fnref:15" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>
</article>
 
      


<p id="inspirational_statement_content" style="color: red"></p>
<script>

    
    function randomNum(minNum,maxNum){
        switch(arguments.length){
            case 1:
                return parseInt(Math.random()*minNum+1,10);
                break;
            case 2:
                return parseInt(Math.random()*(maxNum-minNum+1)+minNum,10);
                break;
            default:
                return 0;
                break;
        }
    }

    var inspirational_statement_array = [] ;

    inspirational_statement_array.push('不奋斗，你的才华如何配得上你的任性。不奋斗，你的脚步如何赶得上父母老去的速度。不奋斗，世界这么大你靠什么去看看') ;
    inspirational_statement_array.push('开挂的人生，不是天生就有持续不断的鸡血，而是后天获得了从痛苦中给自己充电的能力。') ;
    inspirational_statement_array.push('如果你连工作挣钱都要别人开导你，都要人盯着，看着，哄着，鼓励着，劝你还是别干了，那你就应该穷！这是不是鸡汤，这是现实。') ;
    inspirational_statement_array.push('趁着梦想还有温度，人生还有转机，抓紧时间去奋斗，不要等到中年时，只能叹息自己的碌碌无为') ;
    inspirational_statement_array.push('世上所有的牛逼背后，都是一帮玩命的人') ;
    inspirational_statement_array.push('你可以一辈子不登山，但你心中一定要有座山。它使你总往高处爬，它使你总有个奋斗的方向，它使你任何一刻抬起头，都能看到自己的希望') ;
    inspirational_statement_array.push('我喜欢这个功利的世界，因为它承认每个人的努力，好看的姑娘能轻松几年，但会赚钱的姑娘才能过好一生') ;
    inspirational_statement_array.push('影响我们人生的绝不仅仅是环境，其实是心态在控制个人的行动和思想。同时，心态也决定了一个人的视野、事业和成就，甚至一生') ;
    inspirational_statement_array.push('第一眼就看上的衣服往往你买不起，第一眼就心动的人往往他不会喜欢你。你真正喜欢想要的，没有一样是可以轻易得到的。这就是努力的理由') ;
    inspirational_statement_array.push('愿你能把梦想放在心底，化为最坚定的力量。不管一路上多么坎坷和不安，那份坚持一直在；不管一路上多么坦途或荆棘，那份努力一直在') ;
    inspirational_statement_array.push('你所做的事情，也许暂时看不到成果，但不要灰心或焦虑，你不是没有成长，而是在扎根。') ;
    inspirational_statement_array.push('生活教会我们的第一件事就是——没有人可以宠你一辈子，要想走得精彩又坦荡，唯有独立坚强。新的一天开始了，替未来的你抱抱现在努力奋斗的自己') ;
    inspirational_statement_array.push('我终于相信，每一条走上来的路，都有它不得不那样跋涉的理由。每一条要走下去的路，都有它不得不那样选择的方向') ;
    inspirational_statement_array.push('人生，就要活得漂亮，走得铿锵。无论你是谁，宁可做拼搏的失败者，也不要做安于现状的平凡人') ;
    inspirational_statement_array.push('有梦想的人不做选择题，只做证明题，所以，年轻的你，可以犯错，可以跌倒，但千万不要怀疑自己，也不要放弃梦想。去想去的地方，做该做的事情，不迟疑，不徘徊') ;
    inspirational_statement_array.push('能力不在脸上，本事不在嘴上。要踏踏实实做实事，生活不会因为某个节点而变得与众不同，未来的幸运都是过往努力的积攒') ;
    inspirational_statement_array.push('当所有人都拿你当回事的时候，你不能太拿自己当回事；当所有人都不拿你当回事的时，你一定得瞧得上自己。这就是淡定，这就是从容') ;
    inspirational_statement_array.push('生活给你的很多难堪，不是在跟你过不去，而是要你不断提高生存的技能。你看别人干什么好像都是轻而易举，很容易成功，那是因为别人背后可能比你多付出了百倍的努力!') ;
    inspirational_statement_array.push('当一个人的心中有着更高的山峰想去攀登时，他就不会在意脚下的泥沼，他才可能用最平静的方式去面对一般人难以承受的痛苦。') ;
    inspirational_statement_array.push('这世间从来没有所谓的逆袭。如果有的话，也不过是日复一日自律和努力的结果。') ;
    inspirational_statement_array.push('人生就是一个磨练的过程，如果没有这些酸甜苦辣，你永远都不会成熟！所以，我们应该在阳光下灿烂，风雨中奔跑，泪水中成长，拼搏中展望，对自己说一声：昨天挺好，今天很好，明天会更好！') ;

    inspirational_statement_array.push('人生要用简单的心境，对待复杂的人生，最无情的不是人，是时间；最珍贵的不是金钱，是情感；最可怕的不是失恋，是心身不全；最舒适的不是酒店，是家里；最难听的不是脏话，是无言；最美好的不是未来，是今天。') ;

    inspirational_statement_array.push('在一切变好之前，我们总要经历一些不开心的日子，这段日子也许很长，也许只是一觉醒来。有时候，选择快乐，更需要勇气。') ;
    inspirational_statement_array.push('如果你的生活已处于低谷，那就，大胆走，因为你怎样走都是在向上。') ;
    inspirational_statement_array.push('你可以哭但不能输，你可以难过但不可以落魄，你不努力怎么会知道自己可以赢得多少掌声?如果你能每天呐喊遍“我用不着为这一点小事而烦恼”，你会发现，你心里有一种不可思议的力量，试试看，很管用的。') ;
    inspirational_statement_array.push('生活不是用来妥协的，你退缩得越多，能让你喘息的空间就越有限。日子不是用来将就的，你表现得越卑微，一些幸福的东西就会离你越远。') ;
    inspirational_statement_array.push('过去的事，就让它过去吧，我们错过了昨日的日落，再也不能错过今日的日出，保持平衡的心态，以最美好的心情来对待每一天，每一天都会充满阳光，洋溢着希望。') ;
    inspirational_statement_array.push('人生快不快乐看心情，幸不幸福看心态。漫长人生中，什么都不是一眼看到头的，一时的春风得意算不了什么，一时的失败也不能算数。') ;
    inspirational_statement_array.push('成功没有快车道，幸福没有高速路。所有的成功，都来自不倦的努力和奔跑；所有幸福，都来自平凡的奋斗和坚持。') ;
    inspirational_statement_array.push('每天都是一个起点，每天都有一点进步，每天都有一点收获!') ;
    inspirational_statement_array.push('眼泪不是我们的答案，拼搏才是我们的选择。') ;
    inspirational_statement_array.push('静下来，铸我实力；拼上去，亮我风采。') ;
    inspirational_statement_array.push('霸气盈胸，高山有顶我为峰；豪情壮志，乾坤朗朗我称雄。') ;
    inspirational_statement_array.push(' 宁可战死，不可吓死。今朝不搏，更待何时?') ;
    inspirational_statement_array.push('不论在何时开始，重要的是开始之后就不要停止；不论在何时，重要的是之后就不要悔恨。') ;
    inspirational_statement_array.push('明天是世上增值最快的一块土地，因它充满了希望。') ;
    inspirational_statement_array.push('越接近考试，往往越要在坚实上下功夫。') ;
    inspirational_statement_array.push('最弱的人，集中精力于单一目标，也能有所成就，最强的人，分心太多事务，可能一事无成。') ;
    inspirational_statement_array.push('你想活得更有质量更有层次更有品位吗?那就努力改变你的现状!') ;
    inspirational_statement_array.push('时间不等待，珍惜今天，把握现在!') ;
    inspirational_statement_array.push('以阳光和微笑示人，在逆境中燃起斗志!') ;
    inspirational_statement_array.push('苦想没盼头，苦干有奔头。') ;
    inspirational_statement_array.push('人的才华就如海绵的水，没有外力的挤压，它是绝对流不出来的。流出来后，海绵才能吸收新的源泉。') ;
    inspirational_statement_array.push('忍别人所不能忍的痛，吃别人所不能吃的苦，是为了收获得不到的收获。') ;
    inspirational_statement_array.push('人生如梦，一切皆有可能，只要你能想。') ;
    inspirational_statement_array.push('别想一下造出大海，必须先由小河川开始。') ;
    inspirational_statement_array.push('悲观些看成功，乐观些看失败。轻松些看自己，宽容些看别人。理智些看问题，纯真些看人生。') ;
    inspirational_statement_array.push('无须自卑，不要自负，坚持自信。') ;
    inspirational_statement_array.push('身体常动，内心常静。') ;
    inspirational_statement_array.push('学习与坐禅相似，须有一颗恒心。') ;

    window.onload = function () {
        var index = randomNum(0,inspirational_statement_array.length-1) ;
        var oldText = "" ;
        console.log(index);
        document.getElementById('inspirational_statement_content').innerText = oldText+""+inspirational_statement_array[index] ;
    } ;
</script>
<script>
    function hous(x,y,r,h,context){

        var gen3=Math.sqrt(3);
        var rs=0.5*r;
        switch(h)
        {
            case 1:
                context.fillText("1",x+rs,y-rs*gen3);
                break;
            case 2:
                context.fillText("2",x+gen3*rs,y-rs);
                break;
            case 3:
                context.fillText("3",x+2*rs,y);
                break;
            case 4:
                context.fillText("4",x+gen3*rs,y+rs);
                break;
            case 5:
                context.fillText("5",x+rs,y+gen3*rs);
                break;
            case 6:
                context.fillText("6",x,y+2*rs);
                break;
            case 7:
                context.fillText("7",x-rs,y+gen3*rs);
                break;
            case 8:
                context.fillText("8",x-gen3*rs,y+rs);
                break;
            case 9:
                context.fillText("9",x-2*rs,y);
                break;
            case 10:
                context.fillText("10",x-gen3*rs,y-rs);
                break;
            case 11:
                context.fillText("11",x-rs,y-gen3*rs);
                break;
            case 12:
                context.fillText("12",x,y-2*rs);
                break;
            default:
                alert("请输入正确的时间刻度！");
        }
    }



    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
</script>

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#11-什么是算法">1.1 什么是算法？</a></li>
    <li><a href="#12-什么是数据结构">1.2 什么是数据结构？</a></li>
    <li><a href="#13-二分查找-3">1.3 二分查找 </a>
      <ul>
        <li><a href="#二分查找基础版">二分查找基础版</a></li>
        <li><a href="#二分查找改变版">二分查找改变版</a></li>
        <li><a href="#衡量算法好坏">衡量算法好坏</a></li>
        <li><a href="#二分查找平衡版">二分查找平衡版</a></li>
        <li><a href="#二分查找-java-版">二分查找 Java 版</a></li>
        <li><a href="#leftmost-与-rightmost">Leftmost 与 Rightmost</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#21-数组">2.1 数组</a>
      <ul>
        <li><a href="#概述">概述</a></li>
        <li><a href="#动态数组">动态数组</a></li>
        <li><a href="#二维数组">二维数组</a></li>
        <li><a href="#局部性原理">局部性原理</a></li>
        <li><a href="#越界检查">越界检查</a></li>
      </ul>
    </li>
    <li><a href="#22-链表">2.2 链表</a>
      <ul>
        <li><a href="#概述-1">概述</a></li>
        <li><a href="#单向链表">单向链表</a></li>
        <li><a href="#单向链表带哨兵">单向链表（带哨兵）</a></li>
        <li><a href="#双向链表带哨兵">双向链表（带哨兵）</a></li>
        <li><a href="#环形链表带哨兵">环形链表（带哨兵）</a></li>
      </ul>
    </li>
    <li><a href="#23-递归">2.3 递归</a>
      <ul>
        <li><a href="#概述-2">概述</a></li>
        <li><a href="#单路递归-single-recursion">单路递归 Single Recursion</a></li>
        <li><a href="#多路递归-multi-recursion">多路递归 Multi Recursion</a></li>
        <li><a href="#递归优化-记忆法">递归优化-记忆法</a></li>
        <li><a href="#递归优化-尾递归">递归优化-尾递归</a></li>
        <li><a href="#递归时间复杂度-master-theorem14">递归时间复杂度-Master theorem</a></li>
        <li><a href="#递归时间复杂度-展开求解">递归时间复杂度-展开求解</a></li>
      </ul>
    </li>
    <li><a href="#24-队列">2.4 队列</a>
      <ul>
        <li><a href="#概述-3">概述</a></li>
        <li><a href="#链表实现">链表实现</a></li>
        <li><a href="#环形数组实现">环形数组实现</a></li>
      </ul>
    </li>
    <li><a href="#25-栈">2.5 栈</a>
      <ul>
        <li><a href="#概述-4">概述</a></li>
        <li><a href="#链表实现-1">链表实现</a></li>
        <li><a href="#数组实现">数组实现</a></li>
        <li><a href="#应用">应用</a></li>
      </ul>
    </li>
    <li><a href="#26-双端队列">2.6 双端队列</a>
      <ul>
        <li><a href="#概述-5">概述</a></li>
        <li><a href="#链表实现-2">链表实现</a></li>
        <li><a href="#数组实现-1">数组实现</a></li>
      </ul>
    </li>
    <li><a href="#27-优先级队列">2.7 优先级队列</a>
      <ul>
        <li><a href="#无序数组实现">无序数组实现</a></li>
        <li><a href="#有序数组实现">有序数组实现</a></li>
        <li><a href="#堆实现">堆实现</a></li>
      </ul>
    </li>
    <li><a href="#28-阻塞队列">2.8 阻塞队列</a>
      <ul>
        <li><a href="#单锁实现">单锁实现</a></li>
        <li><a href="#双锁实现">双锁实现</a></li>
      </ul>
    </li>
    <li><a href="#29-堆">2.9 堆</a></li>
    <li><a href="#210-二叉树">2.10 二叉树</a>
      <ul>
        <li><a href="#存储">存储</a></li>
        <li><a href="#遍历">遍历</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#31-时间复杂度">3.1 时间复杂度</a></li>
    <li><a href="#32-二分查找">3.2 二分查找</a>
      <ul>
        <li><a href="#e01-二分查找-力扣-704-题">E01. 二分查找-力扣 704 题</a></li>
        <li><a href="#e02-搜索插入位置-力扣-35-题">E02. 搜索插入位置-力扣 35 题</a></li>
        <li><a href="#e03-搜索开始结束位置-力扣-34-题">E03. 搜索开始结束位置-力扣 34 题</a></li>
      </ul>
    </li>
    <li><a href="#33-递归---single-recursion">3.3 递归 - single recursion</a>
      <ul>
        <li><a href="#e03-二分查找">E03. 二分查找</a></li>
        <li><a href="#e04-冒泡排序">E04. 冒泡排序</a></li>
        <li><a href="#e05-插入排序">E05. 插入排序</a></li>
        <li><a href="#e06-约瑟夫问题16">E06. 约瑟夫问题</a></li>
      </ul>
    </li>
    <li><a href="#34-递归---multi-recursion">3.4 递归 - multi recursion</a>
      <ul>
        <li><a href="#e02-汉诺塔13">E02. 汉诺塔</a></li>
        <li><a href="#e03-杨辉三角6">E03. 杨辉三角</a></li>
      </ul>
    </li>
    <li><a href="#35-链表">3.5 链表</a>
      <ul>
        <li><a href="#e01-反转单向链表-力扣-206-题">E01. 反转单向链表-力扣 206 题</a></li>
        <li><a href="#e02-根据值删除节点-力扣-203-题">E02. 根据值删除节点-力扣 203 题</a></li>
        <li><a href="#e03--删除倒数节点-力扣-19-题">E03.  删除倒数节点-力扣 19 题</a></li>
        <li><a href="#e04-有序链表去重-力扣-83-题">E04. 有序链表去重-力扣 83 题</a></li>
        <li><a href="#e05-有序链表去重-力扣-82-题">E05. 有序链表去重-力扣 82 题</a></li>
        <li><a href="#e06-合并有序链表-力扣-21-题">E06. 合并有序链表-力扣 21 题</a></li>
        <li><a href="#e07-合并多个有序链表-力扣-23-题">E07. 合并多个有序链表-力扣 23 题</a></li>
        <li><a href="#e08-查找链表中间节点-力扣-876-题">E08. 查找链表中间节点-力扣 876 题</a></li>
        <li><a href="#e09-回文链表-力扣-234-题">E09. 回文链表-力扣 234 题</a></li>
        <li><a href="#e10-环形链表-力扣-141-题">E10. 环形链表-力扣 141 题</a></li>
        <li><a href="#e11-环形链表-力扣-142-题">E11. 环形链表-力扣 142 题</a></li>
        <li><a href="#ex1-删除节点-力扣-237-题">Ex1. 删除节点-力扣 237 题</a></li>
        <li><a href="#ex2-共尾链表-力扣-160-题">Ex2. 共尾链表-力扣 160 题</a></li>
      </ul>
    </li>
    <li><a href="#36-数组">3.6 数组</a>
      <ul>
        <li><a href="#e01-合并有序数组">E01. 合并有序数组</a></li>
      </ul>
    </li>
    <li><a href="#37-队列">3.7 队列</a>
      <ul>
        <li><a href="#e01-二叉树层序遍历-力扣-102-题">E01. 二叉树层序遍历-力扣 102 题</a></li>
        <li><a href="#ex1-设计队列-力扣-622-题">Ex1. 设计队列-力扣 622 题</a></li>
      </ul>
    </li>
    <li><a href="#38-栈">3.8 栈</a>
      <ul>
        <li><a href="#e01-有效的括号-力扣-20-题">E01. 有效的括号-力扣 20 题</a></li>
        <li><a href="#e02-后缀表达式求值-力扣-120-题">E02. 后缀表达式求值-力扣 120 题</a></li>
        <li><a href="#e03-中缀表达式转后缀">E03. 中缀表达式转后缀</a></li>
        <li><a href="#e04-双栈模拟队列-力扣-232-题">E04. 双栈模拟队列-力扣 232 题</a></li>
        <li><a href="#e05-单队列模拟栈-力扣-225-题">E05. 单队列模拟栈-力扣 225 题</a></li>
      </ul>
    </li>
    <li><a href="#39-双端队列">3.9 双端队列</a>
      <ul>
        <li><a href="#e01-二叉树-z-字层序遍历-力扣-103-题">E01. 二叉树 Z 字层序遍历-力扣 103 题</a></li>
        <li><a href="#ex1-设计双端队列-力扣-641-题">Ex1. 设计双端队列-力扣 641 题</a></li>
      </ul>
    </li>
    <li><a href="#310-优先级队列">3.10 优先级队列</a>
      <ul>
        <li><a href="#e01-合并多个有序链表-力扣-23-题">E01. 合并多个有序链表-力扣 23 题</a></li>
      </ul>
    </li>
    <li><a href="#311-堆">3.11 堆</a>
      <ul>
        <li><a href="#e01-堆排序">E01. 堆排序</a></li>
        <li><a href="#e02-数组中第k大元素-力扣-215-题">E02. 数组中第K大元素-力扣 215 题</a></li>
        <li><a href="#e03-数据流中第k大元素-力扣-703-题">E03. 数据流中第K大元素-力扣 703 题</a></li>
        <li><a href="#e04-数据流的中位数-力扣-295-题">E04. 数据流的中位数-力扣 295 题</a></li>
      </ul>
    </li>
    <li><a href="#312-二叉树">3.12 二叉树</a>
      <ul>
        <li><a href="#e04-对称二叉树-力扣-101-题">E04. 对称二叉树-力扣 101 题</a></li>
        <li><a href="#e05-二叉树最大深度-力扣-104-题">E05. 二叉树最大深度-力扣 104 题</a></li>
        <li><a href="#e06-二叉树最小深度-力扣-111-题">E06. 二叉树最小深度-力扣 111 题</a></li>
        <li><a href="#e07-翻转二叉树-力扣-226-题">E07. 翻转二叉树-力扣 226 题</a></li>
        <li><a href="#e08-后缀表达式转二叉树">E08. 后缀表达式转二叉树</a></li>
        <li><a href="#e09-根据前序与中序遍历结果构造二叉树-力扣-105-题">E09. 根据前序与中序遍历结果构造二叉树-力扣 105 题</a></li>
        <li><a href="#e10-根据中序与后序遍历结果构造二叉树-力扣-106-题">E10. 根据中序与后序遍历结果构造二叉树-力扣 106 题</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#参考文章">参考文章</a></li>
    <li><a href="#落选题目">落选题目</a>
      <ul>
        <li><a href="#反转字符数组">反转字符数组</a></li>
      </ul>
    </li>
    <li><a href="#力扣高评价题目列表">力扣高评价题目列表</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












